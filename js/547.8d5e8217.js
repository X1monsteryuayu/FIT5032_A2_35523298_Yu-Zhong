"use strict";(self["webpackChunkhealthypathway"]=self["webpackChunkhealthypathway"]||[]).push([[547],{5547:(l,e,a)=>{a.r(e),a.d(e,{default:()=>nl});var t=a(641),s=a(3751),n=a(33),i=a(953),u=a(5220),o=a(7518),c=a(454);const r={class:"doctor-list-page"},v={class:"container mt-4"},d={class:"row"},k={class:"col-12"},L={class:"card shadow"},p={class:"card-body"},b={class:"row mb-3"},h={class:"col-md-4"},m={class:"input-group"},g={class:"col-md-3"},f=["value"],C={class:"col-md-3"},y=["value"],x={class:"col-md-2"},w={class:"table-responsive"},E={class:"table table-hover"},_={class:"table-dark"},K={key:0},M={key:1},W={class:"d-flex align-items-center"},X={class:"badge bg-info"},R={class:"d-flex align-items-center"},I={class:"stars me-1"},F={class:"fw-bold"},V={class:"btn-group btn-group-sm"},A=["onClick"],U=["onClick","disabled"],j={key:0,"aria-label":"医生列表分页"},O={class:"pagination justify-content-center"},Q=["onClick"],S={class:"d-flex justify-content-between align-items-center mt-3"},q={class:"text-muted"},D={class:"modal-dialog"},J={class:"modal-content"},N={key:0,class:"modal-body"},T={class:"text-center mb-3"},z={class:"badge bg-info"},B={class:"row"},G={class:"col-6"},H={class:"col-6"},P={class:"mt-3"},Y={class:"d-flex align-items-center"},Z={class:"stars me-2"},$={class:"fw-bold"},ll={class:"modal-footer"},el=["disabled"],al={__name:"DoctorList",setup(l){const e=(0,u.rd)(),a=(0,o.n)(),al=(0,i.KR)([]),tl=(0,i.KR)(!1),sl=(0,i.KR)(""),nl=(0,i.KR)(""),il=(0,i.KR)(""),ul=(0,i.KR)("name"),ol=(0,i.KR)("asc"),cl=(0,i.KR)(1),rl=(0,i.KR)(10),vl=(0,i.KR)(null),dl=(0,i.KR)(null),kl=(0,t.EW)(()=>[...new Set(al.value.map(l=>l.specialty))]),Ll=(0,t.EW)(()=>[...new Set(al.value.map(l=>l.hospital))]),pl=(0,t.EW)(()=>{let l=al.value;return sl.value&&(l=l.filter(l=>l.name.toLowerCase().includes(sl.value.toLowerCase()))),nl.value&&(l=l.filter(l=>l.specialty===nl.value)),il.value&&(l=l.filter(l=>l.hospital===il.value)),l}),bl=(0,t.EW)(()=>{const l=[...pl.value];return l.sort((l,e)=>{let a=l[ul.value],t=e[ul.value];return"string"===typeof a&&(a=a.toLowerCase(),t=t.toLowerCase()),"asc"===ol.value?a>t?1:-1:a<t?1:-1})}),hl=(0,t.EW)(()=>Math.ceil(bl.value.length/rl.value)),ml=(0,t.EW)(()=>(cl.value-1)*rl.value),gl=(0,t.EW)(()=>ml.value+rl.value),fl=(0,t.EW)(()=>bl.value.slice(ml.value,gl.value)),Cl=()=>{tl.value=!0,setTimeout(()=>{const l=["内科","外科","儿科","妇科","骨科","眼科","皮肤科","心理科","耳鼻喉科","泌尿科"],e=["北京协和医院","上海华山医院","广州中山医院","深圳人民医院","杭州第一医院"],a=["张","李","王","刘","陈","杨","赵","孙","周","吴"],t=["医生","主任","教授","专家"];al.value=Array.from({length:156},(s,n)=>({id:n+1,name:a[Math.floor(Math.random()*a.length)]+t[Math.floor(Math.random()*t.length)]+(n+1),specialty:l[Math.floor(Math.random()*l.length)],hospital:e[Math.floor(Math.random()*e.length)],rating:+(2*Math.random()+3).toFixed(1),experience:Math.floor(25*Math.random())+5})),tl.value=!1},800)},yl=()=>{cl.value=1},xl=()=>{cl.value=1},wl=l=>{ul.value===l?ol.value="asc"===ol.value?"desc":"asc":(ul.value=l,ol.value="asc"),cl.value=1},El=l=>ul.value!==l?"bi bi-arrow-down-up text-muted":"asc"===ol.value?"bi bi-arrow-up":"bi bi-arrow-down",_l=l=>{l>=1&&l<=hl.value&&(cl.value=l)},Kl=()=>{cl.value=1},Ml=()=>{const l=[],e=hl.value,a=cl.value;if(e<=7)for(let t=1;t<=e;t++)l.push(t);else if(a<=4){for(let e=1;e<=5;e++)l.push(e);l.push("..."),l.push(e)}else if(a>=e-3){l.push(1),l.push("...");for(let a=e-4;a<=e;a++)l.push(a)}else{l.push(1),l.push("...");for(let e=a-1;e<=a+1;e++)l.push(e);l.push("..."),l.push(e)}return l.filter(e=>"..."!==e||l.indexOf(e)===l.lastIndexOf(e))},Wl=l=>{vl.value=l;const e=new c.aF(dl.value);e.show()},Xl=l=>{if(!a.isAuthenticated)return alert("请先登录后再预约"),void e.push("/login");e.push({name:"Consultation",query:{doctorId:l.id,doctorName:l.name}})};return(0,t.sV)(()=>{Cl()}),(l,e)=>((0,t.uX)(),(0,t.CE)("div",r,[(0,t.Lk)("div",v,[(0,t.Lk)("div",d,[(0,t.Lk)("div",k,[(0,t.Lk)("div",L,[(0,t.Lk)("div",{class:"card-header bg-primary text-white d-flex justify-content-between align-items-center"},[e[14]||(e[14]=(0,t.Lk)("h4",{class:"mb-0"},"医生列表",-1)),(0,t.Lk)("button",{class:"btn btn-light btn-sm",onClick:Cl},e[13]||(e[13]=[(0,t.Lk)("i",{class:"bi bi-arrow-clockwise me-1"},null,-1),(0,t.eW)(" 刷新数据 ",-1)]))]),(0,t.Lk)("div",p,[(0,t.Lk)("div",b,[(0,t.Lk)("div",h,[(0,t.Lk)("div",m,[e[15]||(e[15]=(0,t.Lk)("span",{class:"input-group-text"},[(0,t.Lk)("i",{class:"bi bi-search"})],-1)),(0,t.bo)((0,t.Lk)("input",{"onUpdate:modelValue":e[0]||(e[0]=l=>sl.value=l),type:"text",class:"form-control",placeholder:"搜索医生姓名...",onInput:yl},null,544),[[s.Jo,sl.value]])])]),(0,t.Lk)("div",g,[(0,t.bo)((0,t.Lk)("select",{"onUpdate:modelValue":e[1]||(e[1]=l=>nl.value=l),class:"form-select",onChange:yl},[e[16]||(e[16]=(0,t.Lk)("option",{value:""},"所有专科",-1)),((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(kl.value,l=>((0,t.uX)(),(0,t.CE)("option",{key:l,value:l},(0,n.v_)(l),9,f))),128))],544),[[s.u1,nl.value]])]),(0,t.Lk)("div",C,[(0,t.bo)((0,t.Lk)("select",{"onUpdate:modelValue":e[2]||(e[2]=l=>il.value=l),class:"form-select",onChange:yl},[e[17]||(e[17]=(0,t.Lk)("option",{value:""},"所有医院",-1)),((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(Ll.value,l=>((0,t.uX)(),(0,t.CE)("option",{key:l,value:l},(0,n.v_)(l),9,y))),128))],544),[[s.u1,il.value]])]),(0,t.Lk)("div",x,[(0,t.bo)((0,t.Lk)("select",{"onUpdate:modelValue":e[3]||(e[3]=l=>ul.value=l),class:"form-select",onChange:xl},e[18]||(e[18]=[(0,t.Lk)("option",{value:"name"},"按姓名",-1),(0,t.Lk)("option",{value:"rating"},"按评分",-1),(0,t.Lk)("option",{value:"experience"},"按经验",-1)]),544),[[s.u1,ul.value]])])]),(0,t.Lk)("div",w,[(0,t.Lk)("table",E,[(0,t.Lk)("thead",_,[(0,t.Lk)("tr",null,[(0,t.Lk)("th",null,[(0,t.Lk)("button",{class:"btn btn-link text-white p-0",onClick:e[4]||(e[4]=l=>wl("name"))},[e[19]||(e[19]=(0,t.eW)(" 姓名 ",-1)),(0,t.Lk)("i",{class:(0,n.C4)(El("name"))},null,2)])]),(0,t.Lk)("th",null,[(0,t.Lk)("button",{class:"btn btn-link text-white p-0",onClick:e[5]||(e[5]=l=>wl("specialty"))},[e[20]||(e[20]=(0,t.eW)(" 专科 ",-1)),(0,t.Lk)("i",{class:(0,n.C4)(El("specialty"))},null,2)])]),(0,t.Lk)("th",null,[(0,t.Lk)("button",{class:"btn btn-link text-white p-0",onClick:e[6]||(e[6]=l=>wl("hospital"))},[e[21]||(e[21]=(0,t.eW)(" 医院 ",-1)),(0,t.Lk)("i",{class:(0,n.C4)(El("hospital"))},null,2)])]),(0,t.Lk)("th",null,[(0,t.Lk)("button",{class:"btn btn-link text-white p-0",onClick:e[7]||(e[7]=l=>wl("rating"))},[e[22]||(e[22]=(0,t.eW)(" 评分 ",-1)),(0,t.Lk)("i",{class:(0,n.C4)(El("rating"))},null,2)])]),(0,t.Lk)("th",null,[(0,t.Lk)("button",{class:"btn btn-link text-white p-0",onClick:e[8]||(e[8]=l=>wl("experience"))},[e[23]||(e[23]=(0,t.eW)(" 经验 (年) ",-1)),(0,t.Lk)("i",{class:(0,n.C4)(El("experience"))},null,2)])]),e[24]||(e[24]=(0,t.Lk)("th",null,"操作",-1))])]),(0,t.Lk)("tbody",null,[tl.value?((0,t.uX)(),(0,t.CE)("tr",K,e[25]||(e[25]=[(0,t.Lk)("td",{colspan:"6",class:"text-center py-4"},[(0,t.Lk)("div",{class:"spinner-border text-primary",role:"status"},[(0,t.Lk)("span",{class:"visually-hidden"},"Loading...")])],-1)]))):0===fl.value.length?((0,t.uX)(),(0,t.CE)("tr",M,e[26]||(e[26]=[(0,t.Lk)("td",{colspan:"6",class:"text-center py-4 text-muted"}," 没有找到匹配的医生 ",-1)]))):((0,t.uX)(!0),(0,t.CE)(t.FK,{key:2},(0,t.pI)(fl.value,l=>((0,t.uX)(),(0,t.CE)("tr",{key:l.id},[(0,t.Lk)("td",null,[(0,t.Lk)("div",W,[e[27]||(e[27]=(0,t.Lk)("div",{class:"avatar me-2"},[(0,t.Lk)("i",{class:"bi bi-person-circle fs-4 text-primary"})],-1)),(0,t.Lk)("strong",null,(0,n.v_)(l.name),1)])]),(0,t.Lk)("td",null,[(0,t.Lk)("span",X,(0,n.v_)(l.specialty),1)]),(0,t.Lk)("td",null,(0,n.v_)(l.hospital),1),(0,t.Lk)("td",null,[(0,t.Lk)("div",R,[(0,t.Lk)("div",I,[((0,t.uX)(),(0,t.CE)(t.FK,null,(0,t.pI)(5,e=>(0,t.Lk)("i",{key:e,class:(0,n.C4)(["bi",e<=Math.floor(l.rating)?"bi-star-fill text-warning":"bi-star text-muted"])},null,2)),64))]),(0,t.Lk)("span",F,(0,n.v_)(l.rating),1)])]),(0,t.Lk)("td",null,(0,n.v_)(l.experience),1),(0,t.Lk)("td",null,[(0,t.Lk)("div",V,[(0,t.Lk)("button",{class:"btn btn-outline-primary",onClick:e=>Wl(l)}," 查看 ",8,A),(0,t.Lk)("button",{class:"btn btn-primary",onClick:e=>Xl(l),disabled:!(0,i.R1)(a).isAuthenticated}," 预约 ",8,U)])])]))),128))])])]),hl.value>1?((0,t.uX)(),(0,t.CE)("nav",j,[(0,t.Lk)("ul",O,[(0,t.Lk)("li",{class:(0,n.C4)(["page-item",{disabled:1===cl.value}])},[(0,t.Lk)("button",{class:"page-link",onClick:e[9]||(e[9]=l=>_l(cl.value-1))},e[28]||(e[28]=[(0,t.Lk)("i",{class:"bi bi-chevron-left"},null,-1)]))],2),((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(Ml(),l=>((0,t.uX)(),(0,t.CE)("li",{key:l,class:(0,n.C4)(["page-item",{active:l===cl.value}])},[(0,t.Lk)("button",{class:"page-link",onClick:e=>_l(l)},(0,n.v_)(l),9,Q)],2))),128)),(0,t.Lk)("li",{class:(0,n.C4)(["page-item",{disabled:cl.value===hl.value}])},[(0,t.Lk)("button",{class:"page-link",onClick:e[10]||(e[10]=l=>_l(cl.value+1))},e[29]||(e[29]=[(0,t.Lk)("i",{class:"bi bi-chevron-right"},null,-1)]))],2)])])):(0,t.Q3)("",!0),(0,t.Lk)("div",S,[(0,t.Lk)("div",q," 显示 "+(0,n.v_)(ml.value+1)+"-"+(0,n.v_)(Math.min(gl.value,pl.value.length))+" 条， 共 "+(0,n.v_)(pl.value.length)+" 条记录 ",1),(0,t.Lk)("div",null,[(0,t.bo)((0,t.Lk)("select",{"onUpdate:modelValue":e[11]||(e[11]=l=>rl.value=l),class:"form-select form-select-sm",onChange:Kl},e[30]||(e[30]=[(0,t.Lk)("option",{value:"5"},"每页 5 条",-1),(0,t.Lk)("option",{value:"10"},"每页 10 条",-1),(0,t.Lk)("option",{value:"20"},"每页 20 条",-1),(0,t.Lk)("option",{value:"50"},"每页 50 条",-1)]),544),[[s.u1,rl.value]])])])])])])])]),(0,t.Lk)("div",{class:"modal fade",id:"doctorModal",tabindex:"-1",ref_key:"doctorModal",ref:dl},[(0,t.Lk)("div",D,[(0,t.Lk)("div",J,[e[38]||(e[38]=(0,t.Lk)("div",{class:"modal-header"},[(0,t.Lk)("h5",{class:"modal-title"},"医生详情"),(0,t.Lk)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal"})],-1)),vl.value?((0,t.uX)(),(0,t.CE)("div",N,[(0,t.Lk)("div",T,[e[31]||(e[31]=(0,t.Lk)("i",{class:"bi bi-person-circle fs-1 text-primary"},null,-1)),(0,t.Lk)("h4",null,(0,n.v_)(vl.value.name),1),(0,t.Lk)("span",z,(0,n.v_)(vl.value.specialty),1)]),(0,t.Lk)("div",B,[(0,t.Lk)("div",G,[e[32]||(e[32]=(0,t.Lk)("strong",null,"医院:",-1)),e[33]||(e[33]=(0,t.Lk)("br",null,null,-1)),(0,t.eW)(" "+(0,n.v_)(vl.value.hospital),1)]),(0,t.Lk)("div",H,[e[34]||(e[34]=(0,t.Lk)("strong",null,"经验:",-1)),e[35]||(e[35]=(0,t.Lk)("br",null,null,-1)),(0,t.eW)(" "+(0,n.v_)(vl.value.experience)+" 年 ",1)])]),(0,t.Lk)("div",P,[e[36]||(e[36]=(0,t.Lk)("strong",null,"评分:",-1)),(0,t.Lk)("div",Y,[(0,t.Lk)("div",Z,[((0,t.uX)(),(0,t.CE)(t.FK,null,(0,t.pI)(5,l=>(0,t.Lk)("i",{key:l,class:(0,n.C4)(["bi",l<=Math.floor(vl.value.rating)?"bi-star-fill text-warning":"bi-star text-muted"])},null,2)),64))]),(0,t.Lk)("span",$,(0,n.v_)(vl.value.rating),1)])])])):(0,t.Q3)("",!0),(0,t.Lk)("div",ll,[e[37]||(e[37]=(0,t.Lk)("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"},"关闭",-1)),(0,t.Lk)("button",{type:"button",class:"btn btn-primary",onClick:e[12]||(e[12]=l=>Xl(vl.value)),disabled:!(0,i.R1)(a).isAuthenticated}," 预约咨询 ",8,el)])])])],512)]))}};var tl=a(6262);const sl=(0,tl.A)(al,[["__scopeId","data-v-4d89290e"]]),nl=sl}}]);