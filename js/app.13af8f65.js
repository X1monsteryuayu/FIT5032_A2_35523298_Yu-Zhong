(()=>{"use strict";var e={3556:(e,t,a)=>{a.d(t,{db:()=>u,j2:()=>d});var s=a(223),i=a(7496),l=a(1884),n=a(4604),o=a(5904);const r={apiKey:"AIzaSyBVe5MCasOxhuTVAO5mTdRGaw2FBBgdc94",authDomain:"a3-yu-zhong.firebaseapp.com",projectId:"a3-yu-zhong",storageBucket:"a3-yu-zhong.firebasestorage.app",messagingSenderId:"739795054099",appId:"1:739795054099:web:1e84da0b5c35a8510019e6"},c=(0,s.Wp)(r),d=(0,i.xI)(c),u=(0,l.aU)(c);(0,n.Uz)(c),(0,o.c7)(c);d.languageCode="zh-CN",console.log("Firebase initialized with project:",r.projectId)},7254:(e,t,a)=>{a(8736);var s=a(3751),i=a(641),l=a(33),n=a(953);const o=a.p+"img/logo.4ce1668d.svg";var r=a(5220),c=a(7518);const d={class:"navbar navbar-expand-lg navbar-light bg-white shadow-sm",role:"navigation","aria-label":"主导航"},u={class:"container"},m=["aria-expanded"],h={class:"navbar-nav ms-auto",role:"menubar"},p={class:"nav-item",role:"none"},g={class:"nav-item",role:"none"},b={class:"nav-item",role:"none"},v={class:"nav-item",role:"none"},f={class:"nav-item",role:"none"},k={class:"nav-item",role:"none"},y={class:"nav-item"},L={class:"nav-item"},w={class:"nav-item"},C={__name:"NavBar",setup(e){const t=(0,r.rd)(),a=(0,c.n)(),s=(0,n.KR)(!1),C=()=>{s.value=!s.value},x=(0,i.EW)(()=>{const e=a.getIsAuthenticated;return console.log("导航栏 - 认证状态计算:",{isAuthenticated:e,user:a.user?.email,userObject:a.user}),e}),F=(0,i.EW)(()=>a.user?.displayName?a.user.displayName:a.user?.email?a.user.email.split("@")[0]:"User");(0,i.wB)(x,(e,t)=>{console.log("导航栏 - 认证状态变化:",{from:t,to:e})}),(0,i.sV)(async()=>{await a.initializeAuth(),console.log("导航栏 - 认证状态初始化完成:",{isAuthenticated:a.getIsAuthenticated,user:a.user?.email}),await(0,i.dY)(),window.bootstrap&&a.getIsAuthenticated&&console.log("Bootstrap dropdown 已准备好")});const _=async()=>{console.log("点击了Logout按钮");try{console.log("开始执行logout..."),await a.logout(),console.log("logout成功，准备跳转到登录页"),t.push("/login"),console.log("跳转命令已发送")}catch(e){console.error("Logout失败:",e),alert("退出登录失败: "+e.message)}};return(e,t)=>{const r=(0,i.g2)("router-link");return(0,i.uX)(),(0,i.CE)("nav",d,[(0,i.Lk)("div",u,[(0,i.bF)(r,{class:"navbar-brand d-flex align-items-center",to:"/","aria-label":"回到首页 - Healthy Pathway"},{default:(0,i.k6)(()=>t[0]||(t[0]=[(0,i.Lk)("img",{src:o,alt:"Healthy Pathway 标志",class:"nav-logo me-2"},null,-1),(0,i.Lk)("span",{class:"brand-text"},"Healthy Pathway",-1)])),_:1,__:[0]}),(0,i.Lk)("button",{class:"navbar-toggler",type:"button","data-bs-toggle":"collapse","data-bs-target":"#navbarNav","aria-controls":"navbarNav","aria-expanded":"false","aria-label":"展开或收起导航菜单",onClick:C},t[1]||(t[1]=[(0,i.Lk)("span",{class:"navbar-toggler-icon","aria-hidden":"true"},null,-1)]),8,m),(0,i.Lk)("div",{class:(0,l.C4)(["collapse navbar-collapse",{show:s.value}]),id:"navbarNav"},[(0,i.Lk)("ul",h,[(0,i.Lk)("li",p,[(0,i.bF)(r,{class:"nav-link",to:"/",role:"menuitem","aria-current":"page"},{default:(0,i.k6)(()=>t[2]||(t[2]=[(0,i.Lk)("i",{class:"fas fa-home me-1","aria-hidden":"true"},null,-1),(0,i.eW)(" 首页 ",-1)])),_:1,__:[2]})]),(0,i.Lk)("li",g,[(0,i.bF)(r,{class:"nav-link",to:"/health-articles",role:"menuitem"},{default:(0,i.k6)(()=>t[3]||(t[3]=[(0,i.Lk)("i",{class:"fas fa-newspaper me-1","aria-hidden":"true"},null,-1),(0,i.eW)(" 健康资讯 ",-1)])),_:1,__:[3]})]),(0,i.Lk)("li",b,[(0,i.bF)(r,{class:"nav-link",to:"/health-map",role:"menuitem"},{default:(0,i.k6)(()=>t[4]||(t[4]=[(0,i.Lk)("i",{class:"fas fa-map-marked-alt me-1","aria-hidden":"true"},null,-1),(0,i.eW)(" 健康地图 ",-1)])),_:1,__:[4]})]),(0,i.Lk)("li",v,[(0,i.bF)(r,{class:"nav-link",to:"/email-demo",role:"menuitem"},{default:(0,i.k6)(()=>t[5]||(t[5]=[(0,i.Lk)("i",{class:"fas fa-envelope me-1","aria-hidden":"true"},null,-1),(0,i.eW)(" 邮件演示 ",-1)])),_:1,__:[5]})]),x.value?(0,i.Q3)("",!0):((0,i.uX)(),(0,i.CE)(i.FK,{key:0},[(0,i.Lk)("li",f,[(0,i.bF)(r,{class:"nav-link",to:"/login",role:"menuitem"},{default:(0,i.k6)(()=>t[6]||(t[6]=[(0,i.Lk)("i",{class:"fas fa-sign-in-alt me-1","aria-hidden":"true"},null,-1),(0,i.eW)(" 登录 ",-1)])),_:1,__:[6]})]),(0,i.Lk)("li",k,[(0,i.bF)(r,{class:"nav-link btn btn-primary text-white ms-2 px-3",to:"/register",role:"menuitem"},{default:(0,i.k6)(()=>t[7]||(t[7]=[(0,i.Lk)("i",{class:"fas fa-user-plus me-1","aria-hidden":"true"},null,-1),(0,i.eW)(" 注册 ",-1)])),_:1,__:[7]})])],64)),(0,n.R1)(a).user?((0,i.uX)(),(0,i.CE)(i.FK,{key:1},[(0,i.Lk)("li",y,[(0,i.bF)(r,{class:"nav-link",to:"/doctor-rating"},{default:(0,i.k6)(()=>t[8]||(t[8]=[(0,i.eW)("Doctor Rating",-1)])),_:1,__:[8]})]),(0,i.Lk)("li",L,[(0,i.bF)(r,{class:"nav-link",to:"/consultation"},{default:(0,i.k6)(()=>t[9]||(t[9]=[(0,i.eW)("Consultation",-1)])),_:1,__:[9]})]),(0,i.Lk)("li",w,[(0,i.Lk)("button",{class:"btn btn-outline-danger btn-sm ms-2",onClick:_}," Logout ("+(0,l.v_)(F.value)+") ",1)])],64)):(0,i.Q3)("",!0)])],2)])])}}};var x=a(6262);const F=(0,x.A)(C,[["__scopeId","data-v-67e144a1"]]),_=F,P={class:"app-container"},A={class:"main-content container d-flex flex-column justify-content-center align-items-center text-center"},S={class:"footer mt-auto py-4 bg-white shadow-top"},E={class:"container"},M={class:"row"},R={class:"col-md-4 mb-3"},D={class:"list-unstyled"},I={__name:"App",setup(e){return(0,i.sV)(()=>{}),(e,t)=>{const a=(0,i.g2)("router-view"),s=(0,i.g2)("router-link");return(0,i.uX)(),(0,i.CE)("div",P,[(0,i.bF)(_),(0,i.Lk)("main",A,[(0,i.bF)(a)]),(0,i.Lk)("footer",S,[(0,i.Lk)("div",E,[(0,i.Lk)("div",M,[t[4]||(t[4]=(0,i.Lk)("div",{class:"col-md-4 mb-3"},[(0,i.Lk)("h5",null,"About Us"),(0,i.Lk)("p",null,"Healthy Pathway - Your trusted healthcare companion")],-1)),(0,i.Lk)("div",R,[t[3]||(t[3]=(0,i.Lk)("h5",null,"Quick Links",-1)),(0,i.Lk)("ul",D,[(0,i.Lk)("li",null,[(0,i.bF)(s,{to:"/"},{default:(0,i.k6)(()=>t[0]||(t[0]=[(0,i.eW)("Home",-1)])),_:1,__:[0]})]),(0,i.Lk)("li",null,[(0,i.bF)(s,{to:"/login"},{default:(0,i.k6)(()=>t[1]||(t[1]=[(0,i.eW)("Login",-1)])),_:1,__:[1]})]),(0,i.Lk)("li",null,[(0,i.bF)(s,{to:"/register"},{default:(0,i.k6)(()=>t[2]||(t[2]=[(0,i.eW)("Register",-1)])),_:1,__:[2]})])])]),t[5]||(t[5]=(0,i.Lk)("div",{class:"col-md-4"},[(0,i.Lk)("h5",null,"Contact"),(0,i.Lk)("p",null,"Email: support@healthypathway.com")],-1))])])])])}}},T=I,$=T,O={class:"d-flex justify-content-center align-items-center hero-section"},W={class:"text-center bg-secondary bg-opacity-75 text-white p-5 rounded-4",style:{"max-width":"min(90%, 600px)",margin:"0 auto","backdrop-filter":"blur(8px)"}},X={class:"d-flex justify-content-center gap-3"},U={class:"features-section"},N={class:"container"},V={class:"row g-4"},j={class:"col-12 col-md-4"},H={class:"feature-card"},q={class:"mt-3"},z={class:"col-12 col-md-4"},K={class:"feature-card"},B={class:"mt-3"},Q={class:"col-12 col-md-4"},G={class:"feature-card"},J={class:"mt-3"},Z={class:"row g-4 mt-4"},Y={class:"col-12 col-md-4"},ee={class:"feature-card"},te={class:"mt-3"},ae={class:"col-12 col-md-4"},se={class:"feature-card"},ie={class:"mt-3"},le={class:"col-12 col-md-4"},ne={class:"feature-card"},oe={class:"mt-3"},re={class:"contact-section"},ce={class:"container"},de={class:"row align-items-center"},ue={class:"col-md-6"},me={class:"contact-card"};function he(e,t,a,s,l,n){const o=(0,i.g2)("router-link");return(0,i.uX)(),(0,i.CE)("div",null,[(0,i.Lk)("div",O,[(0,i.Lk)("div",W,[t[2]||(t[2]=(0,i.Lk)("h1",{class:"fw-bold mb-4 display-4"},"Healthy Pathway",-1)),t[3]||(t[3]=(0,i.Lk)("p",{class:"lead mb-4"},[(0,i.eW)(" Empowering Migrant Communities Through"),(0,i.Lk)("br"),(0,i.eW)(" Healthcare & Support ")],-1)),(0,i.Lk)("div",X,[(0,i.bF)(o,{to:"/register",class:"btn btn-primary btn-lg"},{default:(0,i.k6)(()=>t[0]||(t[0]=[(0,i.eW)("Join Now",-1)])),_:1,__:[0]}),(0,i.bF)(o,{to:"/login",class:"btn btn-outline-light btn-lg"},{default:(0,i.k6)(()=>t[1]||(t[1]=[(0,i.eW)("Login",-1)])),_:1,__:[1]})])])]),(0,i.Lk)("section",U,[(0,i.Lk)("div",N,[t[34]||(t[34]=(0,i.Lk)("h2",{class:"section-title text-center mb-5"},"Our Services",-1)),(0,i.Lk)("div",V,[(0,i.Lk)("div",j,[(0,i.Lk)("div",H,[t[6]||(t[6]=(0,i.Lk)("div",{class:"feature-icon"},[(0,i.Lk)("i",{class:"bi bi-hospital"})],-1)),t[7]||(t[7]=(0,i.Lk)("h3",null,"Find a Doctor",-1)),t[8]||(t[8]=(0,i.Lk)("p",null,"Search for GPs who speak your language and accept new patients nearby",-1)),(0,i.Lk)("div",q,[(0,i.bF)(o,{to:"/doctor-rating",class:"btn btn-outline-primary"},{default:(0,i.k6)(()=>t[4]||(t[4]=[(0,i.eW)("View Doctors",-1)])),_:1,__:[4]}),t[5]||(t[5]=(0,i.Lk)("small",{class:"d-block mt-2 text-muted"},"Login required for ratings",-1))])])]),(0,i.Lk)("div",z,[(0,i.Lk)("div",K,[t[11]||(t[11]=(0,i.Lk)("div",{class:"feature-icon"},[(0,i.Lk)("i",{class:"bi bi-translate"})],-1)),t[12]||(t[12]=(0,i.Lk)("h3",null,"Multilingual Resources",-1)),t[13]||(t[13]=(0,i.Lk)("p",null,"Access translated health guides and vaccine information",-1)),(0,i.Lk)("div",B,[(0,i.bF)(o,{to:"/health-articles",class:"btn btn-outline-primary"},{default:(0,i.k6)(()=>t[9]||(t[9]=[(0,i.eW)("Read More",-1)])),_:1,__:[9]}),t[10]||(t[10]=(0,i.Lk)("small",{class:"d-block mt-2 text-muted"},"Browse health articles",-1))])])]),(0,i.Lk)("div",Q,[(0,i.Lk)("div",G,[t[16]||(t[16]=(0,i.Lk)("div",{class:"feature-icon"},[(0,i.Lk)("i",{class:"bi bi-chat-dots"})],-1)),t[17]||(t[17]=(0,i.Lk)("h3",null,"Health Consultation",-1)),t[18]||(t[18]=(0,i.Lk)("p",null,"Submit anonymous health questions and get professional answers",-1)),(0,i.Lk)("div",J,[(0,i.bF)(o,{to:"/consultation",class:"btn btn-outline-primary"},{default:(0,i.k6)(()=>t[14]||(t[14]=[(0,i.eW)("Get Started",-1)])),_:1,__:[14]}),t[15]||(t[15]=(0,i.Lk)("small",{class:"d-block mt-2 text-muted"},"Free preview available",-1))])])])]),(0,i.Lk)("div",Z,[(0,i.Lk)("div",Y,[(0,i.Lk)("div",ee,[t[21]||(t[21]=(0,i.Lk)("div",{class:"feature-icon"},[(0,i.Lk)("i",{class:"bi bi-geo-alt"})],-1)),t[22]||(t[22]=(0,i.Lk)("h3",null,"Health Facilities Map",-1)),t[23]||(t[23]=(0,i.Lk)("p",null,"Find nearby hospitals, clinics, and pharmacies with navigation",-1)),(0,i.Lk)("div",te,[(0,i.bF)(o,{to:"/health-map",class:"btn btn-outline-primary"},{default:(0,i.k6)(()=>t[19]||(t[19]=[(0,i.eW)("Explore Map",-1)])),_:1,__:[19]}),t[20]||(t[20]=(0,i.Lk)("small",{class:"d-block mt-2 text-muted"},"Location services included",-1))])])]),(0,i.Lk)("div",ae,[(0,i.Lk)("div",se,[t[26]||(t[26]=(0,i.Lk)("div",{class:"feature-icon"},[(0,i.Lk)("i",{class:"bi bi-envelope"})],-1)),t[27]||(t[27]=(0,i.Lk)("h3",null,"Contact Support",-1)),t[28]||(t[28]=(0,i.Lk)("p",null,"Send us your questions or feedback with file attachments",-1)),(0,i.Lk)("div",ie,[(0,i.bF)(o,{to:"/email-demo",class:"btn btn-outline-primary"},{default:(0,i.k6)(()=>t[24]||(t[24]=[(0,i.eW)("Contact Us",-1)])),_:1,__:[24]}),t[25]||(t[25]=(0,i.Lk)("small",{class:"d-block mt-2 text-muted"},"Quick response guaranteed",-1))])])]),(0,i.Lk)("div",le,[(0,i.Lk)("div",ne,[t[31]||(t[31]=(0,i.Lk)("div",{class:"feature-icon"},[(0,i.Lk)("i",{class:"bi bi-shield-check"})],-1)),t[32]||(t[32]=(0,i.Lk)("h3",null,"Safe & Secure",-1)),t[33]||(t[33]=(0,i.Lk)("p",null,"Your health information is protected with advanced security",-1)),(0,i.Lk)("div",oe,[(0,i.bF)(o,{to:"/register",class:"btn btn-outline-primary"},{default:(0,i.k6)(()=>t[29]||(t[29]=[(0,i.eW)("Join Safely",-1)])),_:1,__:[29]}),t[30]||(t[30]=(0,i.Lk)("small",{class:"d-block mt-2 text-muted"},"GDPR compliant",-1))])])])])])]),t[39]||(t[39]=(0,i.Fv)('<section class="mission-section" data-v-bafa5ed4><div class="container" data-v-bafa5ed4><div class="row align-items-center" data-v-bafa5ed4><div class="col-md-6" data-v-bafa5ed4><h2 class="section-title" data-v-bafa5ed4>Our Mission</h2><p class="mission-text" data-v-bafa5ed4> We ensure equitable healthcare access for migrants through multilingual resources, culturally appropriate support, and community-driven education. We are committed to: </p><ul class="mission-list" data-v-bafa5ed4><li data-v-bafa5ed4><i class="bi bi-check-circle-fill" data-v-bafa5ed4></i> Eliminating Language Barriers</li><li data-v-bafa5ed4><i class="bi bi-check-circle-fill" data-v-bafa5ed4></i> Providing Culturally Sensitive Care</li><li data-v-bafa5ed4><i class="bi bi-check-circle-fill" data-v-bafa5ed4></i> Building Supportive Communities</li></ul></div><div class="col-md-6" data-v-bafa5ed4><div class="mission-image" data-v-bafa5ed4><img src="https://images.unsplash.com/photo-1576091160550-2173dba999ef?fit=crop&amp;w=800" alt="Healthcare Services" class="img-fluid rounded-3 shadow" data-v-bafa5ed4></div></div></div></div></section><section class="stats-section text-center" data-v-bafa5ed4><div class="container" data-v-bafa5ed4><div class="row g-4" data-v-bafa5ed4><div class="col-6 col-md-3" data-v-bafa5ed4><div class="stat-card" data-v-bafa5ed4><h3 class="stat-number" data-v-bafa5ed4>5000+</h3><p class="stat-label" data-v-bafa5ed4>Registered Users</p></div></div><div class="col-6 col-md-3" data-v-bafa5ed4><div class="stat-card" data-v-bafa5ed4><h3 class="stat-number" data-v-bafa5ed4>100+</h3><p class="stat-label" data-v-bafa5ed4>Partner Doctors</p></div></div><div class="col-6 col-md-3" data-v-bafa5ed4><div class="stat-card" data-v-bafa5ed4><h3 class="stat-number" data-v-bafa5ed4>10+</h3><p class="stat-label" data-v-bafa5ed4>Languages</p></div></div><div class="col-6 col-md-3" data-v-bafa5ed4><div class="stat-card" data-v-bafa5ed4><h3 class="stat-number" data-v-bafa5ed4>98%</h3><p class="stat-label" data-v-bafa5ed4>User Satisfaction</p></div></div></div></div></section>',2)),(0,i.Lk)("section",re,[(0,i.Lk)("div",ce,[(0,i.Lk)("div",de,[t[38]||(t[38]=(0,i.Fv)('<div class="col-md-6" data-v-bafa5ed4><h2 class="section-title" data-v-bafa5ed4>Get in Touch</h2><p class="contact-text" data-v-bafa5ed4> Have questions about our services? Need help with an appointment? We&#39;re here to help! Send us a message and we&#39;ll get back to you as soon as possible. </p><div class="contact-info" data-v-bafa5ed4><div class="contact-item" data-v-bafa5ed4><i class="bi bi-envelope-fill text-primary" data-v-bafa5ed4></i><span data-v-bafa5ed4>info@healthypathway.com</span></div><div class="contact-item" data-v-bafa5ed4><i class="bi bi-telephone-fill text-primary" data-v-bafa5ed4></i><span data-v-bafa5ed4>+1 (555) 123-4567</span></div><div class="contact-item" data-v-bafa5ed4><i class="bi bi-clock-fill text-primary" data-v-bafa5ed4></i><span data-v-bafa5ed4>Mon-Fri: 8:00 AM - 6:00 PM</span></div></div></div>',1)),(0,i.Lk)("div",ue,[(0,i.Lk)("div",me,[t[36]||(t[36]=(0,i.Lk)("h5",{class:"mb-4"},"Send us a Message",-1)),(0,i.bF)(o,{to:"/contact",class:"btn btn-primary btn-lg"},{default:(0,i.k6)(()=>t[35]||(t[35]=[(0,i.Lk)("i",{class:"bi bi-chat-dots me-2"},null,-1),(0,i.eW)(" Contact Us ",-1)])),_:1,__:[35]}),t[37]||(t[37]=(0,i.Lk)("p",{class:"mt-3 text-muted"},[(0,i.Lk)("small",null,"Get email confirmations with PDF attachments for appointments")],-1))])])])])])])}const pe={name:"Home"},ge=(0,x.A)(pe,[["render",he],["__scopeId","data-v-bafa5ed4"]]),be=ge,ve={class:"login-page",role:"main"},fe={class:"login-container"},ke={key:0,class:"alert alert-danger",role:"alert","aria-live":"polite"},ye={class:"form-group mb-3"},Le=["disabled"],we={class:"form-group mb-4"},Ce=["disabled"],xe=["disabled","aria-busy"],Fe={key:0,class:"spinner-border spinner-border-sm me-2",role:"status","aria-hidden":"true"},_e={id:"login-status",class:"visually-hidden","aria-live":"polite"},Pe={class:"text-center"};function Ae(e,t,a,n,o,r){const c=(0,i.g2)("router-link");return(0,i.uX)(),(0,i.CE)("div",ve,[(0,i.Lk)("div",fe,[t[10]||(t[10]=(0,i.Lk)("h1",{class:"text-center mb-4 visually-accessible-heading"},"欢迎回来",-1)),(0,i.Lk)("form",{onSubmit:t[2]||(t[2]=(0,s.D$)((...e)=>r.handleLogin&&r.handleLogin(...e),["prevent"])),class:"login-form",role:"form","aria-labelledby":"login-heading"},[n.authStore.error?((0,i.uX)(),(0,i.CE)("div",ke,[t[3]||(t[3]=(0,i.Lk)("i",{class:"fas fa-exclamation-triangle","aria-hidden":"true"},null,-1)),(0,i.eW)(" "+(0,l.v_)(n.authStore.error),1)])):(0,i.Q3)("",!0),(0,i.Lk)("div",ye,[t[4]||(t[4]=(0,i.Lk)("label",{for:"email",class:"form-label required-field"},[(0,i.Lk)("i",{class:"fas fa-envelope","aria-hidden":"true"}),(0,i.eW)(" 邮箱地址 "),(0,i.Lk)("span",{class:"required-asterisk","aria-label":"必填项"},"*")],-1)),(0,i.bo)((0,i.Lk)("input",{id:"email","onUpdate:modelValue":t[0]||(t[0]=e=>o.email=e),type:"email",class:"form-control",placeholder:"请输入您的邮箱地址",required:"",disabled:n.authStore.loading,"aria-describedby":"email-help","aria-invalid":"false",autocomplete:"email"},null,8,Le),[[s.Jo,o.email]]),t[5]||(t[5]=(0,i.Lk)("small",{id:"email-help",class:"form-text text-muted"}," 用于登录的邮箱地址 ",-1))]),(0,i.Lk)("div",we,[t[6]||(t[6]=(0,i.Lk)("label",{for:"password",class:"form-label required-field"},[(0,i.Lk)("i",{class:"fas fa-lock","aria-hidden":"true"}),(0,i.eW)(" 密码 "),(0,i.Lk)("span",{class:"required-asterisk","aria-label":"必填项"},"*")],-1)),(0,i.bo)((0,i.Lk)("input",{id:"password","onUpdate:modelValue":t[1]||(t[1]=e=>o.password=e),type:"password",class:"form-control",placeholder:"请输入您的密码",required:"",disabled:n.authStore.loading,"aria-describedby":"password-help","aria-invalid":"false",autocomplete:"current-password"},null,8,Ce),[[s.Jo,o.password]]),t[7]||(t[7]=(0,i.Lk)("small",{id:"password-help",class:"form-text text-muted"}," 至少8位字符的密码 ",-1))]),(0,i.Lk)("button",{type:"submit",class:"btn btn-primary w-100 mb-3",disabled:n.authStore.loading,"aria-busy":n.authStore.loading,"aria-describedby":"login-status"},[n.authStore.loading?((0,i.uX)(),(0,i.CE)("span",Fe)):(0,i.Q3)("",!0),(0,i.eW)(" "+(0,l.v_)(n.authStore.loading?"正在登录...":"登录"),1)],8,xe),(0,i.Lk)("div",_e,(0,l.v_)(n.authStore.loading?"正在处理登录请求，请稍候":""),1),(0,i.Lk)("p",Pe,[t[9]||(t[9]=(0,i.eW)(" 还没有账户？ ",-1)),(0,i.bF)(c,{to:"/register","aria-label":"前往注册页面"},{default:(0,i.k6)(()=>t[8]||(t[8]=[(0,i.eW)("立即注册",-1)])),_:1,__:[8]})])],32)])])}const Se={setup(){const e=(0,r.rd)(),t=(0,r.lq)(),a=(0,c.n)();return{router:e,route:t,authStore:a}},data(){return{email:"",password:""}},methods:{async handleLogin(){if(this.email&&this.password){console.log("尝试Firebase登录:",this.email);try{const e=await this.authStore.login(this.email,this.password);console.log("Firebase登录成功，用户:",e);const t=this.$route.query.redirect||"/dashboard";console.log("准备重定向到:",t),await this.$router.push(t),console.log("重定向完成")}catch(e){console.error("登录失败:",e),alert("登录失败，请检查您的邮箱和密码")}}else alert("请输入邮箱和密码")}}},Ee=(0,x.A)(Se,[["render",Ae],["__scopeId","data-v-e80be6c2"]]),Me=Ee;var Re=a(7496),De=a(1884),Ie=a(3556);const Te={class:"container mt-5"},$e={key:0,class:"alert alert-danger"},Oe={class:"mb-3"},We={key:0,class:"text-danger"},Xe={class:"mb-3"},Ue={key:0,class:"text-danger"},Ne={class:"mb-3"},Ve=["type"],je={class:"progress"},He={class:"form-check mt-1"},qe={key:0,class:"text-danger"},ze={class:"mb-3"},Ke=["type"],Be={class:"form-check mt-1"},Qe={key:0,class:"text-danger"},Ge={class:"mb-3"},Je={key:0,class:"text-danger"},Ze={class:"mb-3"},Ye={class:"mb-3"},et=["disabled"],tt={__name:"Register",setup(e){const t=(0,r.rd)(),a=(0,c.n)(),o=(0,n.KR)(""),d=(0,n.KR)(""),u=(0,n.KR)(""),m=(0,n.KR)(""),h=(0,n.KR)(""),p=(0,n.KR)(""),g=(0,n.KR)(""),b=(0,n.KR)(!1),v=(0,n.KR)(!1),f=e=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e),k=e=>/[A-Z]/.test(e)&&/[a-z]/.test(e)&&/[0-9]/.test(e)&&e.length>=8,y=(0,i.EW)(()=>{let e=0;return u.value.length>=8&&(e+=25),/[A-Z]/.test(u.value)&&(e+=25),/[a-z]/.test(u.value)&&(e+=25),/[0-9]/.test(u.value)&&(e+=25),e}),L=(0,i.EW)(()=>{const e=y.value;return e<=25?"Weak":e<=50?"Medium":e<=75?"Strong":"Very Strong"}),w=(0,i.EW)(()=>{const e=y.value;return e<=25?"bg-danger":e<=50?"bg-warning":e<=75?"bg-info":"bg-success"}),C=async()=>{if(!o.value||o.value.length<3)alert("请输入有效的姓名（至少3个字符）");else if(f(d.value))if(k(u.value))if(u.value===m.value)if(h.value<1||h.value>100)alert("年龄必须在1到100岁之间");else if(p.value)try{const e=await a.register(d.value,u.value),s=e;await(0,Re.r7)(s,{displayName:o.value}),await(0,De.BN)((0,De.H9)(Ie.db,"users",s.uid),{name:o.value,email:d.value,age:parseInt(h.value),role:p.value,language:g.value||"en",registeredAt:(new Date).toISOString()}),alert("注册成功！"),t.push("/dashboard")}catch(e){console.error("Registration failed:",e)}else alert("请选择用户角色");else alert("两次输入的密码不一致");else alert("密码强度不够，请确保包含大小写字母和数字，且长度至少为8位");else alert("请输入有效的邮箱地址")};return(e,t)=>((0,i.uX)(),(0,i.CE)("div",Te,[t[19]||(t[19]=(0,i.Lk)("h2",{class:"mb-4"},"Register for Healthy Pathway",-1)),(0,i.Lk)("form",{onSubmit:(0,s.D$)(C,["prevent"])},[(0,n.R1)(a).error?((0,i.uX)(),(0,i.CE)("div",$e,(0,l.v_)((0,n.R1)(a).error),1)):(0,i.Q3)("",!0),(0,i.Lk)("div",Oe,[t[9]||(t[9]=(0,i.Lk)("label",{for:"name",class:"form-label"},"Full Name",-1)),(0,i.bo)((0,i.Lk)("input",{type:"text",id:"name",class:"form-control","onUpdate:modelValue":t[0]||(t[0]=e=>o.value=e),required:""},null,512),[[s.Jo,o.value]]),o.value.length>0&&o.value.length<3?((0,i.uX)(),(0,i.CE)("div",We,"Name must be at least 3 characters")):(0,i.Q3)("",!0)]),(0,i.Lk)("div",Xe,[t[10]||(t[10]=(0,i.Lk)("label",{for:"email",class:"form-label"},"Email",-1)),(0,i.bo)((0,i.Lk)("input",{type:"email",id:"email",class:"form-control","onUpdate:modelValue":t[1]||(t[1]=e=>d.value=e),required:""},null,512),[[s.Jo,d.value]]),d.value&&!f(d.value)?((0,i.uX)(),(0,i.CE)("div",Ue,"Please enter a valid email address")):(0,i.Q3)("",!0)]),(0,i.Lk)("div",Ne,[t[12]||(t[12]=(0,i.Lk)("label",{for:"password",class:"form-label"},"Password",-1)),(0,i.bo)((0,i.Lk)("input",{type:b.value?"text":"password",id:"password",class:"form-control","onUpdate:modelValue":t[2]||(t[2]=e=>u.value=e),required:""},null,8,Ve),[[s.hp,u.value]]),(0,i.Lk)("div",je,[(0,i.Lk)("div",{class:(0,l.C4)(["progress-bar",w.value]),role:"progressbar",style:(0,l.Tr)({width:y.value+"%"})},(0,l.v_)(L.value),7)]),(0,i.Lk)("div",He,[(0,i.bo)((0,i.Lk)("input",{class:"form-check-input",type:"checkbox",id:"showPassword","onUpdate:modelValue":t[3]||(t[3]=e=>b.value=e)},null,512),[[s.lH,b.value]]),t[11]||(t[11]=(0,i.Lk)("label",{class:"form-check-label",for:"showPassword"},"Show Password",-1))]),u.value&&!k(u.value)?((0,i.uX)(),(0,i.CE)("div",qe," Password must contain uppercase, lowercase, number, and be at least 8 characters ")):(0,i.Q3)("",!0)]),(0,i.Lk)("div",ze,[t[14]||(t[14]=(0,i.Lk)("label",{for:"confirmPassword",class:"form-label"},"Confirm Password",-1)),(0,i.bo)((0,i.Lk)("input",{type:v.value?"text":"password",id:"confirmPassword",class:"form-control","onUpdate:modelValue":t[4]||(t[4]=e=>m.value=e),required:""},null,8,Ke),[[s.hp,m.value]]),(0,i.Lk)("div",Be,[(0,i.bo)((0,i.Lk)("input",{class:"form-check-input",type:"checkbox",id:"showConfirm","onUpdate:modelValue":t[5]||(t[5]=e=>v.value=e)},null,512),[[s.lH,v.value]]),t[13]||(t[13]=(0,i.Lk)("label",{class:"form-check-label",for:"showConfirm"},"Show",-1))]),m.value&&m.value!==u.value?((0,i.uX)(),(0,i.CE)("div",Qe,"Passwords do not match")):(0,i.Q3)("",!0)]),(0,i.Lk)("div",Ge,[t[15]||(t[15]=(0,i.Lk)("label",{for:"age",class:"form-label"},"Age",-1)),(0,i.bo)((0,i.Lk)("input",{type:"number",id:"age",class:"form-control","onUpdate:modelValue":t[6]||(t[6]=e=>h.value=e),required:""},null,512),[[s.Jo,h.value]]),h.value&&(h.value<1||h.value>100)?((0,i.uX)(),(0,i.CE)("div",Je,"Age must be between 1 and 100")):(0,i.Q3)("",!0)]),(0,i.Lk)("div",Ze,[t[17]||(t[17]=(0,i.Lk)("label",{for:"role",class:"form-label"},"Role",-1)),(0,i.bo)((0,i.Lk)("select",{id:"role",class:"form-select","onUpdate:modelValue":t[7]||(t[7]=e=>p.value=e),required:""},t[16]||(t[16]=[(0,i.Lk)("option",{value:""},"Select role",-1),(0,i.Lk)("option",{value:"user"},"User",-1),(0,i.Lk)("option",{value:"admin"},"Admin",-1)]),512),[[s.u1,p.value]])]),(0,i.Lk)("div",Ye,[t[18]||(t[18]=(0,i.Lk)("label",{for:"language",class:"form-label"},"Preferred Language (Optional)",-1)),(0,i.bo)((0,i.Lk)("input",{type:"text",id:"language",class:"form-control","onUpdate:modelValue":t[8]||(t[8]=e=>g.value=e)},null,512),[[s.Jo,g.value]])]),(0,i.Lk)("button",{class:"btn btn-primary",type:"submit",disabled:(0,n.R1)(a).loading},(0,l.v_)((0,n.R1)(a).loading?"Registering...":"Register"),9,et)],32)]))}},at=(0,x.A)(tt,[["__scopeId","data-v-09841d09"]]),st=at,it={class:"dashboard"},lt={class:"container py-5"},nt={class:"row g-4"},ot={class:"col-md-6 col-lg-3"},rt={class:"col-md-6 col-lg-3"},ct={class:"col-md-6 col-lg-3"},dt={class:"col-md-6 col-lg-3"},ut={class:"row g-4 mt-4"},mt={class:"col-md-6 col-lg-3"},ht={key:0,class:"mt-5"},pt={class:"card admin-card"},gt={class:"card-body"},bt={class:"row mt-4"},vt={class:"col-md-6"},ft={class:"col-md-6"};function kt(e,t,a,s,l,n){const o=(0,i.g2)("router-link");return(0,i.uX)(),(0,i.CE)("div",it,[(0,i.Lk)("div",lt,[t[8]||(t[8]=(0,i.Lk)("h1",{class:"text-center mb-5"},"Welcome to HealthyPathway",-1)),(0,i.Lk)("div",nt,[(0,i.Lk)("div",ot,[(0,i.bF)(o,{to:"/doctor-rating",class:"text-decoration-none"},{default:(0,i.k6)(()=>t[0]||(t[0]=[(0,i.Lk)("div",{class:"card h-100 feature-card"},[(0,i.Lk)("div",{class:"card-body text-center"},[(0,i.Lk)("i",{class:"bi bi-person-badge fs-1 mb-3"}),(0,i.Lk)("h3",{class:"card-title"},"Find a Doctor"),(0,i.Lk)("p",{class:"card-text"},"Search for GPs who speak your language and accept new patients")])],-1)])),_:1,__:[0]})]),(0,i.Lk)("div",rt,[(0,i.bF)(o,{to:"/health-articles",class:"text-decoration-none"},{default:(0,i.k6)(()=>t[1]||(t[1]=[(0,i.Lk)("div",{class:"card h-100 feature-card"},[(0,i.Lk)("div",{class:"card-body text-center"},[(0,i.Lk)("i",{class:"bi bi-translate fs-1 mb-3"}),(0,i.Lk)("h3",{class:"card-title"},"Multilingual Resources"),(0,i.Lk)("p",{class:"card-text"},"Access health information in multiple languages")])],-1)])),_:1,__:[1]})]),(0,i.Lk)("div",ct,[(0,i.bF)(o,{to:"/consultation",class:"text-decoration-none"},{default:(0,i.k6)(()=>t[2]||(t[2]=[(0,i.Lk)("div",{class:"card h-100 feature-card"},[(0,i.Lk)("div",{class:"card-body text-center"},[(0,i.Lk)("i",{class:"bi bi-chat-dots fs-1 mb-3"}),(0,i.Lk)("h3",{class:"card-title"},"Health Consultation"),(0,i.Lk)("p",{class:"card-text"},"Get professional health advice and consultation")])],-1)])),_:1,__:[2]})]),(0,i.Lk)("div",dt,[(0,i.bF)(o,{to:"/health-map",class:"text-decoration-none"},{default:(0,i.k6)(()=>t[3]||(t[3]=[(0,i.Lk)("div",{class:"card h-100 feature-card"},[(0,i.Lk)("div",{class:"card-body text-center"},[(0,i.Lk)("i",{class:"bi bi-geo-alt fs-1 mb-3"}),(0,i.Lk)("h3",{class:"card-title"},"Health Facilities Map"),(0,i.Lk)("p",{class:"card-text"},"Find nearby medical facilities with navigation")])],-1)])),_:1,__:[3]})])]),(0,i.Lk)("div",ut,[(0,i.Lk)("div",mt,[(0,i.bF)(o,{to:"/home",class:"text-decoration-none"},{default:(0,i.k6)(()=>t[4]||(t[4]=[(0,i.Lk)("div",{class:"card h-100 feature-card"},[(0,i.Lk)("div",{class:"card-body text-center"},[(0,i.Lk)("i",{class:"bi bi-house fs-1 mb-3"}),(0,i.Lk)("h3",{class:"card-title"},"Home"),(0,i.Lk)("p",{class:"card-text"},"Return to homepage and explore more features")])],-1)])),_:1,__:[4]})])]),"admin"===l.userRole?((0,i.uX)(),(0,i.CE)("div",ht,[(0,i.Lk)("div",pt,[(0,i.Lk)("div",gt,[t[7]||(t[7]=(0,i.Lk)("h3",{class:"card-title"},[(0,i.Lk)("i",{class:"bi bi-shield-lock me-2"}),(0,i.eW)(" Admin Controls ")],-1)),(0,i.Lk)("div",bt,[(0,i.Lk)("div",vt,[(0,i.bF)(o,{to:"/admin/resources",class:"btn btn-primary w-100 mb-3"},{default:(0,i.k6)(()=>t[5]||(t[5]=[(0,i.eW)(" Manage Resources ",-1)])),_:1,__:[5]})]),(0,i.Lk)("div",ft,[(0,i.bF)(o,{to:"/admin/ratings",class:"btn btn-primary w-100 mb-3"},{default:(0,i.k6)(()=>t[6]||(t[6]=[(0,i.eW)(" View Ratings Overview ",-1)])),_:1,__:[6]})])])])])])):(0,i.Q3)("",!0)])])}const yt={data(){return{userRole:""}},mounted(){const e=JSON.parse(localStorage.getItem("userInfo"));e&&e.role?this.userRole=e.role:this.$router.push("/login")}},Lt=(0,x.A)(yt,[["render",kt],["__scopeId","data-v-6cc07fc5"]]),wt=Lt,Ct={class:"health-articles"},xt={class:"container-fluid"},Ft={class:"nav nav-tabs mb-4",role:"tablist"},_t={class:"nav-item",role:"presentation"},Pt={class:"nav-item",role:"presentation"},At={class:"tab-content"},St={class:"tab-pane fade show active",id:"articles",role:"tabpanel"},Et={class:"card"},Mt={class:"card-header d-flex justify-content-between align-items-center"},Rt={class:"btn-group"},Dt={class:"card-body pb-0"},It={class:"row g-3 mb-3"},Tt={class:"col-md-3"},$t={class:"col-md-2"},Ot={class:"col-md-2"},Wt=["value"],Xt={class:"col-md-2"},Ut={class:"col-md-2"},Nt={class:"col-md-1 d-flex align-items-end"},Vt={class:"table-responsive"},jt={class:"table table-hover mb-0"},Ht={class:"fw-bold"},qt={class:"text-muted"},zt={class:"badge bg-primary"},Kt={class:"badge bg-info"},Bt={class:"card-footer d-flex justify-content-between align-items-center"},Qt={class:"text-muted"},Gt={class:"pagination pagination-sm mb-0"},Jt=["disabled"],Zt=["disabled"],Yt=["onClick"],ea=["disabled"],ta=["disabled"],aa={class:"tab-pane fade",id:"comments",role:"tabpanel"},sa={class:"card"},ia={class:"card-header d-flex justify-content-between align-items-center"},la={class:"btn-group"},na={class:"card-body pb-0"},oa={class:"row g-3 mb-3"},ra={class:"col-md-3"},ca={class:"col-md-4"},da={class:"col-md-2"},ua={class:"col-md-2"},ma={class:"col-md-1 d-flex align-items-end"},ha={class:"table-responsive"},pa={class:"table table-hover mb-0"},ga={class:"d-flex align-items-center"},ba=["src"],va={class:"fw-bold"},fa={class:"text-muted"},ka={class:"text-muted"},ya={class:"badge bg-warning"},La={class:"btn-group btn-group-sm"},wa=["onClick"],Ca=["onClick"],xa={class:"card-footer d-flex justify-content-between align-items-center"},Fa={class:"text-muted"},_a={class:"pagination pagination-sm mb-0"},Pa=["disabled"],Aa=["disabled"],Sa=["onClick"],Ea=["disabled"],Ma=["disabled"];function Ra(e,t,a,n,o,r){return(0,i.uX)(),(0,i.CE)("div",Ct,[(0,i.Lk)("div",xt,[t[54]||(t[54]=(0,i.Lk)("h1",{class:"text-center mb-4"},"Health Articles Management System",-1)),(0,i.Lk)("ul",Ft,[(0,i.Lk)("li",_t,[(0,i.Lk)("button",{class:"nav-link active",id:"articles-tab","data-bs-toggle":"tab","data-bs-target":"#articles",type:"button",role:"tab",onClick:t[0]||(t[0]=e=>o.currentTab="articles")},[t[25]||(t[25]=(0,i.Lk)("i",{class:"fas fa-newspaper me-2"},null,-1)),(0,i.eW)(" Articles Management ("+(0,l.v_)(r.filteredArticles.length)+") ",1)])]),(0,i.Lk)("li",Pt,[(0,i.Lk)("button",{class:"nav-link",id:"comments-tab","data-bs-toggle":"tab","data-bs-target":"#comments",type:"button",role:"tab",onClick:t[1]||(t[1]=e=>o.currentTab="comments")},[t[26]||(t[26]=(0,i.Lk)("i",{class:"fas fa-comments me-2"},null,-1)),(0,i.eW)(" Comments Management ("+(0,l.v_)(r.filteredComments.length)+") ",1)])])]),(0,i.Lk)("div",At,[(0,i.Lk)("div",St,[(0,i.Lk)("div",Et,[(0,i.Lk)("div",Mt,[t[29]||(t[29]=(0,i.Lk)("h5",{class:"mb-0"},"Articles List",-1)),(0,i.Lk)("div",Rt,[(0,i.Lk)("button",{class:"btn btn-success btn-sm",onClick:t[2]||(t[2]=(...e)=>r.exportArticlesCSV&&r.exportArticlesCSV(...e))},t[27]||(t[27]=[(0,i.Lk)("i",{class:"fas fa-file-csv me-1"},null,-1),(0,i.eW)("Export CSV ",-1)])),(0,i.Lk)("button",{class:"btn btn-danger btn-sm",onClick:t[3]||(t[3]=(...e)=>r.exportArticlesPDF&&r.exportArticlesPDF(...e))},t[28]||(t[28]=[(0,i.Lk)("i",{class:"fas fa-file-pdf me-1"},null,-1),(0,i.eW)("Export PDF ",-1)]))])]),(0,i.Lk)("div",Dt,[(0,i.Lk)("div",It,[(0,i.Lk)("div",Tt,[t[30]||(t[30]=(0,i.Lk)("label",{class:"form-label small"},"Search by Title",-1)),(0,i.bo)((0,i.Lk)("input",{type:"text",class:"form-control form-control-sm","onUpdate:modelValue":t[4]||(t[4]=e=>o.articleFilters.title=e),placeholder:"Search title..."},null,512),[[s.Jo,o.articleFilters.title]])]),(0,i.Lk)("div",$t,[t[31]||(t[31]=(0,i.Lk)("label",{class:"form-label small"},"Search by Author",-1)),(0,i.bo)((0,i.Lk)("input",{type:"text",class:"form-control form-control-sm","onUpdate:modelValue":t[5]||(t[5]=e=>o.articleFilters.author=e),placeholder:"Search author..."},null,512),[[s.Jo,o.articleFilters.author]])]),(0,i.Lk)("div",Ot,[t[33]||(t[33]=(0,i.Lk)("label",{class:"form-label small"},"Filter by Category",-1)),(0,i.bo)((0,i.Lk)("select",{class:"form-select form-select-sm","onUpdate:modelValue":t[6]||(t[6]=e=>o.articleFilters.category=e)},[t[32]||(t[32]=(0,i.Lk)("option",{value:""},"All Categories",-1)),((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(r.categories,e=>((0,i.uX)(),(0,i.CE)("option",{key:e,value:e},(0,l.v_)(e),9,Wt))),128))],512),[[s.u1,o.articleFilters.category]])]),(0,i.Lk)("div",Xt,[t[35]||(t[35]=(0,i.Lk)("label",{class:"form-label small"},"Sort By",-1)),(0,i.bo)((0,i.Lk)("select",{class:"form-select form-select-sm","onUpdate:modelValue":t[7]||(t[7]=e=>o.articleSortBy=e)},t[34]||(t[34]=[(0,i.Fv)('<option value="date_desc" data-v-03007e8c>Date ↓</option><option value="date_asc" data-v-03007e8c>Date ↑</option><option value="views_desc" data-v-03007e8c>Views ↓</option><option value="views_asc" data-v-03007e8c>Views ↑</option><option value="title_asc" data-v-03007e8c>Title A-Z</option><option value="title_desc" data-v-03007e8c>Title Z-A</option>',6)]),512),[[s.u1,o.articleSortBy]])]),(0,i.Lk)("div",Ut,[t[37]||(t[37]=(0,i.Lk)("label",{class:"form-label small"},"Per Page",-1)),(0,i.bo)((0,i.Lk)("select",{class:"form-select form-select-sm","onUpdate:modelValue":t[8]||(t[8]=e=>o.articlesPerPage=e)},t[36]||(t[36]=[(0,i.Lk)("option",{value:"10"},"10 per page",-1),(0,i.Lk)("option",{value:"20"},"20 per page",-1),(0,i.Lk)("option",{value:"50"},"50 per page",-1)]),512),[[s.u1,o.articlesPerPage]])]),(0,i.Lk)("div",Nt,[(0,i.Lk)("button",{class:"btn btn-outline-secondary btn-sm",onClick:t[9]||(t[9]=(...e)=>r.clearArticleFilters&&r.clearArticleFilters(...e))},t[38]||(t[38]=[(0,i.Lk)("i",{class:"fas fa-times"},null,-1)]))])])]),(0,i.Lk)("div",Vt,[(0,i.Lk)("table",jt,[t[39]||(t[39]=(0,i.Lk)("thead",{class:"table-light"},[(0,i.Lk)("tr",null,[(0,i.Lk)("th",{style:{width:"40%"}},"Title"),(0,i.Lk)("th",{style:{width:"15%"}},"Author"),(0,i.Lk)("th",{style:{width:"10%"}},"Category"),(0,i.Lk)("th",{style:{width:"12%"}},"Published Date"),(0,i.Lk)("th",{style:{width:"8%"}},"Views"),(0,i.Lk)("th",{style:{width:"15%"}},"Tags")])],-1)),(0,i.Lk)("tbody",null,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(r.paginatedArticles,e=>((0,i.uX)(),(0,i.CE)("tr",{key:e.id},[(0,i.Lk)("td",null,[(0,i.Lk)("div",Ht,(0,l.v_)(e.title),1),(0,i.Lk)("small",qt,(0,l.v_)(r.truncateText(e.summary,60)),1)]),(0,i.Lk)("td",null,(0,l.v_)(e.author),1),(0,i.Lk)("td",null,[(0,i.Lk)("span",zt,(0,l.v_)(e.category),1)]),(0,i.Lk)("td",null,(0,l.v_)(r.formatDate(e.date)),1),(0,i.Lk)("td",null,[(0,i.Lk)("span",Kt,(0,l.v_)(e.views.toLocaleString()),1)]),(0,i.Lk)("td",null,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(e.tags,e=>((0,i.uX)(),(0,i.CE)("span",{key:e,class:"badge bg-secondary me-1"},(0,l.v_)(e),1))),128))])]))),128))])])]),(0,i.Lk)("div",Bt,[(0,i.Lk)("span",Qt," Showing "+(0,l.v_)((o.currentArticlePage-1)*o.articlesPerPage+1)+" - "+(0,l.v_)(Math.min(o.currentArticlePage*o.articlesPerPage,r.filteredArticles.length))+" of "+(0,l.v_)(r.filteredArticles.length)+" entries ",1),(0,i.Lk)("nav",null,[(0,i.Lk)("ul",Gt,[(0,i.Lk)("li",{class:(0,l.C4)(["page-item",{disabled:1===o.currentArticlePage}])},[(0,i.Lk)("button",{class:"page-link",onClick:t[10]||(t[10]=e=>o.currentArticlePage=1),disabled:1===o.currentArticlePage}," First ",8,Jt)],2),(0,i.Lk)("li",{class:(0,l.C4)(["page-item",{disabled:1===o.currentArticlePage}])},[(0,i.Lk)("button",{class:"page-link",onClick:t[11]||(t[11]=e=>o.currentArticlePage--),disabled:1===o.currentArticlePage}," Previous ",8,Zt)],2),((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(r.articlePageNumbers,e=>((0,i.uX)(),(0,i.CE)("li",{key:e,class:(0,l.C4)(["page-item",{active:e===o.currentArticlePage}])},[(0,i.Lk)("button",{class:"page-link",onClick:t=>o.currentArticlePage=e},(0,l.v_)(e),9,Yt)],2))),128)),(0,i.Lk)("li",{class:(0,l.C4)(["page-item",{disabled:o.currentArticlePage===r.totalArticlePages}])},[(0,i.Lk)("button",{class:"page-link",onClick:t[12]||(t[12]=e=>o.currentArticlePage++),disabled:o.currentArticlePage===r.totalArticlePages}," Next ",8,ea)],2),(0,i.Lk)("li",{class:(0,l.C4)(["page-item",{disabled:o.currentArticlePage===r.totalArticlePages}])},[(0,i.Lk)("button",{class:"page-link",onClick:t[13]||(t[13]=e=>o.currentArticlePage=r.totalArticlePages),disabled:o.currentArticlePage===r.totalArticlePages}," Last ",8,ta)],2)])])])])]),(0,i.Lk)("div",aa,[(0,i.Lk)("div",sa,[(0,i.Lk)("div",ia,[t[42]||(t[42]=(0,i.Lk)("h5",{class:"mb-0"},"Comments Management",-1)),(0,i.Lk)("div",la,[(0,i.Lk)("button",{class:"btn btn-success btn-sm",onClick:t[14]||(t[14]=(...e)=>r.exportCommentsCSV&&r.exportCommentsCSV(...e))},t[40]||(t[40]=[(0,i.Lk)("i",{class:"fas fa-file-csv me-1"},null,-1),(0,i.eW)("Export CSV ",-1)])),(0,i.Lk)("button",{class:"btn btn-danger btn-sm",onClick:t[15]||(t[15]=(...e)=>r.exportCommentsPDF&&r.exportCommentsPDF(...e))},t[41]||(t[41]=[(0,i.Lk)("i",{class:"fas fa-file-pdf me-1"},null,-1),(0,i.eW)("Export PDF ",-1)]))])]),(0,i.Lk)("div",na,[(0,i.Lk)("div",oa,[(0,i.Lk)("div",ra,[t[43]||(t[43]=(0,i.Lk)("label",{class:"form-label small"},"Search by Commenter",-1)),(0,i.bo)((0,i.Lk)("input",{type:"text",class:"form-control form-control-sm","onUpdate:modelValue":t[16]||(t[16]=e=>o.commentFilters.commenter=e),placeholder:"Search commenter..."},null,512),[[s.Jo,o.commentFilters.commenter]])]),(0,i.Lk)("div",ca,[t[44]||(t[44]=(0,i.Lk)("label",{class:"form-label small"},"Search by Content",-1)),(0,i.bo)((0,i.Lk)("input",{type:"text",class:"form-control form-control-sm","onUpdate:modelValue":t[17]||(t[17]=e=>o.commentFilters.content=e),placeholder:"Search comment content..."},null,512),[[s.Jo,o.commentFilters.content]])]),(0,i.Lk)("div",da,[t[46]||(t[46]=(0,i.Lk)("label",{class:"form-label small"},"Sort By",-1)),(0,i.bo)((0,i.Lk)("select",{class:"form-select form-select-sm","onUpdate:modelValue":t[18]||(t[18]=e=>o.commentSortBy=e)},t[45]||(t[45]=[(0,i.Lk)("option",{value:"date_desc"},"Time ↓",-1),(0,i.Lk)("option",{value:"date_asc"},"Time ↑",-1),(0,i.Lk)("option",{value:"likes_desc"},"Likes ↓",-1),(0,i.Lk)("option",{value:"likes_asc"},"Likes ↑",-1)]),512),[[s.u1,o.commentSortBy]])]),(0,i.Lk)("div",ua,[t[48]||(t[48]=(0,i.Lk)("label",{class:"form-label small"},"Per Page",-1)),(0,i.bo)((0,i.Lk)("select",{class:"form-select form-select-sm","onUpdate:modelValue":t[19]||(t[19]=e=>o.commentsPerPage=e)},t[47]||(t[47]=[(0,i.Lk)("option",{value:"10"},"10 per page",-1),(0,i.Lk)("option",{value:"20"},"20 per page",-1),(0,i.Lk)("option",{value:"50"},"50 per page",-1)]),512),[[s.u1,o.commentsPerPage]])]),(0,i.Lk)("div",ma,[(0,i.Lk)("button",{class:"btn btn-outline-secondary btn-sm",onClick:t[20]||(t[20]=(...e)=>r.clearCommentFilters&&r.clearCommentFilters(...e))},t[49]||(t[49]=[(0,i.Lk)("i",{class:"fas fa-times"},null,-1)]))])])]),(0,i.Lk)("div",ha,[(0,i.Lk)("table",pa,[t[53]||(t[53]=(0,i.Lk)("thead",{class:"table-light"},[(0,i.Lk)("tr",null,[(0,i.Lk)("th",{style:{width:"15%"}},"Commenter"),(0,i.Lk)("th",{style:{width:"50%"}},"Comment Content"),(0,i.Lk)("th",{style:{width:"15%"}},"Comment Time"),(0,i.Lk)("th",{style:{width:"10%"}},"Likes"),(0,i.Lk)("th",{style:{width:"10%"}},"Actions")])],-1)),(0,i.Lk)("tbody",null,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(r.paginatedComments,e=>((0,i.uX)(),(0,i.CE)("tr",{key:e.id},[(0,i.Lk)("td",null,[(0,i.Lk)("div",ga,[(0,i.Lk)("img",{src:e.avatar,class:"rounded-circle me-2",width:"32",height:"32"},null,8,ba),(0,i.Lk)("div",null,[(0,i.Lk)("div",va,(0,l.v_)(e.commenter),1),(0,i.Lk)("small",fa,(0,l.v_)(e.email),1)])])]),(0,i.Lk)("td",null,[(0,i.Lk)("div",null,(0,l.v_)(r.truncateText(e.content,120)),1),(0,i.Lk)("small",ka,"Article: "+(0,l.v_)(e.articleTitle),1)]),(0,i.Lk)("td",null,(0,l.v_)(r.formatDateTime(e.date)),1),(0,i.Lk)("td",null,[(0,i.Lk)("span",ya,[t[50]||(t[50]=(0,i.Lk)("i",{class:"fas fa-thumbs-up me-1"},null,-1)),(0,i.eW)((0,l.v_)(e.likes),1)])]),(0,i.Lk)("td",null,[(0,i.Lk)("div",La,[(0,i.Lk)("button",{class:"btn btn-outline-primary",onClick:t=>r.viewComment(e)},t[51]||(t[51]=[(0,i.Lk)("i",{class:"fas fa-eye"},null,-1)]),8,wa),(0,i.Lk)("button",{class:"btn btn-outline-danger",onClick:t=>r.deleteComment(e.id)},t[52]||(t[52]=[(0,i.Lk)("i",{class:"fas fa-trash"},null,-1)]),8,Ca)])])]))),128))])])]),(0,i.Lk)("div",xa,[(0,i.Lk)("span",Fa," Showing "+(0,l.v_)((o.currentCommentPage-1)*o.commentsPerPage+1)+" - "+(0,l.v_)(Math.min(o.currentCommentPage*o.commentsPerPage,r.filteredComments.length))+" of "+(0,l.v_)(r.filteredComments.length)+" entries ",1),(0,i.Lk)("nav",null,[(0,i.Lk)("ul",_a,[(0,i.Lk)("li",{class:(0,l.C4)(["page-item",{disabled:1===o.currentCommentPage}])},[(0,i.Lk)("button",{class:"page-link",onClick:t[21]||(t[21]=e=>o.currentCommentPage=1),disabled:1===o.currentCommentPage}," First ",8,Pa)],2),(0,i.Lk)("li",{class:(0,l.C4)(["page-item",{disabled:1===o.currentCommentPage}])},[(0,i.Lk)("button",{class:"page-link",onClick:t[22]||(t[22]=e=>o.currentCommentPage--),disabled:1===o.currentCommentPage}," Previous ",8,Aa)],2),((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(r.commentPageNumbers,e=>((0,i.uX)(),(0,i.CE)("li",{key:e,class:(0,l.C4)(["page-item",{active:e===o.currentCommentPage}])},[(0,i.Lk)("button",{class:"page-link",onClick:t=>o.currentCommentPage=e},(0,l.v_)(e),9,Sa)],2))),128)),(0,i.Lk)("li",{class:(0,l.C4)(["page-item",{disabled:o.currentCommentPage===r.totalCommentPages}])},[(0,i.Lk)("button",{class:"page-link",onClick:t[23]||(t[23]=e=>o.currentCommentPage++),disabled:o.currentCommentPage===r.totalCommentPages}," Next ",8,Ea)],2),(0,i.Lk)("li",{class:(0,l.C4)(["page-item",{disabled:o.currentCommentPage===r.totalCommentPages}])},[(0,i.Lk)("button",{class:"page-link",onClick:t[24]||(t[24]=e=>o.currentCommentPage=r.totalCommentPages),disabled:o.currentCommentPage===r.totalCommentPages}," Last ",8,Ma)],2)])])])])])])])])}a(4323);const Da={name:"HealthArticles",data(){return{currentTab:"articles",articles:[{id:1,title:"How to Maintain a Healthy Lifestyle",author:"Dr. Li",category:"Healthy Living",date:"2024-01-15",views:1250,tags:["Health","Lifestyle","Prevention"],summary:"This article introduces the basic principles of maintaining a healthy lifestyle, including balanced diet, regular exercise, adequate sleep and other important factors."},{id:2,title:"Prevention and Treatment of Cardiovascular Disease",author:"Dr. Wang",category:"Cardiovascular",date:"2024-01-10",views:980,tags:["Cardiovascular","Prevention","Treatment"],summary:"Cardiovascular disease is a common health problem for modern people. This article details prevention measures and treatment methods."},{id:3,title:"Dietary Guidelines for Diabetic Patients",author:"Dr. Zhang",category:"Diabetes",date:"2024-01-08",views:2100,tags:["Diabetes","Diet","Management"],summary:"Provides scientific dietary advice for diabetic patients to help control blood sugar levels."},{id:4,title:"Childhood Vaccination Schedule",author:"Dr. Chen",category:"Pediatrics",date:"2024-01-05",views:1560,tags:["Pediatrics","Vaccines","Prevention"],summary:"Detailed childhood vaccination schedule and precautions."},{id:5,title:"Prevention of Osteoporosis in the Elderly",author:"Dr. Liu",category:"Geriatrics",date:"2024-01-03",views:890,tags:["Elderly","Osteoporosis","Prevention"],summary:"Osteoporosis prevention measures and treatment recommendations for elderly populations."},{id:6,title:"Nutritional Supplements During Pregnancy",author:"Dr. Zhao",category:"Obstetrics & Gynecology",date:"2024-01-01",views:1780,tags:["Pregnancy","Nutrition","Health"],summary:"Provides scientific pregnancy nutrition supplement recommendations for expectant mothers."},{id:7,title:"Identification and Treatment of Common Skin Diseases",author:"Dr. Sun",category:"Dermatology",date:"2023-12-28",views:1340,tags:["Skin Disease","Treatment","Identification"],summary:"Introduces symptom identification and treatment methods for common skin diseases."},{id:8,title:"The Importance of Mental Health",author:"Dr. Zhou",category:"Psychiatry",date:"2023-12-25",views:720,tags:["Mental Health","Psychology","Stress"],summary:"Explores the importance of mental health for overall health and maintenance methods."},{id:9,title:"Eye Health Protection Guide",author:"Dr. Wu",category:"Ophthalmology",date:"2023-12-22",views:1120,tags:["Ophthalmology","Vision","Protection"],summary:"How to protect eye health and prevent common eye diseases."},{id:10,title:"Prevention and Rehabilitation of Sports Injuries",author:"Dr. Zheng",category:"Sports Medicine",date:"2023-12-20",views:1650,tags:["Sports","Injury","Rehabilitation"],summary:"Essential injury prevention and rehabilitation guide for sports enthusiasts."},{id:11,title:"Respiratory Disease Protection",author:"Dr. Ma",category:"Respiratory Medicine",date:"2023-12-18",views:950,tags:["Respiratory","Disease","Protection"],summary:"Prevention measures and daily care methods for respiratory diseases."},{id:12,title:"The Importance of Healthy Sleep",author:"Dr. Lin",category:"Sleep Medicine",date:"2023-12-15",views:2300,tags:["Sleep","Health","Quality"],summary:"The importance of good sleep for health and methods to improve sleep quality."}],comments:[{id:1,commenter:"John Smith",email:"john.smith@email.com",avatar:"https://via.placeholder.com/32x32/007bff/ffffff?text=JS",content:"This article is very well written and very helpful to me. The dietary advice is particularly practical.",articleTitle:"How to Maintain a Healthy Lifestyle",date:"2024-01-16T10:30:00",likes:15},{id:2,commenter:"Lisa Wang",email:"lisa.wang@email.com",avatar:"https://via.placeholder.com/32x32/28a745/ffffff?text=LW",content:"The doctor's advice is very professional. I adjusted my routine according to the article's methods and felt a significant improvement in my physical condition.",articleTitle:"Prevention and Treatment of Cardiovascular Disease",date:"2024-01-15T14:20:00",likes:23},{id:3,commenter:"Mike Brown",email:"mike.brown@email.com",avatar:"https://via.placeholder.com/32x32/dc3545/ffffff?text=MB",content:"As a diabetic patient, this dietary guide is too important for me. I have bookmarked it and will strictly follow it.",articleTitle:"Dietary Guidelines for Diabetic Patients",date:"2024-01-14T09:15:00",likes:31},{id:4,commenter:"Sarah Johnson",email:"sarah.johnson@email.com",avatar:"https://via.placeholder.com/32x32/ffc107/ffffff?text=SJ",content:"The childhood vaccination schedule is very detailed. As a new mother, this information is so useful. Thank you for sharing!",articleTitle:"Childhood Vaccination Schedule",date:"2024-01-13T16:45:00",likes:18},{id:5,commenter:"David Lee",email:"david.lee@email.com",avatar:"https://via.placeholder.com/32x32/6f42c1/ffffff?text=DL",content:"My mother is facing osteoporosis problems. The prevention methods provided in this article are very practical, I will recommend it to her.",articleTitle:"Prevention of Osteoporosis in the Elderly",date:"2024-01-12T11:30:00",likes:12},{id:6,commenter:"Nancy Chen",email:"nancy.chen@email.com",avatar:"https://via.placeholder.com/32x32/20c997/ffffff?text=NC",content:"Nutrition during pregnancy is indeed very important. This guide taught me a lot of knowledge I did not know before.",articleTitle:"Nutritional Supplements During Pregnancy",date:"2024-01-11T13:20:00",likes:27},{id:7,commenter:"Robert Wilson",email:"robert.wilson@email.com",avatar:"https://via.placeholder.com/32x32/fd7e14/ffffff?text=RW",content:"The skin disease identification pictures are very clear, and I can make a preliminary judgment of my condition, but I still need to go to the hospital for diagnosis.",articleTitle:"Identification and Treatment of Common Skin Diseases",date:"2024-01-10T08:45:00",likes:9},{id:8,commenter:"Emily Davis",email:"emily.davis@email.com",avatar:"https://via.placeholder.com/32x32/e83e8c/ffffff?text=ED",content:"Modern society is stressful, and mental health really needs attention. I will try the stress reduction methods mentioned in the article.",articleTitle:"The Importance of Mental Health",date:"2024-01-09T15:10:00",likes:21},{id:9,commenter:"Tom Anderson",email:"tom.anderson@email.com",avatar:"https://via.placeholder.com/32x32/6610f2/ffffff?text=TA",content:"Long-term computer use makes my eyes often dry. Following the article's advice to do eye exercises, there is indeed improvement.",articleTitle:"Eye Health Protection Guide",date:"2024-01-08T12:00:00",likes:14},{id:10,commenter:"Amy Taylor",email:"amy.taylor@email.com",avatar:"https://via.placeholder.com/32x32/198754/ffffff?text=AT",content:"A must-read for sports enthusiasts! I was injured during exercise before, and now I know how to prevent it properly.",articleTitle:"Prevention and Rehabilitation of Sports Injuries",date:"2024-01-07T17:30:00",likes:33},{id:11,commenter:"Chris Martinez",email:"chris.martinez@email.com",avatar:"https://via.placeholder.com/32x32/17a2b8/ffffff?text=CM",content:"The smog has been severe recently, and respiratory protection knowledge is very timely. The mask selection section is particularly useful.",articleTitle:"Respiratory Disease Protection",date:"2024-01-06T19:15:00",likes:19},{id:12,commenter:"Alex Robinson",email:"alex.robinson@email.com",avatar:"https://via.placeholder.com/32x32/343a40/ffffff?text=AR",content:"Insomnia has been bothering me for a long time. I will seriously implement the sleep hygiene habits mentioned in the article. Hope it can improve sleep quality.",articleTitle:"The Importance of Healthy Sleep",date:"2024-01-05T21:45:00",likes:26}],articleFilters:{title:"",author:"",category:""},commentFilters:{commenter:"",content:""},articleSortBy:"date_desc",commentSortBy:"date_desc",currentArticlePage:1,currentCommentPage:1,articlesPerPage:10,commentsPerPage:10}},computed:{categories(){return[...new Set(this.articles.map(e=>e.category))]},filteredArticles(){let e=this.articles.filter(e=>(!this.articleFilters.title||e.title.toLowerCase().includes(this.articleFilters.title.toLowerCase()))&&(!this.articleFilters.author||e.author.toLowerCase().includes(this.articleFilters.author.toLowerCase()))&&(!this.articleFilters.category||e.category===this.articleFilters.category));return this.sortArticles(e)},filteredComments(){let e=this.comments.filter(e=>(!this.commentFilters.commenter||e.commenter.toLowerCase().includes(this.commentFilters.commenter.toLowerCase()))&&(!this.commentFilters.content||e.content.toLowerCase().includes(this.commentFilters.content.toLowerCase())));return this.sortComments(e)},totalArticlePages(){return Math.ceil(this.filteredArticles.length/this.articlesPerPage)},paginatedArticles(){const e=(this.currentArticlePage-1)*this.articlesPerPage,t=e+parseInt(this.articlesPerPage);return this.filteredArticles.slice(e,t)},articlePageNumbers(){const e=[],t=this.totalArticlePages,a=this.currentArticlePage,s=Math.max(1,a-2),i=Math.min(t,a+2);for(let l=s;l<=i;l++)e.push(l);return e},totalCommentPages(){return Math.ceil(this.filteredComments.length/this.commentsPerPage)},paginatedComments(){const e=(this.currentCommentPage-1)*this.commentsPerPage,t=e+parseInt(this.commentsPerPage);return this.filteredComments.slice(e,t)},commentPageNumbers(){const e=[],t=this.totalCommentPages,a=this.currentCommentPage,s=Math.max(1,a-2),i=Math.min(t,a+2);for(let l=s;l<=i;l++)e.push(l);return e}},watch:{articleFilters:{handler(){this.currentArticlePage=1},deep:!0},commentFilters:{handler(){this.currentCommentPage=1},deep:!0},articleSortBy(){this.currentArticlePage=1},commentSortBy(){this.currentCommentPage=1}},methods:{sortArticles(e){const t=[...e];switch(this.articleSortBy){case"date_desc":return t.sort((e,t)=>new Date(t.date)-new Date(e.date));case"date_asc":return t.sort((e,t)=>new Date(e.date)-new Date(t.date));case"views_desc":return t.sort((e,t)=>t.views-e.views);case"views_asc":return t.sort((e,t)=>e.views-t.views);case"title_asc":return t.sort((e,t)=>e.title.localeCompare(t.title));case"title_desc":return t.sort((e,t)=>t.title.localeCompare(e.title));default:return t}},sortComments(e){const t=[...e];switch(this.commentSortBy){case"date_desc":return t.sort((e,t)=>new Date(t.date)-new Date(e.date));case"date_asc":return t.sort((e,t)=>new Date(e.date)-new Date(t.date));case"likes_desc":return t.sort((e,t)=>t.likes-e.likes);case"likes_asc":return t.sort((e,t)=>e.likes-t.likes);default:return t}},clearArticleFilters(){this.articleFilters={title:"",author:"",category:""}},clearCommentFilters(){this.commentFilters={commenter:"",content:""}},formatDate(e){const t=new Date(e);return t.toLocaleDateString("en-US")},formatDateTime(e){const t=new Date(e);return t.toLocaleString("en-US")},truncateText(e,t){return e.length>t?e.substring(0,t)+"...":e},exportArticlesCSV(){const e=["Title","Author","Category","Publish Date","Views","Tags"],t=[e.join(","),...this.filteredArticles.map(e=>[`"${e.title}"`,`"${e.author}"`,`"${e.category}"`,`"${e.date}"`,e.views,`"${e.tags.join(";")}"`].join(","))].join("\n");this.downloadCSV(t,"health-articles-list.csv")},exportCommentsCSV(){const e=["Commenter","Comment Content","Article Title","Comment Time","Likes"],t=[e.join(","),...this.filteredComments.map(e=>[`"${e.commenter}"`,`"${e.content}"`,`"${e.articleTitle}"`,`"${e.date}"`,e.likes].join(","))].join("\n");this.downloadCSV(t,"article-comments-list.csv")},downloadCSV(e,t){const a=new Blob(["\ufeff"+e],{type:"text/csv;charset=utf-8;"}),s=document.createElement("a");if(void 0!==s.download){const e=URL.createObjectURL(a);s.setAttribute("href",e),s.setAttribute("download",t),s.style.visibility="hidden",document.body.appendChild(s),s.click(),document.body.removeChild(s)}},exportArticlesPDF(){Promise.resolve().then(a.bind(a,4323)).then(({jsPDF:e})=>{const t=new e;t.setFont("helvetica"),t.setFontSize(18),t.text("Health Articles Report",20,20),t.setFontSize(12),t.text(`Total Articles: ${this.filteredArticles.length}`,20,35),t.text(`Generated: ${(new Date).toLocaleDateString()}`,20,45);let a=60;t.setFontSize(10),t.setFont("helvetica","bold"),t.text("Title",20,a),t.text("Author",100,a),t.text("Category",140,a),t.text("Views",170,a),t.setFont("helvetica","normal"),this.filteredArticles.slice(0,30).forEach((e,s)=>{a+=10,a>270&&(t.addPage(),a=20);const i=this.encodeForPDF(this.truncateText(e.title,30)),l=this.encodeForPDF(e.author),n=this.encodeForPDF(e.category);t.text(i,20,a),t.text(l,100,a),t.text(n,140,a),t.text(e.views.toString(),170,a)}),t.save("health-articles-report.pdf")})},exportCommentsPDF(){Promise.resolve().then(a.bind(a,4323)).then(({jsPDF:e})=>{const t=new e;t.setFont("helvetica"),t.setFontSize(18),t.text("Comments Report",20,20),t.setFontSize(12),t.text(`Total Comments: ${this.filteredComments.length}`,20,35),t.text(`Generated: ${(new Date).toLocaleDateString()}`,20,45);let a=60;t.setFontSize(10),t.setFont("helvetica","bold"),t.text("Commenter",20,a),t.text("Content",60,a),t.text("Likes",170,a),t.setFont("helvetica","normal"),this.filteredComments.slice(0,30).forEach((e,s)=>{a+=15,a>270&&(t.addPage(),a=20);const i=this.encodeForPDF(e.commenter),l=this.encodeForPDF(this.truncateText(e.content,40));t.text(i,20,a),t.text(l,60,a),t.text(e.likes.toString(),170,a)}),t.save("article-comments-report.pdf")})},encodeForPDF(e){return e.replace(/[\u4e00-\u9fff]/g,"?").replace(/[^\x00-\x7F]/g,"?")},viewComment(e){alert(`Comment Details:\n\nCommenter: ${e.commenter}\nContent: ${e.content}\nArticle: ${e.articleTitle}\nTime: ${this.formatDateTime(e.date)}`)},deleteComment(e){if(confirm("Are you sure you want to delete this comment?")){const t=this.comments.findIndex(t=>t.id===e);t>-1&&(this.comments.splice(t,1),alert("Comment has been deleted"))}}}},Ia=(0,x.A)(Da,[["render",Ra],["__scopeId","data-v-03007e8c"]]),Ta=Ia,$a={class:"health-map"},Oa={class:"map-header"},Wa={class:"container-fluid"},Xa={class:"row align-items-center py-4"},Ua={class:"col-auto"},Na={class:"btn-group"},Va=["disabled"],ja={key:0,class:"fas fa-search me-2"},Ha={key:1,class:"spinner-border spinner-border-sm me-2",role:"status"},qa={class:"container-fluid h-100"},za={class:"row h-100 g-4"},Ka=["aria-expanded"],Ba={key:0,class:"fas fa-bars","aria-hidden":"true"},Qa={key:1,class:"fas fa-times","aria-hidden":"true"},Ga={class:"sidebar-content p-4"},Ja={class:"search-card mb-4",role:"search","aria-labelledby":"search-heading"},Za={class:"card-body p-4"},Ya={class:"mb-4"},es={class:"input-group input-group-lg"},ts={class:"mb-4"},as={class:"mb-4"},ss={for:"search-radius",class:"form-label fw-semibold mb-3"},is={class:"text-primary fw-bold fs-5"},ls=["disabled","aria-busy"],ns=["disabled","aria-busy"],os={key:0},rs={key:1},cs={id:"search-status",class:"visually-hidden","aria-live":"polite"},ds={key:0,class:"results-card mb-4"},us={class:"card-header d-flex justify-content-between align-items-center"},ms={class:"mb-0 fw-bold"},hs={class:"badge bg-success fs-6 px-3 py-2"},ps={class:"card-body p-0"},gs={class:"results-list"},bs=["data-real","onClick"],vs={class:"facility-icon me-3"},fs={class:"facility-info flex-grow-1"},ks={class:"facility-name mb-2 fw-bold"},ys={class:"facility-address mb-3 text-muted"},Ls={class:"facility-meta mb-3"},ws={class:"text-muted"},Cs={class:"facility-details"},xs={class:"d-flex justify-content-between align-items-center"},Fs={class:"text-success"},_s={class:"text-muted small"},Ps={key:1,class:"navigation-card mb-4"},As={class:"card-body p-4"},Ss={class:"selected-facility mb-4 p-3 bg-light rounded"},Es={class:"d-flex align-items-center"},Ms={class:"facility-icon-small me-3 p-2 rounded-circle bg-white"},Rs={class:"mb-1 fw-bold"},Ds={class:"text-muted small mb-0"},Is={class:"mb-4"},Ts={class:"travel-modes d-flex gap-2"},$s=["value"],Os={class:"mode-icon fs-4 mb-2"},Ws={class:"mode-label small fw-semibold"},Xs={class:"d-grid gap-3"},Us={class:"route-header mb-3 text-center"},Ns={key:0,class:"text-warning"},Vs={key:1,class:"text-success"},js={class:"route-summary"},Hs={class:"row text-center g-3"},qs={class:"col-4"},zs={class:"route-stat"},Ks={class:"stat-value fw-bold"},Bs={class:"col-4"},Qs={class:"route-stat"},Gs={class:"stat-value fw-bold"},Js={class:"col-4"},Zs={class:"route-stat"},Ys={class:"stat-value fw-bold"},ei={key:0,class:"route-steps mt-3"},ti={class:"steps-container",style:{"max-height":"200px","overflow-y":"auto"}},ai={class:"step-number badge bg-primary me-2"},si={class:"step-text"},ii={key:2,class:"stats-card"},li={class:"card-body p-4"},ni={class:"stats-grid"},oi={class:"stat-item text-center p-3 bg-light rounded"},ri={class:"stat-number text-danger fw-bold fs-4 d-block"},ci={class:"stat-item text-center p-3 bg-light rounded"},di={class:"stat-number text-success fw-bold fs-4 d-block"},ui={class:"stat-item text-center p-3 bg-light rounded"},mi={class:"stat-number text-primary fw-bold fs-4 d-block"},hi={class:"stat-item text-center p-3 bg-light rounded"},pi={class:"stat-number text-warning fw-bold fs-4 d-block"},gi={class:"col-lg-8 col-md-7 map-container"},bi={class:"map-wrapper p-4"},vi={class:"map-controls"},fi={class:"control-group"},ki={key:0,class:"loading-overlay"},yi={class:"loading-content"};function Li(e,t,a,n,o,r){return(0,i.uX)(),(0,i.CE)("div",$a,[(0,i.Lk)("div",Oa,[(0,i.Lk)("div",Wa,[(0,i.Lk)("div",Xa,[t[19]||(t[19]=(0,i.Lk)("div",{class:"col"},[(0,i.Lk)("h2",{class:"mb-1"},[(0,i.Lk)("i",{class:"fas fa-map-marked-alt me-3 text-primary"}),(0,i.eW)(" Health Facilities Locator ")]),(0,i.Lk)("p",{class:"text-muted mb-0 fs-6"},"Find nearby medical facilities and get directions")],-1)),(0,i.Lk)("div",Ua,[(0,i.Lk)("div",Na,[(0,i.Lk)("button",{onClick:t[0]||(t[0]=(...e)=>r.getCurrentLocation&&r.getCurrentLocation(...e)),class:"btn btn-primary btn-lg shadow-sm",title:"获取当前位置"},t[17]||(t[17]=[(0,i.Lk)("i",{class:"fas fa-location-arrow me-2"},null,-1),(0,i.eW)("Use My Location ",-1)])),(0,i.Lk)("button",{onClick:t[1]||(t[1]=(...e)=>r.searchNearbyFacilities&&r.searchNearbyFacilities(...e)),class:"btn btn-success btn-lg shadow-sm",title:"搜索附近设施",disabled:o.loading},[o.loading?((0,i.uX)(),(0,i.CE)("span",Ha)):((0,i.uX)(),(0,i.CE)("i",ja)),t[18]||(t[18]=(0,i.eW)(" Quick Search ",-1))],8,Va)])])])])]),(0,i.Lk)("div",qa,[(0,i.Lk)("div",za,[o.isMobile?((0,i.uX)(),(0,i.CE)("button",{key:0,onClick:t[2]||(t[2]=(...e)=>r.toggleSidebar&&r.toggleSidebar(...e)),class:(0,l.C4)(["mobile-sidebar-toggle btn btn-primary position-fixed",{active:o.sidebarOpen}]),"aria-label":"切换侧边栏菜单","aria-expanded":o.sidebarOpen,"aria-controls":"sidebar-content"},[o.sidebarOpen?(0,i.Q3)("",!0):((0,i.uX)(),(0,i.CE)("i",Ba)),o.sidebarOpen?((0,i.uX)(),(0,i.CE)("i",Qa)):(0,i.Q3)("",!0)],10,Ka)):(0,i.Q3)("",!0),(0,i.Lk)("div",{class:(0,l.C4)(["col-lg-4 col-md-5 sidebar",{open:o.sidebarOpen}]),role:"complementary","aria-label":"搜索和结果面板",id:"sidebar-content"},[o.isMobile&&o.sidebarOpen?((0,i.uX)(),(0,i.CE)("div",{key:0,class:"sidebar-overlay",onClick:t[3]||(t[3]=(...e)=>r.toggleSidebar&&r.toggleSidebar(...e)),"aria-hidden":"true"})):(0,i.Q3)("",!0),(0,i.Lk)("div",Ga,[(0,i.Lk)("div",Ja,[t[33]||(t[33]=(0,i.Lk)("div",{class:"card-header"},[(0,i.Lk)("h2",{id:"search-heading",class:"mb-0 fw-bold"},[(0,i.Lk)("i",{class:"fas fa-search me-2","aria-hidden":"true"}),(0,i.eW)("搜索医疗设施 ")])],-1)),(0,i.Lk)("div",Za,[(0,i.Lk)("div",Ya,[t[21]||(t[21]=(0,i.Lk)("label",{for:"location-input",class:"form-label fw-semibold mb-2"},"位置",-1)),(0,i.Lk)("div",es,[t[20]||(t[20]=(0,i.Lk)("span",{class:"input-group-text bg-light border-end-0","aria-hidden":"true"},[(0,i.Lk)("i",{class:"fas fa-map-marker-alt text-primary"})],-1)),(0,i.bo)((0,i.Lk)("input",{id:"location-input","onUpdate:modelValue":t[4]||(t[4]=e=>o.searchQuery=e),type:"text",class:"form-control border-start-0 ps-2",placeholder:"输入地址或地标",onKeyup:t[5]||(t[5]=(0,s.jR)((...e)=>r.searchLocation&&r.searchLocation(...e),["enter"])),"aria-describedby":"location-help"},null,544),[[s.Jo,o.searchQuery]])]),t[22]||(t[22]=(0,i.Lk)("small",{id:"location-help",class:"form-text text-muted"}," 输入您要搜索的地址、城市或地标名称 ",-1))]),(0,i.Lk)("div",ts,[t[24]||(t[24]=(0,i.Lk)("label",{for:"facility-type",class:"form-label fw-semibold mb-2"},"设施类型",-1)),(0,i.bo)((0,i.Lk)("select",{id:"facility-type","onUpdate:modelValue":t[6]||(t[6]=e=>o.facilityType=e),class:"form-select form-select-lg","aria-describedby":"facility-help"},t[23]||(t[23]=[(0,i.Fv)('<option value="" data-v-032da012>所有设施</option><option value="hospital" data-v-032da012>🏥 医院</option><option value="clinic" data-v-032da012>🩺 诊所</option><option value="pharmacy" data-v-032da012>💊 药店</option><option value="emergency" data-v-032da012>🚑 急救服务</option>',5)]),512),[[s.u1,o.facilityType]]),t[25]||(t[25]=(0,i.Lk)("small",{id:"facility-help",class:"form-text text-muted"}," 选择您要查找的医疗设施类型 ",-1))]),(0,i.Lk)("div",as,[(0,i.Lk)("label",ss,[t[26]||(t[26]=(0,i.eW)(" 搜索半径: ",-1)),(0,i.Lk)("span",is,(0,l.v_)(o.searchRadius)+"公里",1)]),(0,i.bo)((0,i.Lk)("input",{id:"search-radius","onUpdate:modelValue":t[7]||(t[7]=e=>o.searchRadius=e),type:"range",class:"form-range",min:"1",max:"50",step:"1","aria-describedby":"radius-help"},null,512),[[s.Jo,o.searchRadius]]),t[27]||(t[27]=(0,i.Lk)("div",{class:"d-flex justify-content-between small text-muted mt-2"},[(0,i.Lk)("span",null,"1公里"),(0,i.Lk)("span",null,"50公里")],-1)),t[28]||(t[28]=(0,i.Lk)("small",{id:"radius-help",class:"form-text text-muted"}," 调整搜索范围，数值越大搜索范围越广 ",-1))]),(0,i.Lk)("button",{onClick:t[8]||(t[8]=(...e)=>r.searchLocation&&r.searchLocation(...e)),class:"btn btn-primary btn-lg w-100 shadow-sm mb-3",disabled:o.loading,"aria-busy":o.loading,"aria-describedby":"search-status"},t[29]||(t[29]=[(0,i.Lk)("i",{class:"fas fa-search me-2","aria-hidden":"true"},null,-1),(0,i.eW)("搜索真实设施 ",-1)]),8,ls),(0,i.Lk)("button",{onClick:t[9]||(t[9]=(...e)=>r.searchNearbyFacilities&&r.searchNearbyFacilities(...e)),class:"btn btn-outline-success btn-lg w-100 shadow-sm",disabled:o.loading,"aria-busy":o.loading},[t[31]||(t[31]=(0,i.Lk)("i",{class:"fas fa-map-marked-alt me-2","aria-hidden":"true"},null,-1)),o.loading?((0,i.uX)(),(0,i.CE)("span",rs,t[30]||(t[30]=[(0,i.Lk)("span",{class:"spinner-border spinner-border-sm me-2",role:"status","aria-hidden":"true"},null,-1),(0,i.eW)(" 搜索中... ",-1)]))):((0,i.uX)(),(0,i.CE)("span",os,"查找附近设施"))],8,ns),(0,i.Lk)("div",cs,(0,l.v_)(o.loading?"正在搜索医疗设施，请稍候":""),1),t[32]||(t[32]=(0,i.Lk)("div",{class:"mt-3 p-3 bg-info bg-opacity-10 rounded"},[(0,i.Lk)("div",{class:"d-flex align-items-center"},[(0,i.Lk)("i",{class:"fas fa-info-circle text-info me-2"}),(0,i.Lk)("small",{class:"text-muted"},[(0,i.Lk)("strong",null,"Real functionality:"),(0,i.eW)(" Uses live data from OpenStreetMap and real routing services ")])])],-1))])]),o.searchResults.length>0?((0,i.uX)(),(0,i.CE)("div",ds,[(0,i.Lk)("div",us,[(0,i.Lk)("h5",ms,[t[34]||(t[34]=(0,i.Lk)("i",{class:"fas fa-list me-2"},null,-1)),(0,i.eW)("Found "+(0,l.v_)(o.searchResults.length)+" facilities ",1)]),(0,i.Lk)("span",hs,(0,l.v_)(o.searchResults.length),1)]),(0,i.Lk)("div",ps,[(0,i.Lk)("div",gs,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(o.searchResults,e=>((0,i.uX)(),(0,i.CE)("div",{key:e.id,class:(0,l.C4)(["facility-item p-4",{selected:o.selectedFacility?.id===e.id}]),"data-real":e.isReal,onClick:t=>r.selectFacility(e)},[(0,i.Lk)("div",vs,[(0,i.Lk)("i",{class:(0,l.C4)(r.getFacilityIcon(e.type)),style:(0,l.Tr)({color:r.getFacilityColor(e.type),fontSize:"1.5rem"})},null,6)]),(0,i.Lk)("div",fs,[(0,i.Lk)("h6",ks,(0,l.v_)(e.name),1),(0,i.Lk)("p",ys,(0,l.v_)(e.address),1),(0,i.Lk)("div",Ls,[(0,i.Lk)("span",{class:"badge me-3 px-3 py-2",style:(0,l.Tr)({backgroundColor:r.getFacilityColor(e.type)})},(0,l.v_)(e.type),5),(0,i.Lk)("span",ws,[t[35]||(t[35]=(0,i.Lk)("i",{class:"fas fa-route me-1"},null,-1)),(0,i.eW)((0,l.v_)(e.distance)+"km away ",1)])]),(0,i.Lk)("div",Cs,[(0,i.Lk)("div",xs,[(0,i.Lk)("span",Fs,[t[36]||(t[36]=(0,i.Lk)("i",{class:"fas fa-star me-1"},null,-1)),(0,i.eW)(" "+(0,l.v_)(e.rating)+"/5 ",1)]),(0,i.Lk)("span",_s,[t[37]||(t[37]=(0,i.Lk)("i",{class:"fas fa-clock me-1"},null,-1)),(0,i.eW)(" "+(0,l.v_)(e.hours),1)])])])]),t[38]||(t[38]=(0,i.Lk)("div",{class:"facility-action ms-3"},[(0,i.Lk)("i",{class:"fas fa-chevron-right text-muted"})],-1))],10,bs))),128))])])])):(0,i.Q3)("",!0),o.selectedFacility?((0,i.uX)(),(0,i.CE)("div",Ps,[t[52]||(t[52]=(0,i.Lk)("div",{class:"card-header"},[(0,i.Lk)("h5",{class:"mb-0 fw-bold"},[(0,i.Lk)("i",{class:"fas fa-navigation me-2"}),(0,i.eW)("Navigation ")])],-1)),(0,i.Lk)("div",As,[(0,i.Lk)("div",Ss,[(0,i.Lk)("div",Es,[(0,i.Lk)("div",Ms,[(0,i.Lk)("i",{class:(0,l.C4)(r.getFacilityIcon(o.selectedFacility.type)),style:(0,l.Tr)({color:r.getFacilityColor(o.selectedFacility.type),fontSize:"1.2rem"})},null,6)]),(0,i.Lk)("div",null,[(0,i.Lk)("h6",Rs,(0,l.v_)(o.selectedFacility.name),1),(0,i.Lk)("p",Ds,(0,l.v_)(o.selectedFacility.address),1)])])]),(0,i.Lk)("div",Is,[t[39]||(t[39]=(0,i.Lk)("label",{class:"form-label fw-semibold mb-3"},"Transportation Mode",-1)),(0,i.Lk)("div",Ts,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(o.travelModes,e=>((0,i.uX)(),(0,i.CE)("label",{key:e.value,class:(0,l.C4)(["travel-mode-option flex-fill text-center p-3 rounded",{active:o.travelMode===e.value}])},[(0,i.bo)((0,i.Lk)("input",{type:"radio","onUpdate:modelValue":t[10]||(t[10]=e=>o.travelMode=e),value:e.value,class:"d-none"},null,8,$s),[[s.XL,o.travelMode]]),(0,i.Lk)("div",Os,(0,l.v_)(e.icon),1),(0,i.Lk)("div",Ws,(0,l.v_)(e.label),1)],2))),128))])]),(0,i.Lk)("div",Xs,[(0,i.Lk)("button",{onClick:t[11]||(t[11]=(...e)=>r.getDirections&&r.getDirections(...e)),class:"btn btn-success btn-lg shadow-sm"},t[40]||(t[40]=[(0,i.Lk)("i",{class:"fas fa-route me-2"},null,-1),(0,i.eW)("Get Real Directions ",-1)])),(0,i.Lk)("button",{onClick:t[12]||(t[12]=(...e)=>r.startNavigation&&r.startNavigation(...e)),class:"btn btn-info btn-lg shadow-sm"},t[41]||(t[41]=[(0,i.Lk)("i",{class:"fas fa-external-link-alt me-2"},null,-1),(0,i.eW)("Open in Navigation App ",-1)])),(0,i.Lk)("button",{onClick:t[13]||(t[13]=(...e)=>r.shareFacilityLocation&&r.shareFacilityLocation(...e)),class:"btn btn-secondary btn-lg shadow-sm"},t[42]||(t[42]=[(0,i.Lk)("i",{class:"fas fa-share-alt me-2"},null,-1),(0,i.eW)("Share Location ",-1)]))]),o.routeInfo?((0,i.uX)(),(0,i.CE)("div",{key:0,class:(0,l.C4)(["route-info mt-4 p-3 rounded",o.routeInfo.isEstimated?"bg-warning bg-opacity-10":"bg-primary bg-opacity-10"])},[(0,i.Lk)("div",Us,[o.routeInfo.isEstimated?((0,i.uX)(),(0,i.CE)("div",Ns,t[43]||(t[43]=[(0,i.Lk)("i",{class:"fas fa-exclamation-triangle me-2"},null,-1),(0,i.Lk)("strong",null,"Estimated Route",-1)]))):((0,i.uX)(),(0,i.CE)("div",Vs,t[44]||(t[44]=[(0,i.Lk)("i",{class:"fas fa-check-circle me-2"},null,-1),(0,i.Lk)("strong",null,"Real-time Route",-1)])))]),(0,i.Lk)("div",js,[(0,i.Lk)("div",Hs,[(0,i.Lk)("div",qs,[(0,i.Lk)("div",zs,[t[45]||(t[45]=(0,i.Lk)("i",{class:"fas fa-route text-primary fs-4 mb-2"},null,-1)),(0,i.Lk)("div",Ks,(0,l.v_)(o.routeInfo.distance),1),t[46]||(t[46]=(0,i.Lk)("div",{class:"stat-label small text-muted"},"Distance",-1))])]),(0,i.Lk)("div",Bs,[(0,i.Lk)("div",Qs,[t[47]||(t[47]=(0,i.Lk)("i",{class:"fas fa-clock text-success fs-4 mb-2"},null,-1)),(0,i.Lk)("div",Gs,(0,l.v_)(o.routeInfo.duration),1),t[48]||(t[48]=(0,i.Lk)("div",{class:"stat-label small text-muted"},"Duration",-1))])]),(0,i.Lk)("div",Js,[(0,i.Lk)("div",Zs,[t[49]||(t[49]=(0,i.Lk)("i",{class:"fas fa-map text-info fs-4 mb-2"},null,-1)),(0,i.Lk)("div",Ys,(0,l.v_)(o.routeInfo.mode),1),t[50]||(t[50]=(0,i.Lk)("div",{class:"stat-label small text-muted"},"Mode",-1))])])])]),o.routeInfo.steps&&o.routeInfo.steps.length>0?((0,i.uX)(),(0,i.CE)("div",ei,[t[51]||(t[51]=(0,i.Lk)("h6",{class:"fw-bold mb-2"},[(0,i.Lk)("i",{class:"fas fa-list-ol me-2"}),(0,i.eW)("Turn-by-turn Directions ")],-1)),(0,i.Lk)("div",ti,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(o.routeInfo.steps,(e,t)=>((0,i.uX)(),(0,i.CE)("div",{key:t,class:"step-item p-2 mb-2 bg-white bg-opacity-50 rounded"},[(0,i.Lk)("span",ai,(0,l.v_)(t+1),1),(0,i.Lk)("span",si,(0,l.v_)(e),1)]))),128))])])):(0,i.Q3)("",!0)],2)):(0,i.Q3)("",!0)])])):(0,i.Q3)("",!0),o.searchResults.length>0?((0,i.uX)(),(0,i.CE)("div",ii,[(0,i.Lk)("div",li,[t[57]||(t[57]=(0,i.Lk)("h6",{class:"card-title fw-bold mb-3"},[(0,i.Lk)("i",{class:"fas fa-chart-bar me-2 text-primary"}),(0,i.eW)("Quick Stats ")],-1)),(0,i.Lk)("div",ni,[(0,i.Lk)("div",oi,[(0,i.Lk)("span",ri,(0,l.v_)(r.hospitalCount),1),t[53]||(t[53]=(0,i.Lk)("span",{class:"stat-label small text-muted"},"Hospitals",-1))]),(0,i.Lk)("div",ci,[(0,i.Lk)("span",di,(0,l.v_)(r.clinicCount),1),t[54]||(t[54]=(0,i.Lk)("span",{class:"stat-label small text-muted"},"Clinics",-1))]),(0,i.Lk)("div",ui,[(0,i.Lk)("span",mi,(0,l.v_)(r.pharmacyCount),1),t[55]||(t[55]=(0,i.Lk)("span",{class:"stat-label small text-muted"},"Pharmacies",-1))]),(0,i.Lk)("div",hi,[(0,i.Lk)("span",pi,(0,l.v_)(r.emergencyCount),1),t[56]||(t[56]=(0,i.Lk)("span",{class:"stat-label small text-muted"},"Emergency",-1))])])])])):(0,i.Q3)("",!0)])],2),(0,i.Lk)("div",gi,[(0,i.Lk)("div",bi,[t[63]||(t[63]=(0,i.Lk)("div",{id:"map",class:"enhanced-map",style:{height:"600px",width:"100%"}},null,-1)),(0,i.Lk)("div",vi,[(0,i.Lk)("div",fi,[(0,i.Lk)("button",{onClick:t[14]||(t[14]=(...e)=>r.zoomIn&&r.zoomIn(...e)),class:"btn btn-light btn-lg shadow-sm me-2",title:"Zoom In"},t[58]||(t[58]=[(0,i.Lk)("i",{class:"fas fa-plus"},null,-1)])),(0,i.Lk)("button",{onClick:t[15]||(t[15]=(...e)=>r.zoomOut&&r.zoomOut(...e)),class:"btn btn-light btn-lg shadow-sm me-2",title:"Zoom Out"},t[59]||(t[59]=[(0,i.Lk)("i",{class:"fas fa-minus"},null,-1)])),(0,i.Lk)("button",{onClick:t[16]||(t[16]=(...e)=>r.resetView&&r.resetView(...e)),class:"btn btn-light btn-lg shadow-sm",title:"Reset View"},t[60]||(t[60]=[(0,i.Lk)("i",{class:"fas fa-home"},null,-1)]))])]),t[64]||(t[64]=(0,i.Fv)('<div class="map-legend" data-v-032da012><h6 class="fw-bold mb-3" data-v-032da012><i class="fas fa-info-circle me-2" data-v-032da012></i>Legend </h6><div class="legend-items" data-v-032da012><div class="legend-item mb-2 p-2 rounded bg-white bg-opacity-75" data-v-032da012><i class="fas fa-hospital me-2" style="color:#dc3545;font-size:1.1rem;" data-v-032da012></i><span class="fw-semibold" data-v-032da012>Hospitals</span></div><div class="legend-item mb-2 p-2 rounded bg-white bg-opacity-75" data-v-032da012><i class="fas fa-clinic-medical me-2" style="color:#28a745;font-size:1.1rem;" data-v-032da012></i><span class="fw-semibold" data-v-032da012>Clinics</span></div><div class="legend-item mb-2 p-2 rounded bg-white bg-opacity-75" data-v-032da012><i class="fas fa-pills me-2" style="color:#007bff;font-size:1.1rem;" data-v-032da012></i><span class="fw-semibold" data-v-032da012>Pharmacies</span></div><div class="legend-item mb-2 p-2 rounded bg-white bg-opacity-75" data-v-032da012><i class="fas fa-ambulance me-2" style="color:#ffc107;font-size:1.1rem;" data-v-032da012></i><span class="fw-semibold" data-v-032da012>Emergency</span></div></div></div>',1)),o.loading?((0,i.uX)(),(0,i.CE)("div",ki,[(0,i.Lk)("div",yi,[t[61]||(t[61]=(0,i.Lk)("div",{class:"spinner-border text-primary mb-3",role:"status"},[(0,i.Lk)("span",{class:"visually-hidden"},"Loading...")],-1)),(0,i.Lk)("h5",null,(0,l.v_)(o.loadingMessage),1),t[62]||(t[62]=(0,i.Lk)("p",{class:"text-muted"},"Please wait while we process your request...",-1))])])):(0,i.Q3)("",!0)])])])])])}var wi=a(3481),Ci=a.n(wi);delete Ci().Icon.Default.prototype._getIconUrl,Ci().Icon.Default.mergeOptions({iconRetinaUrl:a(8249),iconUrl:a(7024),shadowUrl:a(1071)});const xi={name:"HealthMap",data(){return{map:null,userLocation:null,searchQuery:"",facilityType:"",searchRadius:10,selectedFacility:null,travelMode:"driving",loading:!1,loadingMessage:"",routeInfo:null,sidebarOpen:!1,isMobile:!1,travelModes:[{value:"driving",icon:"🚗",label:"Drive"},{value:"walking",icon:"🚶",label:"Walk"},{value:"transit",icon:"🚌",label:"Transit"},{value:"bicycling",icon:"🚲",label:"Bike"}],searchResults:[],allFacilities:[{id:1,name:"Melbourne Medical Centre",type:"hospital",address:"123 Collins Street, Melbourne VIC 3000",lat:-37.8136,lng:144.9631,rating:4.2,hours:"Open 24/7",phone:"(03) 9123 4567",services:["Emergency","Surgery","Maternity","ICU"],specialties:["Cardiology","Neurology","Orthopedics"]},{id:2,name:"City Medical Clinic",type:"clinic",address:"456 Bourke Street, Melbourne VIC 3000",lat:-37.8143,lng:144.9612,rating:4.5,hours:"8:00 AM - 6:00 PM",phone:"(03) 9234 5678",services:["General Practice","Vaccinations","Health Checks","Minor Surgery"],specialties:["Family Medicine","Preventive Care"]},{id:3,name:"HealthPlus Pharmacy",type:"pharmacy",address:"789 Swanston Street, Melbourne VIC 3000",lat:-37.8156,lng:144.9672,rating:4,hours:"9:00 AM - 9:00 PM",phone:"(03) 9345 6789",services:["Prescriptions","Health Products","Consultation","Flu Shots"],specialties:["Medication Management","Health Screening"]},{id:4,name:"Royal Melbourne Hospital",type:"hospital",address:"Grattan Street, Parkville VIC 3050",lat:-37.7986,lng:144.9559,rating:4.3,hours:"Open 24/7",phone:"(03) 9342 7000",services:["Emergency","Specialist Care","Research","Trauma Center"],specialties:["Cancer Treatment","Heart Surgery","Emergency Medicine"]},{id:5,name:"Emergency Medical Services",type:"emergency",address:"Elizabeth Street, Melbourne VIC 3000",lat:-37.8125,lng:144.9627,rating:4.1,hours:"Open 24/7",phone:"000",services:["Emergency Response","Ambulance","Paramedic Care","Life Support"],specialties:["Emergency Medicine","Critical Care Transport"]},{id:6,name:"Southbank Family Clinic",type:"clinic",address:"321 Southbank Blvd, Southbank VIC 3006",lat:-37.8225,lng:144.9631,rating:4.4,hours:"7:00 AM - 7:00 PM",phone:"(03) 9876 5432",services:["General Practice","Pediatrics","Women's Health","Mental Health"],specialties:["Family Medicine","Child Care","Preventive Medicine"]},{id:7,name:"Carlton Pharmacy Plus",type:"pharmacy",address:"654 Lygon Street, Carlton VIC 3053",lat:-37.8014,lng:144.9669,rating:4.2,hours:"8:30 AM - 8:00 PM",phone:"(03) 9347 8901",services:["Prescriptions","Compounding","Health Advice","Medical Equipment"],specialties:["Custom Medications","Diabetes Care"]}],markers:[],userMarker:null,routeLayer:null,directionsRenderer:null}},computed:{hospitalCount(){return this.searchResults.filter(e=>"hospital"===e.type).length},clinicCount(){return this.searchResults.filter(e=>"clinic"===e.type).length},pharmacyCount(){return this.searchResults.filter(e=>"pharmacy"===e.type).length},emergencyCount(){return this.searchResults.filter(e=>"emergency"===e.type).length}},mounted(){this.initializeMap(),this.getCurrentLocation()},methods:{checkMobileDevice(){this.isMobile=window.innerWidth<=768},handleResize(){this.checkMobileDevice(),this.map&&setTimeout(()=>{this.map.invalidateSize()},100)},toggleSidebar(){this.sidebarOpen=!this.sidebarOpen},initializeMap(){this.loading=!0,this.loadingMessage="Loading interactive map...",this.$nextTick(()=>{try{this.map=Ci().map("map").setView([-37.8136,144.9631],13),Ci().tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:"© OpenStreetMap contributors",maxZoom:19}).addTo(this.map),window.addEventListener("resize",()=>{this.map&&setTimeout(()=>{this.map.invalidateSize()},100)}),this.addFacilityMarkers(),this.loading=!1,this.loadingMessage=""}catch(e){console.error("Error initializing map:",e),this.loading=!1,this.loadingMessage="Failed to load map"}})},addFacilityMarkers(){this.clearMarkers(),this.allFacilities.forEach(e=>{const t=this.createCustomIcon(e.type),a=Ci().marker([e.lat,e.lng],{icon:t}).addTo(this.map).bindPopup(`\n            <div class="facility-popup">\n              <h6><i class="${this.getFacilityIcon(e.type)}"></i> ${e.name}</h6>\n              <p class="mb-1">${e.address}</p>\n              <div class="d-flex justify-content-between align-items-center">\n                <span class="badge" style="background-color: ${this.getFacilityColor(e.type)}">${e.type}</span>\n                <span class="text-muted small">★ ${e.rating}/5</span>\n              </div>\n              <p class="mb-1"><i class="fas fa-clock"></i> ${e.hours}</p>\n              <button class="btn btn-primary btn-sm mt-2" onclick="window.selectFacilityFromMap(${e.id})">\n                Select Facility\n              </button>\n            </div>\n          `);this.markers.push(a),a.on("click",()=>{this.selectFacility(e)})})},createCustomIcon(e){const t=this.getFacilityColor(e),a=this.getFacilityIcon(e);return Ci().divIcon({className:"custom-marker",html:`\n          <div class="marker-pin" style="background-color: ${t};">\n            <i class="${a}" style="color: white;"></i>\n          </div>\n        `,iconSize:[30,30],iconAnchor:[15,30],popupAnchor:[0,-30]})},clearMarkers(){this.markers.forEach(e=>{this.map.removeLayer(e)}),this.markers=[]},getFacilityColor(e){const t={hospital:"#dc3545",clinic:"#28a745",pharmacy:"#007bff",emergency:"#ffc107"};return t[e]||"#6c757d"},getCurrentLocation(){this.loading=!0,this.loadingMessage="Getting your location...",navigator.geolocation?navigator.geolocation.getCurrentPosition(async e=>{if(this.userLocation={lat:e.coords.latitude,lng:e.coords.longitude},this.map){const e=Ci().divIcon({className:"user-location-marker",html:'<div class="user-marker-pulse"></div><div class="user-marker-dot"></div>',iconSize:[20,20],iconAnchor:[10,10]});this.userMarker&&this.map.removeLayer(this.userMarker),this.userMarker=Ci().marker([this.userLocation.lat,this.userLocation.lng],{icon:e}).addTo(this.map).bindPopup("Your Current Location"),this.map.setView([this.userLocation.lat,this.userLocation.lng],15)}this.loading=!1,await this.searchRealMedicalFacilities()},e=>{console.error("Geolocation error:",e),this.userLocation={lat:-37.8136,lng:144.9631},this.loading=!1,this.searchNearbyFacilities();let t="Unable to get your location. ";switch(e.code){case e.PERMISSION_DENIED:t+="Location access denied by user.";break;case e.POSITION_UNAVAILABLE:t+="Location information unavailable.";break;case e.TIMEOUT:t+="Location request timed out.";break;default:t+="Unknown location error.";break}alert(t+" Using Melbourne CBD as default location.")},{enableHighAccuracy:!0,timeout:1e4,maximumAge:3e5}):(this.userLocation={lat:-37.8136,lng:144.9631},this.loading=!1,this.searchNearbyFacilities(),alert("Geolocation not supported by this browser. Using Melbourne CBD as default location."))},async searchNearbyFacilities(){try{this.loading=!0,this.loadingMessage="正在搜索附近设施...",this.clearMarkers();const e=this.userLocation||{lat:-37.8136,lng:144.9631},t=1e3*this.searchRadius;let a=`[out:json][timeout:25];\n        (\n          node["amenity"~"^(hospital|clinic|doctors|dentist|pharmacy|veterinary)$"](around:${t},${e.lat},${e.lng});\n          way["amenity"~"^(hospital|clinic|doctors|dentist|pharmacy|veterinary)$"](around:${t},${e.lat},${e.lng});\n          relation["amenity"~"^(hospital|clinic|doctors|dentist|pharmacy|veterinary)$"](around:${t},${e.lat},${e.lng});\n        );\n        out center;`;if(this.facilityType){const s={hospital:"hospital",clinic:"clinic|doctors",pharmacy:"pharmacy",emergency:"hospital"},i=s[this.facilityType]||this.facilityType;a=`[out:json][timeout:25];\n          (\n            node["amenity"~"^(${i})$"](around:${t},${e.lat},${e.lng});\n            way["amenity"~"^(${i})$"](around:${t},${e.lat},${e.lng});\n            relation["amenity"~"^(${i})$"](around:${t},${e.lat},${e.lng});\n          );\n          out center;`}const s=await fetch("https://overpass-api.de/api/interpreter",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"},body:"data="+encodeURIComponent(a)});if(!s.ok)throw new Error("API请求失败");const i=await s.json();this.searchResults=i.elements.filter(e=>e.tags&&e.tags.name).map(t=>{let a,s;if(t.lat&&t.lon)a=t.lat,s=t.lon;else{if(!t.center)return null;a=t.center.lat,s=t.center.lon}const i=this.calculateDistance(e.lat,e.lng,a,s);let l="clinic";const n=t.tags.amenity;return"hospital"===n?l="hospital":"pharmacy"===n?l="pharmacy":("clinic"===n||"doctors"===n||"dentist"===n||"veterinary"===n)&&(l="clinic"),{id:t.id,name:t.tags.name||"未命名设施",type:l,address:this.formatAddress(t.tags),lat:a,lng:s,distance:i.toFixed(1),rating:"4."+Math.floor(5*Math.random()),hours:t.tags.opening_hours||"营业时间未知",phone:t.tags.phone||"电话未知",website:t.tags.website||null,services:this.getServicesForType(l),specialties:["一般护理"],isReal:!0}}).filter(e=>null!==e).sort((e,t)=>parseFloat(e.distance)-parseFloat(t.distance)).slice(0,20),this.map&&this.addRealFacilityMarkers(),console.log(`找到 ${this.searchResults.length} 个真实医疗设施`)}catch(e){console.error("搜索设施失败:",e);const t=this.userLocation||{lat:-37.8136,lng:144.9631};let a=this.allFacilities;this.facilityType&&(a=a.filter(e=>e.type===this.facilityType)),this.searchResults=a.map(e=>{const a=this.calculateDistance(t.lat,t.lng,e.lat,e.lng);return{...e,distance:a.toFixed(1)}}).filter(e=>e.distance<=this.searchRadius).sort((e,t)=>e.distance-t.distance),this.map&&this.addFacilityMarkers(),console.log("使用示例数据作为回退")}finally{this.loading=!1}},async searchLocation(){if(this.searchQuery.trim()){this.loading=!0,this.loadingMessage="Searching location...";try{const e=encodeURIComponent(this.searchQuery+", Melbourne, Australia"),t=await fetch(`https://nominatim.openstreetmap.org/search?format=json&q=${e}&limit=1&countrycodes=au`);if(!t.ok)throw new Error("Search service unavailable");const a=await t.json();if(!(a&&a.length>0))throw new Error("Location not found");{const e=a[0];if(this.userLocation={lat:parseFloat(e.lat),lng:parseFloat(e.lon)},this.map){this.map.setView([this.userLocation.lat,this.userLocation.lng],14);const t=Ci().divIcon({className:"search-result-marker",html:'<div class="search-pin"><i class="fas fa-search"></i></div>',iconSize:[25,25],iconAnchor:[12,25]});Ci().marker([this.userLocation.lat,this.userLocation.lng],{icon:t}).addTo(this.map).bindPopup(`<b>Search Result:</b><br>${e.display_name}`).openPopup()}await this.searchRealMedicalFacilities()}}catch(e){console.error("Geocoding error:",e),alert("Unable to find location. Please try a different search term."),this.userLocation={lat:-37.8136,lng:144.9631},this.searchNearbyFacilities()}this.loading=!1}else this.searchNearbyFacilities()},async searchRealMedicalFacilities(){if(this.userLocation){this.loading=!0,this.loadingMessage="Finding real medical facilities...";try{const{lat:e,lng:t}=this.userLocation,a=1e3*this.searchRadius;let s=`[out:json][timeout:25];\n        (\n          node["amenity"~"^(hospital|clinic|doctors|dentist|pharmacy|veterinary)$"](around:${a},${e},${t});\n          way["amenity"~"^(hospital|clinic|doctors|dentist|pharmacy|veterinary)$"](around:${a},${e},${t});\n          relation["amenity"~"^(hospital|clinic|doctors|dentist|pharmacy|veterinary)$"](around:${a},${e},${t});\n        );\n        out center;`;if(this.facilityType){const i={hospital:"hospital",clinic:"clinic|doctors",pharmacy:"pharmacy",emergency:"hospital"},l=i[this.facilityType]||this.facilityType;s=`[out:json][timeout:25];\n          (\n            node["amenity"~"^(${l})$"](around:${a},${e},${t});\n            way["amenity"~"^(${l})$"](around:${a},${e},${t});\n            relation["amenity"~"^(${l})$"](around:${a},${e},${t});\n          );\n          out center;`}const i=await fetch("https://overpass-api.de/api/interpreter",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"},body:"data="+encodeURIComponent(s)});if(!i.ok)throw new Error("Overpass API request failed");const l=await i.json();this.searchResults=l.elements.filter(e=>e.tags&&e.tags.name).map(a=>{let s,i;if(a.lat&&a.lon)s=a.lat,i=a.lon;else{if(!a.center)return null;s=a.center.lat,i=a.center.lon}const l=this.calculateDistance(e,t,s,i);let n="clinic";const o=a.tags.amenity;return"hospital"===o?n="hospital":"pharmacy"===o?n="pharmacy":("clinic"===o||"doctors"===o||"dentist"===o||"veterinary"===o)&&(n="clinic"),{id:a.id,name:a.tags.name||"Unnamed Facility",type:n,address:this.formatAddress(a.tags),lat:s,lng:i,distance:l.toFixed(1),rating:"4."+Math.floor(5*Math.random()),hours:a.tags.opening_hours||"Hours not available",phone:a.tags.phone||"Phone not available",website:a.tags.website||null,services:this.getServicesForType(n),specialties:["General Care"],isReal:!0}}).filter(e=>null!==e).sort((e,t)=>parseFloat(e.distance)-parseFloat(t.distance)).slice(0,20),this.map&&this.addRealFacilityMarkers(),console.log(`Found ${this.searchResults.length} real medical facilities`)}catch(e){console.error("Error searching real facilities:",e),this.searchNearbyFacilities(),alert("Unable to load real facility data. Showing sample facilities instead.")}this.loading=!1}},formatAddress(e){const t=[];return e["addr:housenumber"]&&t.push(e["addr:housenumber"]),e["addr:street"]&&t.push(e["addr:street"]),e["addr:suburb"]&&t.push(e["addr:suburb"]),e["addr:city"]&&t.push(e["addr:city"]),e["addr:postcode"]&&t.push(e["addr:postcode"]),t.length>0?t.join(" "):e.address||"Address not available"},getServicesForType(e){const t={hospital:["Emergency Care","Surgery","Inpatient Care","Specialist Consultations"],clinic:["General Practice","Consultations","Health Checks","Vaccinations"],pharmacy:["Prescriptions","Medications","Health Products","Consultations"],emergency:["Emergency Response","Urgent Care","24/7 Service"]};return t[e]||["General Medical Services"]},addRealFacilityMarkers(){this.clearMarkers(),this.searchResults.forEach(e=>{const t=this.createCustomIcon(e.type),a=Ci().marker([e.lat,e.lng],{icon:t}).addTo(this.map).bindPopup(`\n            <div class="facility-popup">\n              <h6><i class="${this.getFacilityIcon(e.type)}"></i> ${e.name}</h6>\n              <p class="mb-1">${e.address}</p>\n              <div class="d-flex justify-content-between align-items-center">\n                <span class="badge" style="background-color: ${this.getFacilityColor(e.type)}">${e.type}</span>\n                <span class="text-muted small">★ ${e.rating}/5</span>\n              </div>\n              <p class="mb-1"><i class="fas fa-route"></i> ${e.distance}km away</p>\n              <p class="mb-1"><i class="fas fa-clock"></i> ${e.hours}</p>\n              ${"Phone not available"!==e.phone?`<p class="mb-1"><i class="fas fa-phone"></i> ${e.phone}</p>`:""}\n              ${e.website?`<p class="mb-1"><a href="${e.website}" target="_blank"><i class="fas fa-globe"></i> Website</a></p>`:""}\n              <div class="mt-2">\n                <button class="btn btn-primary btn-sm me-2" onclick="window.selectFacilityFromMap(${e.id})">\n                  Select\n                </button>\n                <button class="btn btn-success btn-sm" onclick="window.getDirectionsFromMap(${e.id})">\n                  Directions\n                </button>\n              </div>\n            </div>\n          `);this.markers.push(a),a.on("click",()=>{this.selectFacility(e)})})},selectFacility(e){this.selectedFacility=e,this.map&&(this.map.setView([e.lat,e.lng],16),this.markers.forEach(t=>{const a=this.allFacilities.find(e=>e.lat===t.getLatLng().lat&&e.lng===t.getLatLng().lng);a&&a.id===e.id&&t.openPopup()})),this.routeInfo=null},async getDirections(){if(this.selectedFacility)if(this.userLocation){this.loading=!0,this.loadingMessage="Calculating real route...";try{const e=`${this.userLocation.lng},${this.userLocation.lat}`,t=`${this.selectedFacility.lng},${this.selectedFacility.lat}`,a={driving:"driving",walking:"foot",bicycling:"bike"},s=a[this.travelMode]||"driving",i=await fetch(`https://router.project-osrm.org/route/v1/${s}/${e};${t}?overview=full&geometries=geojson&steps=true`);if(!i.ok)throw new Error("Routing service unavailable");const l=await i.json();if(!(l.routes&&l.routes.length>0))throw new Error("No route found");{const e=l.routes[0],t=(e.distance/1e3).toFixed(1),a=Math.round(e.duration/60),s=e.legs[0].steps.map(e=>{const t=e.maneuver.instruction||"Continue",a=(e.distance/1e3).toFixed(1);return`${t} (${a}km)`}).slice(0,8);this.routeInfo={distance:`${t}km`,duration:`${a} min`,mode:this.travelMode,steps:s,geometry:e.geometry},this.drawRouteOnMap(e.geometry),console.log("Real route calculated successfully")}}catch(e){console.error("Error calculating route:",e);const t=parseFloat(this.selectedFacility.distance);let a;switch(this.travelMode){case"walking":a=Math.round(12*t);break;case"bicycling":a=Math.round(4*t);break;case"transit":a=Math.round(6*t);break;default:a=Math.round(3*t)}this.routeInfo={distance:`${t}km`,duration:`${a} min`,mode:this.travelMode,steps:["Route calculation failed - showing estimated directions",`Head towards ${this.selectedFacility.name}`,`Travel approximately ${t}km`,"Arrive at destination"],isEstimated:!0},alert("Unable to calculate exact route. Showing estimated directions.")}this.loading=!1}else alert("Unable to get your location. Please enable location services.");else alert("Please select a facility first!")},drawRouteOnMap(e){this.routeLayer&&this.map.removeLayer(this.routeLayer),this.routeLayer=Ci().geoJSON(e,{style:{color:"#3388ff",weight:5,opacity:.8,dashArray:"10, 5"}}).addTo(this.map);const t=this.routeLayer.getBounds();this.map.fitBounds(t,{padding:[20,20]})},startNavigation(){if(!this.selectedFacility)return void alert("Please select a facility first.");const e=`${this.selectedFacility.lat},${this.selectedFacility.lng}`,t=`https://www.google.com/maps/dir/?api=1&destination=${e}&travelmode=${this.travelMode}`;window.open(t,"_blank")},getTravelMode(){return this.travelMode||"driving"},getFacilityIcon(e){const t={hospital:"fas fa-hospital",clinic:"fas fa-clinic-medical",pharmacy:"fas fa-pills",emergency:"fas fa-ambulance"};return t[e]||"fas fa-map-marker-alt"},calculateDistance(e,t,a,s){const i=6371,l=(a-e)*Math.PI/180,n=(s-t)*Math.PI/180,o=Math.sin(l/2)*Math.sin(l/2)+Math.cos(e*Math.PI/180)*Math.cos(a*Math.PI/180)*Math.sin(n/2)*Math.sin(n/2),r=2*Math.atan2(Math.sqrt(o),Math.sqrt(1-o));return i*r},zoomIn(){this.map&&this.map.zoomIn()},zoomOut(){this.map&&this.map.zoomOut()},resetView(){if(this.map){const e=this.userLocation||{lat:-37.8136,lng:144.9631};this.map.setView([e.lat,e.lng],13)}},setupGlobalFunctions(){window.selectFacilityFromMap=e=>{const t=this.searchResults.find(t=>t.id===e)||this.allFacilities.find(t=>t.id===e);t&&this.selectFacility(t)},window.getDirectionsFromMap=e=>{const t=this.searchResults.find(t=>t.id===e)||this.allFacilities.find(t=>t.id===e);t&&(this.selectFacility(t),setTimeout(()=>{this.getDirections()},100))}},startNavigation(){if(!this.selectedFacility)return void alert("Please select a facility first.");const e=`${this.selectedFacility.lat},${this.selectedFacility.lng}`,t=(encodeURIComponent(this.selectedFacility.name),/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent));if(t){const t=[{name:"Google Maps",url:`https://www.google.com/maps/dir/?api=1&destination=${e}&travelmode=${this.travelMode}`},{name:"Apple Maps",url:`http://maps.apple.com/?daddr=${e}&t=m`},{name:"Waze",url:`https://waze.com/ul?ll=${e}&navigate=yes`}],a=confirm("Open navigation in external app?\n\nClick OK for Google Maps\nClick Cancel to choose from other options");if(a)window.open(t[0].url,"_blank");else{let e="Choose your navigation app:\n\n";t.forEach((t,a)=>{e+=`${a+1}. ${t.name}\n`});const a=prompt(e+"\nEnter number (1-3):"),s=parseInt(a)-1;s>=0&&s<t.length&&window.open(t[s].url,"_blank")}}else{const t=`https://www.google.com/maps/dir/?api=1&destination=${e}&travelmode=${this.travelMode}`;window.open(t,"_blank")}},shareFacilityLocation(){if(!this.selectedFacility)return void alert("Please select a facility first.");const e=`Check out this medical facility: ${this.selectedFacility.name}\nAddress: ${this.selectedFacility.address}\nDistance: ${this.selectedFacility.distance}km away`,t=`https://www.google.com/maps/search/?api=1&query=${this.selectedFacility.lat},${this.selectedFacility.lng}`;if(navigator.share)navigator.share({title:this.selectedFacility.name,text:e,url:t}).catch(console.error);else{const a=`${e}\nLocation: ${t}`;navigator.clipboard?navigator.clipboard.writeText(a).then(()=>{alert("Facility information copied to clipboard!")}).catch(()=>{this.fallbackCopyToClipboard(a)}):this.fallbackCopyToClipboard(a)}},fallbackCopyToClipboard(e){const t=document.createElement("textarea");t.value=e,document.body.appendChild(t),t.select();try{document.execCommand("copy"),alert("Facility information copied to clipboard!")}catch(a){alert("Unable to copy to clipboard. Please copy manually:\n\n"+e)}document.body.removeChild(t)}},mounted(){this.setupGlobalFunctions(),this.checkMobileDevice(),this.initializeMap(),this.getCurrentLocation(),setTimeout(()=>{this.searchNearbyFacilities()},2e3),window.addEventListener("resize",this.handleResize)},beforeUnmount(){this.map&&this.map.remove(),window.removeEventListener("resize",this.handleResize)}},Fi=(0,x.A)(xi,[["render",Li],["__scopeId","data-v-032da012"]]),_i=Fi,Pi={class:"container d-flex justify-content-center"},Ai={class:"rating-card w-100",style:{"max-width":"600px"}},Si={class:"rating-header text-center mb-3"},Ei={class:"specialty"},Mi={class:"languages mt-2"},Ri={class:"rating-body"},Di={class:"description text-center"},Ii={class:"current-rating text-center mb-3"},Ti={class:"stars"},$i={class:"rating-text"},Oi={key:0,class:"rating-input text-center"},Wi={class:"stars-input"},Xi=["onMouseover","onClick"],Ui={key:0,class:"text-success mt-2"},Ni={class:"rating-stats text-center mt-3"},Vi={__name:"RatingCard",props:{doctor:Object,canRate:Boolean},emits:["rate"],setup(e,{emit:t}){const a=e,s=t,o=(0,n.KR)(0),r=(0,n.KR)(0),c=(0,n.KR)(a.doctor.totalRatings||0),d=(0,i.EW)(()=>a.doctor.averageRating||0);(0,i.sV)(()=>{const e=JSON.parse(localStorage.getItem("doctorRatings")||"{}");e[a.doctor.id]&&(a.doctor.totalRatings=e[a.doctor.id].totalRatings,a.doctor.averageRating=e[a.doctor.id].averageRating,o.value=e[a.doctor.id].userRating||0,r.value=o.value)});const u=e=>{o.value=e;const t=JSON.parse(localStorage.getItem("doctorRatings")||"{}"),i=a.doctor.id;if(t[i]){const a=t[i].totalRatings,s=t[i].averageRating,l=a+1,n=(s*a+e)/l;t[i]={totalRatings:l,averageRating:n,userRating:e}}else t[i]={totalRatings:1,averageRating:e,userRating:e};localStorage.setItem("doctorRatings",JSON.stringify(t)),a.doctor.totalRatings=t[i].totalRatings,a.doctor.averageRating=t[i].averageRating,s("rate",{doctorId:i,rating:e})};return(t,a)=>((0,i.uX)(),(0,i.CE)("div",Pi,[(0,i.Lk)("div",Ai,[(0,i.Lk)("div",Si,[(0,i.Lk)("h3",null,(0,l.v_)(e.doctor.name),1),(0,i.Lk)("p",Ei,(0,l.v_)(e.doctor.specialty),1),(0,i.Lk)("div",Mi,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(e.doctor.languages,e=>((0,i.uX)(),(0,i.CE)("span",{class:"badge bg-info me-1",key:e},(0,l.v_)(e),1))),128))])]),(0,i.Lk)("div",Ri,[(0,i.Lk)("p",Di,(0,l.v_)(e.doctor.description),1),(0,i.Lk)("div",Ii,[(0,i.Lk)("span",Ti,[((0,i.uX)(),(0,i.CE)(i.FK,null,(0,i.pI)(5,e=>(0,i.Lk)("i",{key:e,class:(0,l.C4)(["bi",e<=d.value?"bi-star-fill":"bi-star"]),style:(0,l.Tr)({color:e<=d.value?"#ffc107":"#6c757d"})},null,6)),64))]),(0,i.Lk)("span",$i,(0,l.v_)(d.value.toFixed(1))+"/5.0",1)]),e.canRate?((0,i.uX)(),(0,i.CE)("div",Oi,[a[1]||(a[1]=(0,i.Lk)("p",{class:"mb-2"},"Rate this doctor:",-1)),(0,i.Lk)("div",Wi,[((0,i.uX)(),(0,i.CE)(i.FK,null,(0,i.pI)(5,e=>(0,i.Lk)("i",{key:e,class:(0,l.C4)(["bi",e<=r.value?"bi-star-fill":"bi-star"]),onMouseover:t=>r.value=e,onMouseleave:a[0]||(a[0]=e=>r.value=o.value),onClick:t=>u(e),style:(0,l.Tr)({color:e<=r.value?"#ffc107":"#6c757d"})},null,46,Xi)),64))]),o.value>0?((0,i.uX)(),(0,i.CE)("p",Ui,"Thank you for rating!")):(0,i.Q3)("",!0)])):(0,i.Q3)("",!0),(0,i.Lk)("div",Ni,[(0,i.Lk)("p",null,"Total Ratings: "+(0,l.v_)(c.value),1)])])])]))}},ji=(0,x.A)(Vi,[["__scopeId","data-v-1919c672"]]),Hi=ji,qi={class:"doctor-rating"},zi={class:"container"},Ki={class:"search-filter mb-4"},Bi={class:"row g-3"},Qi={class:"col-md-6"},Gi={class:"input-group"},Ji={class:"col-md-3"},Zi=["value"],Yi={class:"col-md-3"},el=["value"],tl={class:"row"},al={key:0,class:"text-center my-5"},sl={__name:"DoctorRating",setup(e){const t=(0,r.rd)(),a=(0,n.KR)([{id:1,name:"Dr. Zhang",specialty:"General Practitioner",averageRating:4.5,totalRatings:128,languages:["Chinese","English"],description:"20 years of experience in family medicine and chronic disease management."},{id:2,name:"Dr. Chen",specialty:"Pediatrician",averageRating:4.8,totalRatings:256,languages:["Chinese","English","Cantonese"],description:"Experienced pediatrician specializing in child health and vaccination."},{id:3,name:"Dr. Smith",specialty:"Cardiologist",averageRating:4.6,totalRatings:182,languages:["English","Spanish"],description:"Cardiovascular expert focused on heart disease prevention and treatment."},{id:4,name:"Dr. Li",specialty:"Physician",averageRating:4.7,totalRatings:145,languages:["Chinese","English"],description:"Internal medicine specialist handling common diseases and chronic care."}]),o=(0,n.KR)(""),c=(0,n.KR)(""),d=(0,n.KR)(""),u=(0,n.KR)(!1);(0,i.sV)(()=>{const e=localStorage.getItem("userInfo");u.value=!!e});const m=(0,i.EW)(()=>Array.from(new Set(a.value.map(e=>e.specialty)))),h=(0,i.EW)(()=>{const e=new Set;return a.value.forEach(t=>t.languages.forEach(t=>e.add(t))),[...e]}),p=(0,i.EW)(()=>a.value.filter(e=>{const t=!o.value||e.name.toLowerCase().includes(o.value.toLowerCase())||e.specialty.toLowerCase().includes(o.value.toLowerCase()),a=!c.value||e.specialty===c.value,s=!d.value||e.languages.includes(d.value);return t&&a&&s})),g=()=>{},b=({doctorId:e,rating:s})=>{const i=localStorage.getItem("userInfo");if(!i)return void t.push({path:"/login",query:{redirect:"/doctor-rating"}});const l=a.value.find(t=>t.id===e);if(l){const t=l.totalRatings+1,a=(l.averageRating*l.totalRatings+s)/t;l.totalRatings=t,l.averageRating=a;const i=JSON.parse(localStorage.getItem("doctorRatings")||"{}");i[e]={averageRating:l.averageRating,totalRatings:l.totalRatings},localStorage.setItem("doctorRatings",JSON.stringify(i)),alert("Thanks for your rating!")}};return(e,t)=>((0,i.uX)(),(0,i.CE)("div",qi,[(0,i.Lk)("div",zi,[t[7]||(t[7]=(0,i.Lk)("h1",{class:"text-center mb-5"},"Find a Doctor",-1)),(0,i.Lk)("div",Ki,[(0,i.Lk)("div",Bi,[(0,i.Lk)("div",Qi,[(0,i.Lk)("div",Gi,[t[3]||(t[3]=(0,i.Lk)("span",{class:"input-group-text"},[(0,i.Lk)("i",{class:"bi bi-search"})],-1)),(0,i.bo)((0,i.Lk)("input",{type:"text",class:"form-control","onUpdate:modelValue":t[0]||(t[0]=e=>o.value=e),placeholder:"Search by name or specialty...",onInput:g},null,544),[[s.Jo,o.value]])])]),(0,i.Lk)("div",Ji,[(0,i.bo)((0,i.Lk)("select",{class:"form-select","onUpdate:modelValue":t[1]||(t[1]=e=>c.value=e),onChange:g},[t[4]||(t[4]=(0,i.Lk)("option",{value:""},"All Specialties",-1)),((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(m.value,e=>((0,i.uX)(),(0,i.CE)("option",{key:e,value:e},(0,l.v_)(e),9,Zi))),128))],544),[[s.u1,c.value]])]),(0,i.Lk)("div",Yi,[(0,i.bo)((0,i.Lk)("select",{class:"form-select","onUpdate:modelValue":t[2]||(t[2]=e=>d.value=e),onChange:g},[t[5]||(t[5]=(0,i.Lk)("option",{value:""},"All Languages",-1)),((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(h.value,e=>((0,i.uX)(),(0,i.CE)("option",{key:e,value:e},(0,l.v_)(e),9,el))),128))],544),[[s.u1,d.value]])])])]),(0,i.Lk)("div",tl,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(p.value,e=>((0,i.uX)(),(0,i.CE)("div",{key:e.id,class:"col-md-6 mb-4"},[(0,i.bF)(Hi,{doctor:e,"can-rate":u.value,onRate:b},null,8,["doctor","can-rate"])]))),128))]),0===p.value.length?((0,i.uX)(),(0,i.CE)("div",al,t[6]||(t[6]=[(0,i.Lk)("p",null,"No matching doctors found.",-1)]))):(0,i.Q3)("",!0)])]))}},il=(0,x.A)(sl,[["__scopeId","data-v-131f7337"]]),ll=il,nl={class:"container"},ol={class:"banner-content"},rl={class:"banner-text"},cl={__name:"RoleBanner",props:{role:{type:String,required:!0,validator:e=>["admin","user"].includes(e)},username:{type:String,required:!0}},setup(e){const t=e,a=(0,i.EW)(()=>`role-banner-${t.role}`),s=(0,i.EW)(()=>({admin:"bi bi-shield-check",user:"bi bi-person"}[t.role])),n=(0,i.EW)(()=>`欢迎回来，${t.username}${"admin"===t.role?" (管理员)":""}`),o=(0,i.EW)(()=>({admin:"您可以管理系统内容和用户数据",user:"浏览健康资讯，为医生评分，管理个人信息"}[t.role]));return(e,t)=>((0,i.uX)(),(0,i.CE)("div",{class:(0,l.C4)(["role-banner",a.value])},[(0,i.Lk)("div",nl,[(0,i.Lk)("div",ol,[(0,i.Lk)("i",{class:(0,l.C4)(s.value)},null,2),(0,i.Lk)("div",rl,[(0,i.Lk)("h4",null,(0,l.v_)(n.value),1),(0,i.Lk)("p",null,(0,l.v_)(o.value),1)])])])],2))}},dl=(0,x.A)(cl,[["__scopeId","data-v-08176ec8"]]),ul=dl,ml={class:"admin-panel"},hl={class:"container"},pl={class:"admin-nav mb-4"},gl={class:"btn-group"},bl=["onClick"],vl={class:"content-area"},fl={key:0,class:"panel"},kl={class:"table-responsive"},yl={class:"table"},Ll=["onClick"],wl={key:1,class:"panel"},Cl={class:"table-responsive"},xl={class:"table"},Fl={key:2,class:"panel"},_l={class:"table-responsive"},Pl={class:"table"},Al="管理员",Sl={__name:"AdminPanel",setup(e){const t=(0,n.KR)("users"),a=[{id:"users",name:"用户管理"},{id:"articles",name:"文章管理"},{id:"ratings",name:"评分管理"}],s=(0,n.KR)([{id:1,username:"user1",email:"user1@example.com",registerDate:"2025-07-01",active:!0}]),o=(0,n.KR)([{id:1,title:"保持健康的饮食习惯",category:"饮食健康",date:"2025-07-20",published:!0}]),r=(0,n.KR)([{doctorId:1,doctorName:"张医生",totalRatings:128,averageRating:4.5,lastRatingDate:"2025-07-21"}]),c=e=>new Date(e).toLocaleDateString("zh-CN"),d=e=>{e.active=!e.active},u=()=>{};return(e,n)=>((0,i.uX)(),(0,i.CE)("div",ml,[(0,i.Lk)("div",hl,[(0,i.bF)(ul,{role:"admin",username:Al}),(0,i.Lk)("div",pl,[(0,i.Lk)("div",gl,[((0,i.uX)(),(0,i.CE)(i.FK,null,(0,i.pI)(a,e=>(0,i.Lk)("button",{key:e.id,class:(0,l.C4)(["btn",[t.value===e.id?"btn-primary":"btn-outline-primary"]]),onClick:a=>t.value=e.id},(0,l.v_)(e.name),11,bl)),64))])]),(0,i.Lk)("div",vl,["users"===t.value?((0,i.uX)(),(0,i.CE)("div",fl,[n[2]||(n[2]=(0,i.Lk)("h3",{class:"mb-4"},"用户管理",-1)),(0,i.Lk)("div",kl,[(0,i.Lk)("table",yl,[n[1]||(n[1]=(0,i.Lk)("thead",null,[(0,i.Lk)("tr",null,[(0,i.Lk)("th",null,"ID"),(0,i.Lk)("th",null,"用户名"),(0,i.Lk)("th",null,"邮箱"),(0,i.Lk)("th",null,"注册时间"),(0,i.Lk)("th",null,"状态"),(0,i.Lk)("th",null,"操作")])],-1)),(0,i.Lk)("tbody",null,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(s.value,e=>((0,i.uX)(),(0,i.CE)("tr",{key:e.id},[(0,i.Lk)("td",null,(0,l.v_)(e.id),1),(0,i.Lk)("td",null,(0,l.v_)(e.username),1),(0,i.Lk)("td",null,(0,l.v_)(e.email),1),(0,i.Lk)("td",null,(0,l.v_)(c(e.registerDate)),1),(0,i.Lk)("td",null,[(0,i.Lk)("span",{class:(0,l.C4)(["badge",e.active?"bg-success":"bg-danger"])},(0,l.v_)(e.active?"正常":"禁用"),3)]),(0,i.Lk)("td",null,[n[0]||(n[0]=(0,i.Lk)("button",{class:"btn btn-sm btn-outline-primary me-2"},"编辑",-1)),(0,i.Lk)("button",{class:(0,l.C4)(["btn btn-sm",[e.active?"btn-outline-danger":"btn-outline-success"]]),onClick:t=>d(e)},(0,l.v_)(e.active?"禁用":"启用"),11,Ll)])]))),128))])])])])):(0,i.Q3)("",!0),"articles"===t.value?((0,i.uX)(),(0,i.CE)("div",wl,[(0,i.Lk)("div",{class:"d-flex justify-content-between align-items-center mb-4"},[n[3]||(n[3]=(0,i.Lk)("h3",null,"文章管理",-1)),(0,i.Lk)("button",{class:"btn btn-primary",onClick:u}," 新建文章 ")]),(0,i.Lk)("div",Cl,[(0,i.Lk)("table",xl,[n[5]||(n[5]=(0,i.Lk)("thead",null,[(0,i.Lk)("tr",null,[(0,i.Lk)("th",null,"ID"),(0,i.Lk)("th",null,"标题"),(0,i.Lk)("th",null,"分类"),(0,i.Lk)("th",null,"发布时间"),(0,i.Lk)("th",null,"状态"),(0,i.Lk)("th",null,"操作")])],-1)),(0,i.Lk)("tbody",null,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(o.value,e=>((0,i.uX)(),(0,i.CE)("tr",{key:e.id},[(0,i.Lk)("td",null,(0,l.v_)(e.id),1),(0,i.Lk)("td",null,(0,l.v_)(e.title),1),(0,i.Lk)("td",null,(0,l.v_)(e.category),1),(0,i.Lk)("td",null,(0,l.v_)(c(e.date)),1),(0,i.Lk)("td",null,[(0,i.Lk)("span",{class:(0,l.C4)(["badge",e.published?"bg-success":"bg-warning"])},(0,l.v_)(e.published?"已发布":"草稿"),3)]),n[4]||(n[4]=(0,i.Lk)("td",null,[(0,i.Lk)("button",{class:"btn btn-sm btn-outline-primary me-2"},"编辑"),(0,i.Lk)("button",{class:"btn btn-sm btn-outline-danger"},"删除")],-1))]))),128))])])])])):(0,i.Q3)("",!0),"ratings"===t.value?((0,i.uX)(),(0,i.CE)("div",Fl,[n[8]||(n[8]=(0,i.Lk)("h3",{class:"mb-4"},"评分管理",-1)),(0,i.Lk)("div",_l,[(0,i.Lk)("table",Pl,[n[7]||(n[7]=(0,i.Lk)("thead",null,[(0,i.Lk)("tr",null,[(0,i.Lk)("th",null,"医生"),(0,i.Lk)("th",null,"总评分数"),(0,i.Lk)("th",null,"平均分"),(0,i.Lk)("th",null,"最近评分"),(0,i.Lk)("th",null,"操作")])],-1)),(0,i.Lk)("tbody",null,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(r.value,e=>((0,i.uX)(),(0,i.CE)("tr",{key:e.doctorId},[(0,i.Lk)("td",null,(0,l.v_)(e.doctorName),1),(0,i.Lk)("td",null,(0,l.v_)(e.totalRatings),1),(0,i.Lk)("td",null,(0,l.v_)(e.averageRating.toFixed(1)),1),(0,i.Lk)("td",null,(0,l.v_)(c(e.lastRatingDate)),1),n[6]||(n[6]=(0,i.Lk)("td",null,[(0,i.Lk)("button",{class:"btn btn-sm btn-outline-primary"},"查看详情")],-1))]))),128))])])])])):(0,i.Q3)("",!0)])])]))}},El=(0,x.A)(Sl,[["__scopeId","data-v-0b89d86e"]]),Ml=El,Rl=[{path:"/",name:"Home",component:be},{path:"/home",redirect:"/"},{path:"/login",name:"Login",component:Me},{path:"/register",name:"Register",component:st},{path:"/dashboard",name:"Dashboard",component:wt,meta:{requiresAuth:!0}},{path:"/health-articles",name:"HealthArticles",component:Ta,meta:{requiresAuth:!1}},{path:"/health-map",name:"HealthMap",component:_i,meta:{requiresAuth:!1}},{path:"/admin/dashboard",name:"AdminDashboard",component:()=>a.e(430).then(a.bind(a,6430)),meta:{requiresAuth:!0,requiresAdmin:!0}},{path:"/doctor-rating",name:"DoctorRating",component:ll,meta:{requiresAuth:!1,requiresAuthForActions:!0}},{path:"/resources",name:"Resources",component:()=>a.e(284).then(a.bind(a,5284)),meta:{requiresAuth:!1,requiresAuthForActions:!0}},{path:"/consultation",name:"Consultation",component:()=>a.e(721).then(a.bind(a,6721)),meta:{requiresAuth:!0}},{path:"/contact",name:"Contact",component:()=>a.e(987).then(a.bind(a,8987))},{path:"/email-demo",name:"EmailDemo",component:()=>a.e(523).then(a.bind(a,7523))},{path:"/doctors",name:"DoctorList",component:()=>Promise.all([a.e(454),a.e(53)]).then(a.bind(a,8053))},{path:"/appointments",name:"AppointmentHistory",component:()=>Promise.all([a.e(454),a.e(379)]).then(a.bind(a,4379)),meta:{requiresAuth:!0}},{path:"/admin/resources",name:"AdminResources",component:()=>a.e(39).then(a.bind(a,39)),meta:{requiresAuth:!0,requiresAdmin:!0}},{path:"/admin/ratings",name:"AdminRatings",component:()=>a.e(242).then(a.bind(a,2242)),meta:{requiresAuth:!0,requiresAdmin:!0}},{path:"/admin/users",name:"UserManagement",component:()=>a.e(604).then(a.bind(a,6604)),meta:{requiresAuth:!0,requiresAdmin:!0}},{path:"/admin/settings",name:"Settings",component:()=>a.e(925).then(a.bind(a,1925)),meta:{requiresAuth:!0,requiresAdmin:!0}},{path:"/admin",name:"AdminPanel",component:Ml,meta:{requiresAuth:!0,requiresAdmin:!0}}],Dl=(0,r.aE)({history:(0,r.LA)(),routes:Rl});Dl.beforeEach((e,t,a)=>{const s=(0,c.n)(),i=s.isAuthenticated;return console.log("路由守卫检查:",{to:e.path,isAuthenticated:i,requiresAuth:e.meta.requiresAuth}),i&&"/login"===e.path?(console.log("用户已认证，重定向到仪表板"),void a({path:"/dashboard"})):e.meta.requiresAuth&&!i?(console.log("需要认证的路由，重定向到登录页"),void a({path:"/login",query:{redirect:e.fullPath}})):(console.log("允许访问:",e.path),void a())});const Il=Dl;var Tl=a(5615),$l=a(1656),Ol=a(6158),Wl=a(2835),Xl=a(4512),Ul=a(4842),Nl=a(3244),Vl=a(2812),jl=a(1081),Hl=a(1637),ql=a(9225);const zl=(0,s.Ef)($),Kl=(0,Tl.Ey)();zl.use(Kl),zl.use(Il),zl.use($l.Ay),zl.use(Vl.A),zl.component("DataTable",Ol.A),zl.component("Column",Wl.A),zl.component("Button",Xl.A),zl.component("InputText",Ul.A),zl.component("Toast",Nl.A),zl.component("Card",jl.A),zl.component("Dialog",Hl.A),zl.component("Password",ql.A),zl.mount("#app");const Bl=(0,c.n)();Bl.initializeAuth().then(()=>{console.log("App挂载后的认证状态初始化完成:",{user:!!Bl.user,isAuthenticated:Bl.isAuthenticated}),Bl.isAuthenticated&&"/login"===Il.currentRoute.value.path&&(console.log("用户已登录，从登录页重定向到仪表板"),Il.push("/dashboard"))})},7518:(e,t,a)=>{a.d(t,{n:()=>n});var s=a(5615),i=a(3556),l=a(7496);const n=(0,s.nY)("auth",{state:()=>({user:null,isAuthenticated:!1,loading:!1,error:null,initialized:!1}),actions:{setUser(e){console.log("设置用户状态:",e),this.user=e,this.isAuthenticated=!!e,console.log("认证状态更新:",{user:this.user,isAuthenticated:this.isAuthenticated})},setLoading(e){this.loading=e},setError(e){this.error=e},initializeAuth(){return this.initialized?(console.log("认证已初始化，返回当前用户:",!!this.user),Promise.resolve(this.user)):new Promise(e=>{console.log("开始初始化Firebase认证状态...");const t=(0,l.hg)(i.j2,a=>{console.log("Firebase认证状态变化:",!!a),this.initialized||(this.setUser(a),this.initialized=!0,e(a)),t()})})},async login(e,t){try{this.setLoading(!0),this.setError(null),console.log("开始Firebase登录:",e);const a=await(0,l.x9)(i.j2,e,t);return console.log("Firebase登录成功:",a.user),this.setUser(a.user),this.initialized=!0,a.user}catch(a){throw console.error("Firebase登录错误:",a),"auth/configuration-not-found"===a.code?this.setError("Firebase Authentication未配置。请确保在Firebase控制台中启用了Authentication服务。"):"auth/user-not-found"===a.code?this.setError("用户不存在，请先注册。"):"auth/wrong-password"===a.code?this.setError("密码错误。"):"auth/invalid-email"===a.code?this.setError("邮箱格式不正确。"):this.setError(a.message),a}finally{this.setLoading(!1)}},async register(e,t){try{this.setLoading(!0),this.setError(null),console.log("开始Firebase注册:",e);const a=await(0,l.eJ)(i.j2,e,t);return console.log("Firebase注册成功:",a.user),this.setUser(a.user),a.user}catch(a){throw console.error("Firebase注册错误:",a),"auth/configuration-not-found"===a.code?this.setError("Firebase Authentication未配置。请确保在Firebase控制台中启用了Authentication服务。"):"auth/email-already-in-use"===a.code?this.setError("该邮箱已被注册，请使用其他邮箱或直接登录。"):"auth/weak-password"===a.code?this.setError("密码太弱，请使用至少6位字符。"):"auth/invalid-email"===a.code?this.setError("邮箱格式不正确。"):this.setError(a.message),a}finally{this.setLoading(!1)}},async logout(){try{await(0,l.CI)(i.j2),this.setUser(null)}catch(e){throw this.setError(e.message),e}}},getters:{getCurrentUser:e=>e.user,getIsAuthenticated:e=>{const t=e.isAuthenticated&&!!e.user;return console.log("检查认证状态:",{isAuthenticated:e.isAuthenticated,hasUser:!!e.user,result:t}),t}}});(0,s.nY)("app",{state:()=>({isOnline:navigator.onLine,offlineData:JSON.parse(localStorage.getItem("offlineData"))||[],doctors:[],appointments:[]}),actions:{setOnlineStatus(e){this.isOnline=e,e&&this.offlineData.length>0&&this.syncOfflineData()},addOfflineData(e){this.offlineData.push({...e,timestamp:Date.now()}),localStorage.setItem("offlineData",JSON.stringify(this.offlineData))},async syncOfflineData(){try{console.log("同步离线数据:",this.offlineData),this.offlineData=[],localStorage.removeItem("offlineData")}catch(e){console.error("同步离线数据失败:",e)}},generateDoctors(){const e=["内科","外科","儿科","妇科","骨科","眼科","皮肤科","心理科"],t=["北京协和医院","上海华山医院","广州中山医院","深圳人民医院"],a=["张医生","李医生","王医生","刘医生","陈医生","杨医生","赵医生","孙医生"];this.doctors=Array.from({length:50},(s,i)=>({id:i+1,name:a[Math.floor(Math.random()*a.length)]+(i+1),specialty:e[Math.floor(Math.random()*e.length)],hospital:t[Math.floor(Math.random()*t.length)],rating:(2*Math.random()+3).toFixed(1),experience:Math.floor(20*Math.random())+5}))},generateAppointments(){this.appointments=Array.from({length:20},(e,t)=>({id:t+1,doctorName:"张医生"+(t+1),date:new Date(Date.now()+30*Math.random()*24*60*60*1e3).toLocaleDateString(),time:["09:00","10:00","14:00","15:00"][Math.floor(4*Math.random())],status:["已预约","已完成","已取消"][Math.floor(3*Math.random())],type:"门诊"}))}}})}},t={};function a(s){var i=t[s];if(void 0!==i)return i.exports;var l=t[s]={exports:{}};return e[s].call(l.exports,l,l.exports,a),l.exports}a.m=e,(()=>{var e=[];a.O=(t,s,i,l)=>{if(!s){var n=1/0;for(d=0;d<e.length;d++){for(var[s,i,l]=e[d],o=!0,r=0;r<s.length;r++)(!1&l||n>=l)&&Object.keys(a.O).every(e=>a.O[e](s[r]))?s.splice(r--,1):(o=!1,l<n&&(n=l));if(o){e.splice(d--,1);var c=i();void 0!==c&&(t=c)}}return t}l=l||0;for(var d=e.length;d>0&&e[d-1][2]>l;d--)e[d]=e[d-1];e[d]=[s,i,l]}})(),(()=>{a.n=e=>{var t=e&&e.__esModule?()=>e["default"]:()=>e;return a.d(t,{a:t}),t}})(),(()=>{var e,t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__;a.t=function(s,i){if(1&i&&(s=this(s)),8&i)return s;if("object"===typeof s&&s){if(4&i&&s.__esModule)return s;if(16&i&&"function"===typeof s.then)return s}var l=Object.create(null);a.r(l);var n={};e=e||[null,t({}),t([]),t(t)];for(var o=2&i&&s;("object"==typeof o||"function"==typeof o)&&!~e.indexOf(o);o=t(o))Object.getOwnPropertyNames(o).forEach(e=>n[e]=()=>s[e]);return n["default"]=()=>s,a.d(l,n),l}})(),(()=>{a.d=(e,t)=>{for(var s in t)a.o(t,s)&&!a.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:t[s]})}})(),(()=>{a.f={},a.e=e=>Promise.all(Object.keys(a.f).reduce((t,s)=>(a.f[s](e,t),t),[]))})(),(()=>{a.u=e=>"js/"+e+"."+{39:"74a22e06",53:"3f837f55",242:"23bc6b20",284:"0300ee2e",332:"76789f9b",354:"b5e53cc6",379:"fb558873",430:"964ba51e",454:"21e35c36",523:"bfcfb772",604:"78b5421f",721:"977c5ffd",838:"1c58552a",925:"1b65a896",987:"622dc6be"}[e]+".js"})(),(()=>{a.miniCssF=e=>"css/"+e+"."+{39:"fdb009a5",53:"a336950f",242:"441e9004",284:"0cff748a",379:"a7420013",430:"59079cfb",523:"f514e63d",604:"b9e538fa",721:"634a4ece",925:"a184b92d",987:"00c74191"}[e]+".css"})(),(()=>{a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()})(),(()=>{a.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t)})(),(()=>{var e={},t="healthypathway:";a.l=(s,i,l,n)=>{if(e[s])e[s].push(i);else{var o,r;if(void 0!==l)for(var c=document.getElementsByTagName("script"),d=0;d<c.length;d++){var u=c[d];if(u.getAttribute("src")==s||u.getAttribute("data-webpack")==t+l){o=u;break}}o||(r=!0,o=document.createElement("script"),o.charset="utf-8",o.timeout=120,a.nc&&o.setAttribute("nonce",a.nc),o.setAttribute("data-webpack",t+l),o.src=s),e[s]=[i];var m=(t,a)=>{o.onerror=o.onload=null,clearTimeout(h);var i=e[s];if(delete e[s],o.parentNode&&o.parentNode.removeChild(o),i&&i.forEach(e=>e(a)),t)return t(a)},h=setTimeout(m.bind(null,void 0,{type:"timeout",target:o}),12e4);o.onerror=m.bind(null,o.onerror),o.onload=m.bind(null,o.onload),r&&document.head.appendChild(o)}}})(),(()=>{a.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}})(),(()=>{a.p="/FIT5032_A2_35523298_Yu-Zhong/"})(),(()=>{if("undefined"!==typeof document){var e=(e,t,s,i,l)=>{var n=document.createElement("link");n.rel="stylesheet",n.type="text/css",a.nc&&(n.nonce=a.nc);var o=a=>{if(n.onerror=n.onload=null,"load"===a.type)i();else{var s=a&&a.type,o=a&&a.target&&a.target.href||t,r=new Error("Loading CSS chunk "+e+" failed.\n("+s+": "+o+")");r.name="ChunkLoadError",r.code="CSS_CHUNK_LOAD_FAILED",r.type=s,r.request=o,n.parentNode&&n.parentNode.removeChild(n),l(r)}};return n.onerror=n.onload=o,n.href=t,s?s.parentNode.insertBefore(n,s.nextSibling):document.head.appendChild(n),n},t=(e,t)=>{for(var a=document.getElementsByTagName("link"),s=0;s<a.length;s++){var i=a[s],l=i.getAttribute("data-href")||i.getAttribute("href");if("stylesheet"===i.rel&&(l===e||l===t))return i}var n=document.getElementsByTagName("style");for(s=0;s<n.length;s++){i=n[s],l=i.getAttribute("data-href");if(l===e||l===t)return i}},s=s=>new Promise((i,l)=>{var n=a.miniCssF(s),o=a.p+n;if(t(n,o))return i();e(s,o,null,i,l)}),i={524:0};a.f.miniCss=(e,t)=>{var a={39:1,53:1,242:1,284:1,379:1,430:1,523:1,604:1,721:1,925:1,987:1};i[e]?t.push(i[e]):0!==i[e]&&a[e]&&t.push(i[e]=s(e).then(()=>{i[e]=0},t=>{throw delete i[e],t}))}}})(),(()=>{var e={524:0};a.f.j=(t,s)=>{var i=a.o(e,t)?e[t]:void 0;if(0!==i)if(i)s.push(i[2]);else{var l=new Promise((a,s)=>i=e[t]=[a,s]);s.push(i[2]=l);var n=a.p+a.u(t),o=new Error,r=s=>{if(a.o(e,t)&&(i=e[t],0!==i&&(e[t]=void 0),i)){var l=s&&("load"===s.type?"missing":s.type),n=s&&s.target&&s.target.src;o.message="Loading chunk "+t+" failed.\n("+l+": "+n+")",o.name="ChunkLoadError",o.type=l,o.request=n,i[1](o)}};a.l(n,r,"chunk-"+t,t)}},a.O.j=t=>0===e[t];var t=(t,s)=>{var i,l,[n,o,r]=s,c=0;if(n.some(t=>0!==e[t])){for(i in o)a.o(o,i)&&(a.m[i]=o[i]);if(r)var d=r(a)}for(t&&t(s);c<n.length;c++)l=n[c],a.o(e,l)&&e[l]&&e[l][0](),e[l]=0;return a.O(d)},s=self["webpackChunkhealthypathway"]=self["webpackChunkhealthypathway"]||[];s.forEach(t.bind(null,0)),s.push=t.bind(null,s.push.bind(s))})();var s=a.O(void 0,[504],()=>a(7254));s=a.O(s)})();