"use strict";(self["webpackChunkhealthypathway"]=self["webpackChunkhealthypathway"]||[]).push([[987],{8550:(e,a,t)=>{t.d(a,{JC:()=>d,aA:()=>m,j:()=>r});var s=t(4323);const o={NODE_ENV:"production",VUE_APP_FIREBASE_API_KEY:"demo-key",VUE_APP_FIREBASE_AUTH_DOMAIN:"demo-project.firebaseapp.com",VUE_APP_FIREBASE_PROJECT_ID:"demo-project",VUE_APP_FIREBASE_STORAGE_BUCKET:"demo-project.appspot.com",VUE_APP_FIREBASE_MESSAGING_SENDER_ID:"123456789",VUE_APP_FIREBASE_APP_ID:"demo-app-id",VUE_APP_TITLE:"HealthyPathway",BASE_URL:"/FIT5032_A2_35523298_Yu-Zhong/"}.VUE_APP_EMAIL_API_BASE||"http://localhost:3001",n=e=>{const a=new s["default"];a.setFont("helvetica"),a.setFontSize(20),a.setTextColor(52,152,219),a.text("HEALTHY PATHWAY",20,30),a.setFontSize(16),a.setTextColor(0,0,0),a.text("Appointment Confirmation",20,45),a.setLineWidth(.5),a.line(20,50,190,50),a.setFontSize(12),a.setFont("helvetica","bold"),a.text("APPOINTMENT DETAILS",20,65),a.setFont("helvetica","normal"),a.text(`Patient Name: ${e.patientName}`,20,80),a.text(`Email: ${e.patientEmail}`,20,95),a.text(`Doctor: ${e.doctorName}`,20,110),a.text(`Date: ${e.date}`,20,125),a.text(`Time: ${e.time}`,20,140),a.text(`Type: ${e.type||"General Consultation"}`,20,155),a.text(`Reference ID: ${e.id}`,20,170),e.language&&a.text(`Preferred Language: ${e.language}`,20,185),a.line(20,195,190,195),a.setFont("helvetica","bold"),a.text("IMPORTANT REMINDERS",20,210),a.setFont("helvetica","normal");const t=["• Please arrive 15 minutes before your appointment time","• Bring a valid photo ID and insurance card","• Bring a list of current medications","• Contact us at least 24 hours in advance if you need to reschedule","• Wear a mask and follow health protocols"];let o=225;return t.forEach(e=>{a.text(e,25,o),o+=12}),a.setFont("helvetica","bold"),a.text("CONTACT INFORMATION",20,o+10),a.setFont("helvetica","normal"),a.text("Phone: +1 (555) 123-4567",20,o+25),a.text("Email: info@healthypathway.com",20,o+40),a.text("Website: www.healthypathway.com",20,o+55),a},l=e=>new Promise((a,t)=>{const s=new FileReader;s.onload=()=>a(s.result.split(",")[1]),s.onerror=t,s.readAsDataURL(e)}),i=e=>e?e.replace(/\n/g,"<br>").replace(/\t/g,"&nbsp;&nbsp;&nbsp;&nbsp;"):"",c=async(e,a=null)=>{try{const s=`${o}/health`;try{const e=new AbortController,a=setTimeout(()=>e.abort(),3e3),t=await fetch(s,{method:"GET",signal:e.signal});if(clearTimeout(a),!t.ok)throw new Error("后端服务器不可用")}catch(t){return console.warn("后端服务器连接失败，启用演示模式:",t),a&&m(a),{success:!0,messageId:"demo-"+Date.now(),demo:!0,message:"演示模式：PDF已生成，实际部署时邮件会正常发送"}}let c=[];if(a){const e=n(a),t=e.output("blob"),s=await l(t);c.push({content:s,filename:`appointment_${a.id}.pdf`,type:"application/pdf"})}const d={to:e.to,toName:e.toName||"Patient",subject:e.subject,htmlContent:e.htmlContent||i(e.message),attachments:c},r=await fetch(`${o}/api/send-email`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(d)}),p=await r.json();if(r.ok&&p.success)return console.log("Email sent successfully:",p.messageId),{success:!0,messageId:p.messageId};throw new Error(p.error||"Failed to send email")}catch(s){return console.error("Email sending failed:",s),"TypeError"===s.name||s.message.includes("fetch")?(a&&m(a),{success:!0,messageId:"demo-"+Date.now(),demo:!0,message:"演示模式：实际部署时需要配置邮件服务器"}):{success:!1,error:s.message}}},d=async e=>{const a=`\n    <html>\n      <head>\n        <style>\n          body { font-family: Arial, sans-serif; line-height: 1.6; color: #333; max-width: 600px; margin: 0 auto; }\n          .header { background-color: #3498db; color: white; padding: 20px; text-align: center; }\n          .content { padding: 20px; }\n          .appointment-details { background-color: #f8f9fa; padding: 15px; border-radius: 5px; margin: 20px 0; }\n          .footer { background-color: #2c3e50; color: white; padding: 20px; text-align: center; }\n          .highlight { color: #3498db; font-weight: bold; }\n          table { width: 100%; border-collapse: collapse; }\n          td { padding: 8px; border-bottom: 1px solid #eee; }\n          .important { background-color: #fff3cd; border: 1px solid #ffeaa7; padding: 15px; border-radius: 5px; margin: 15px 0; }\n        </style>\n      </head>\n      <body>\n        <div class="header">\n          <h1>🏥 Healthy Pathway</h1>\n          <h2>Appointment Confirmation</h2>\n        </div>\n        \n        <div class="content">\n          <p>Dear <strong>${e.patientName}</strong>,</p>\n          \n          <p>Your appointment has been successfully confirmed! Please find the details below:</p>\n          \n          <div class="appointment-details">\n            <h3>📅 Appointment Details:</h3>\n            <table>\n              <tr><td><strong>Doctor:</strong></td><td>${e.doctorName}</td></tr>\n              <tr><td><strong>Date:</strong></td><td>${e.date}</td></tr>\n              <tr><td><strong>Time:</strong></td><td>${e.time}</td></tr>\n              <tr><td><strong>Type:</strong></td><td>${e.type||"General Consultation"}</td></tr>\n              <tr><td><strong>Reference ID:</strong></td><td class="highlight">${e.id}</td></tr>\n              ${e.language?`<tr><td><strong>Language:</strong></td><td>${e.language}</td></tr>`:""}\n            </table>\n          </div>\n          \n          <div class="important">\n            <h3>⚠️ Important Reminders:</h3>\n            <ul>\n              <li>Please arrive <strong>15 minutes early</strong></li>\n              <li>Bring a valid photo ID and insurance card</li>\n              <li>Bring a list of your current medications</li>\n              <li>Contact us at least 24 hours in advance if you need to reschedule</li>\n              <li>Please wear a mask and follow all health protocols</li>\n            </ul>\n          </div>\n          \n          <p>📎 <strong>Attachment:</strong> A detailed PDF confirmation document is attached to this email for your records.</p>\n          \n          <p>If you have any questions or need to reschedule, please don't hesitate to contact us.</p>\n          \n          <p>Thank you for choosing Healthy Pathway! We look forward to seeing you.</p>\n          \n          <p>Best regards,<br>\n          <strong>The Healthy Pathway Team</strong></p>\n        </div>\n        \n        <div class="footer">\n          <p><strong>📞 Contact Information</strong></p>\n          <p>Phone: +1 (555) 123-4567 | Email: info@healthypathway.com</p>\n          <p>🌐 Website: www.healthypathway.com</p>\n        </div>\n      </body>\n    </html>\n  `,t={to:e.patientEmail,toName:e.patientName,subject:"✅ Appointment Confirmation - Healthy Pathway",htmlContent:a};return await c(t,e)},r=async e=>{try{const t=`${o}/health`;try{const e=new AbortController,a=setTimeout(()=>e.abort(),3e3),s=await fetch(t,{method:"GET",signal:e.signal});if(clearTimeout(a),!s.ok)throw new Error("邮件服务器不可用");console.log("✅ 邮件服务器连接成功，使用真实API发送邮件")}catch(a){return console.warn("⚠️ 邮件服务器连接失败，启用演示模式:",a.message),{success:!0,messageId:"demo-contact-"+Date.now(),demo:!0,message:"演示模式：联系表单已模拟提交成功"}}const s=await fetch(`${o}/api/send-contact`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e),timeout:1e4}),n=await s.json();if(s.ok&&n.success)return console.log("📧 联系表单邮件发送成功:",n.messageId),{success:!0,messageId:n.messageId,demo:!1,message:n.message||"邮件发送成功"};throw new Error(n.error||"邮件发送失败")}catch(t){return console.error("❌ 联系表单邮件发送失败:",t),"TypeError"===t.name||"AbortError"===t.name||t.message.includes("fetch")?{success:!0,messageId:"demo-contact-"+Date.now(),demo:!0,message:"演示模式：邮件服务器暂时不可用，已模拟成功发送"}:{success:!1,error:t.message}}},m=e=>{const a=n(e);a.save(`appointment_confirmation_${e.id}.pdf`)}},8987:(e,a,t)=>{t.r(a),t.d(a,{default:()=>W});var s=t(641),o=t(3751),n=t(33),l=t(953),i=t(8550);const c={class:"contact-page"},d={class:"container mt-5"},r={class:"row justify-content-center"},m={class:"col-lg-8"},p={class:"card shadow-lg"},u={class:"card-body p-4"},h={class:"row"},b={class:"col-md-6 mb-3"},v=["disabled"],g={class:"col-md-6 mb-3"},f=["disabled"],y={class:"row"},w={class:"col-md-6 mb-3"},k=["disabled"],E={class:"col-md-6 mb-3"},L=["disabled"],P={class:"mb-3"},x=["disabled"],A={class:"text-muted"},D={class:"card mb-4 bg-light"},_={class:"card-body"},I={class:"row"},T={class:"col-md-6 mb-2"},F=["disabled"],C={class:"col-md-6 mb-2"},N=["disabled"],S={class:"d-grid gap-2"},$=["disabled"],j={key:0,class:"spinner-border spinner-border-sm me-2"},R={__name:"Contact",setup(e){const a=(0,l.Kh)({name:"",email:"",phone:"",subject:"",message:""}),t=(0,l.KR)(!1),R=(0,l.Kh)({text:"",type:"success"}),U=(e,a="success")=>{R.text=e,R.type=a,setTimeout(()=>{R.text=""},5e3)},O=async()=>{t.value=!0;try{try{const e=await(0,i.j)(a);if(!e.success)throw new Error(e.error);e.demo?U("📧 "+e.message,"info"):U("✅ 邮件发送成功！我们会尽快回复您。","success")}catch(e){console.log("邮件服务器不可用，启用演示模式:",e.message),await new Promise(e=>setTimeout(e,1e3)),U("📧 演示模式：表单已提交！实际部署时邮件会发送给管理员。邮件服务器需要配置后才能正常工作。","info")}Object.keys(a).forEach(e=>{a[e]=""})}catch(e){console.error("发送消息失败:",e),U(`❌ 发送失败: ${e.message}`,"danger")}finally{t.value=!1}},W=()=>{try{const e={id:"DEMO-"+Date.now(),patientName:a.name||"演示用户",patientEmail:a.email||"demo@example.com",doctorName:"Dr. 张医生",date:new Date(Date.now()+6048e5).toLocaleDateString(),time:"上午 10:00",type:"常规咨询",language:"中文"};(0,i.aA)(e),U("📄 PDF文件生成成功并已下载！","success")}catch(e){console.error("PDF生成失败:",e),U("❌ PDF生成失败: "+e.message,"danger")}},B=async()=>{if(a.email){t.value=!0;try{const e={id:"DEMO-"+Date.now(),patientName:a.name||"演示用户",patientEmail:a.email,doctorName:"Dr. 张医生",date:new Date(Date.now()+6048e5).toLocaleDateString(),time:"上午 10:00",type:"演示咨询",language:"中文"},t=await(0,i.JC)(e);if(!t.success)throw new Error(t.error);t.demo?U("📧 "+t.message+"，PDF确认单已自动下载。","info"):U("📧 演示邮件发送成功！请查收您的邮箱，邮件包含PDF附件。","success")}catch(e){console.error("发送演示邮件失败:",e),U(`❌ 演示邮件发送失败: ${e.message}`,"danger")}finally{t.value=!1}}else U("⚠️ 请先输入您的邮箱地址","warning")};return(e,l)=>((0,s.uX)(),(0,s.CE)("div",c,[(0,s.Lk)("div",d,[(0,s.Lk)("div",r,[(0,s.Lk)("div",m,[l[16]||(l[16]=(0,s.Fv)('<div class="text-center mb-5" data-v-750caa6e><h1 class="display-5 text-primary" data-v-750caa6e>📧 联系我们</h1><p class="lead" data-v-750caa6e>真实邮件服务 - 支持PDF附件发送</p><div class="alert alert-info d-inline-block" data-v-750caa6e><i class="bi bi-info-circle me-2" data-v-750caa6e></i><strong data-v-750caa6e>当前状态：</strong><span class="badge bg-warning ms-1" data-v-750caa6e>演示模式</span><small class="d-block mt-1" data-v-750caa6e> 邮件服务器未运行，系统将生成PDF并模拟发送 </small></div></div>',1)),(0,s.Lk)("div",p,[l[15]||(l[15]=(0,s.Lk)("div",{class:"card-header bg-primary text-white"},[(0,s.Lk)("h3",{class:"card-title mb-0"},"📝 发送消息")],-1)),(0,s.Lk)("div",u,[(0,s.Lk)("form",{onSubmit:(0,o.D$)(O,["prevent"])},[R.text?((0,s.uX)(),(0,s.CE)("div",{key:0,class:(0,n.C4)(`alert alert-${R.type}`)},[(0,s.Lk)("i",{class:(0,n.C4)("success"===R.type?"bi bi-check-circle":"bi bi-exclamation-triangle")},null,2),(0,s.eW)(" "+(0,n.v_)(R.text),1)],2)):(0,s.Q3)("",!0),(0,s.Lk)("div",h,[(0,s.Lk)("div",b,[l[5]||(l[5]=(0,s.Lk)("label",{for:"name",class:"form-label"},[(0,s.Lk)("i",{class:"bi bi-person"}),(0,s.eW)(" 姓名 * ")],-1)),(0,s.bo)((0,s.Lk)("input",{id:"name","onUpdate:modelValue":l[0]||(l[0]=e=>a.name=e),type:"text",class:"form-control",placeholder:"请输入您的姓名",required:"",disabled:t.value},null,8,v),[[o.Jo,a.name]])]),(0,s.Lk)("div",g,[l[6]||(l[6]=(0,s.Lk)("label",{for:"email",class:"form-label"},[(0,s.Lk)("i",{class:"bi bi-envelope"}),(0,s.eW)(" 邮箱 * ")],-1)),(0,s.bo)((0,s.Lk)("input",{id:"email","onUpdate:modelValue":l[1]||(l[1]=e=>a.email=e),type:"email",class:"form-control",placeholder:"请输入您的邮箱",required:"",disabled:t.value},null,8,f),[[o.Jo,a.email]])])]),(0,s.Lk)("div",y,[(0,s.Lk)("div",w,[l[7]||(l[7]=(0,s.Lk)("label",{for:"phone",class:"form-label"},[(0,s.Lk)("i",{class:"bi bi-telephone"}),(0,s.eW)(" 电话 ")],-1)),(0,s.bo)((0,s.Lk)("input",{id:"phone","onUpdate:modelValue":l[2]||(l[2]=e=>a.phone=e),type:"tel",class:"form-control",placeholder:"请输入您的电话",disabled:t.value},null,8,k),[[o.Jo,a.phone]])]),(0,s.Lk)("div",E,[l[9]||(l[9]=(0,s.Lk)("label",{for:"subject",class:"form-label"},[(0,s.Lk)("i",{class:"bi bi-chat-dots"}),(0,s.eW)(" 主题 * ")],-1)),(0,s.bo)((0,s.Lk)("select",{id:"subject","onUpdate:modelValue":l[3]||(l[3]=e=>a.subject=e),class:"form-select",required:"",disabled:t.value},l[8]||(l[8]=[(0,s.Fv)('<option value="" data-v-750caa6e>请选择主题</option><option value="appointment" data-v-750caa6e>📅 预约咨询</option><option value="medical" data-v-750caa6e>🏥 医疗问题</option><option value="insurance" data-v-750caa6e>💳 保险咨询</option><option value="technical" data-v-750caa6e>🔧 技术支持</option><option value="feedback" data-v-750caa6e>💬 意见反馈</option><option value="other" data-v-750caa6e>❓ 其他</option>',7)]),8,L),[[o.u1,a.subject]])])]),(0,s.Lk)("div",P,[l[10]||(l[10]=(0,s.Lk)("label",{for:"message",class:"form-label"},[(0,s.Lk)("i",{class:"bi bi-chat-text"}),(0,s.eW)(" 消息内容 * ")],-1)),(0,s.bo)((0,s.Lk)("textarea",{id:"message","onUpdate:modelValue":l[4]||(l[4]=e=>a.message=e),class:"form-control",rows:"5",placeholder:"请输入您的消息内容...",required:"",disabled:t.value},null,8,x),[[o.Jo,a.message]]),(0,s.Lk)("small",A,(0,n.v_)(a.message.length)+"/1000 字符",1)]),(0,s.Lk)("div",D,[(0,s.Lk)("div",_,[l[13]||(l[13]=(0,s.Lk)("h6",{class:"card-title"},[(0,s.Lk)("i",{class:"bi bi-envelope-plus"}),(0,s.eW)(" 邮件服务演示 ")],-1)),l[14]||(l[14]=(0,s.Lk)("p",{class:"card-text small mb-3"}," 这是一个集成了真实邮件API的系统演示。点击下方按钮可以： ",-1)),(0,s.Lk)("div",I,[(0,s.Lk)("div",T,[(0,s.Lk)("button",{type:"button",class:"btn btn-outline-success btn-sm w-100",onClick:W,disabled:t.value},l[11]||(l[11]=[(0,s.Lk)("i",{class:"bi bi-file-pdf"},null,-1),(0,s.eW)(" 生成PDF示例 ",-1)]),8,F)]),(0,s.Lk)("div",C,[(0,s.Lk)("button",{type:"button",class:"btn btn-outline-info btn-sm w-100",onClick:B,disabled:t.value||!a.email},l[12]||(l[12]=[(0,s.Lk)("i",{class:"bi bi-envelope-at"},null,-1),(0,s.eW)(" 发送演示邮件 ",-1)]),8,N)])])])]),(0,s.Lk)("div",S,[(0,s.Lk)("button",{type:"submit",class:"btn btn-primary btn-lg",disabled:t.value},[t.value?((0,s.uX)(),(0,s.CE)("span",j)):(0,s.Q3)("",!0),(0,s.eW)(" "+(0,n.v_)(t.value?"发送中...":"📤 发送消息"),1)],8,$)])],32)])]),l[17]||(l[17]=(0,s.Fv)('<div class="card shadow mt-4" data-v-750caa6e><div class="card-body" data-v-750caa6e><h5 class="card-title" data-v-750caa6e><i class="bi bi-geo-alt" data-v-750caa6e></i> 联系信息 </h5><div class="row" data-v-750caa6e><div class="col-md-6" data-v-750caa6e><p data-v-750caa6e><strong data-v-750caa6e>📧 邮箱:</strong> info@healthypathway.com</p><p data-v-750caa6e><strong data-v-750caa6e>📞 电话:</strong> +1 (555) 123-4567</p></div><div class="col-md-6" data-v-750caa6e><p data-v-750caa6e><strong data-v-750caa6e>🏥 地址:</strong> 123 Healthcare Avenue</p><p data-v-750caa6e><strong data-v-750caa6e>🕒 营业时间:</strong> 周一至周五 8:00-18:00</p></div></div></div></div><div class="card shadow mt-4" data-v-750caa6e><div class="card-body" data-v-750caa6e><h5 class="card-title" data-v-750caa6e><i class="bi bi-stars" data-v-750caa6e></i> 邮件服务功能 </h5><div class="row" data-v-750caa6e><div class="col-md-6" data-v-750caa6e><ul class="list-unstyled" data-v-750caa6e><li data-v-750caa6e><i class="bi bi-check-circle text-success me-2" data-v-750caa6e></i>真实邮件API服务</li><li data-v-750caa6e><i class="bi bi-check-circle text-success me-2" data-v-750caa6e></i>支持PDF附件</li><li data-v-750caa6e><i class="bi bi-check-circle text-success me-2" data-v-750caa6e></i>HTML格式邮件</li></ul></div><div class="col-md-6" data-v-750caa6e><ul class="list-unstyled" data-v-750caa6e><li data-v-750caa6e><i class="bi bi-check-circle text-success me-2" data-v-750caa6e></i>实时发送状态</li><li data-v-750caa6e><i class="bi bi-check-circle text-success me-2" data-v-750caa6e></i>安全传输</li><li data-v-750caa6e><i class="bi bi-check-circle text-success me-2" data-v-750caa6e></i>专业邮件模板</li></ul></div></div><div class="alert alert-info mt-3" data-v-750caa6e><strong data-v-750caa6e><i class="bi bi-info-circle" data-v-750caa6e></i> 技术说明:</strong> 此系统集成了 Node.js + Express 后端邮件服务器，支持 SendGrid 和 SMTP 邮件发送。 为了演示目的，当前以模拟模式运行。 </div></div></div>',2))])])])]))}};var U=t(6262);const O=(0,U.A)(R,[["__scopeId","data-v-750caa6e"]]),W=O}}]);