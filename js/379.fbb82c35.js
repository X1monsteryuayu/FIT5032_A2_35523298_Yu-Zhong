"use strict";(self["webpackChunkhealthypathway"]=self["webpackChunkhealthypathway"]||[]).push([[379],{4379:(t,e,a)=>{a.r(e),a.d(e,{default:()=>et});var n=a(641),l=a(3751),o=a(33),s=a(953),i=a(5220),r=a(7518),d=a(454),u=a(8550);const c={class:"appointment-history-page"},p={class:"container mt-4"},m={class:"row"},h={class:"col-12"},k={class:"card shadow"},v={class:"card-header bg-success text-white d-flex justify-content-between align-items-center"},g={class:"d-flex gap-2"},b={class:"card-body"},L={class:"row mb-3"},f={class:"col-md-4"},y={class:"input-group"},w={class:"col-md-3"},C={class:"col-md-3"},E={class:"col-md-2"},_={class:"table-responsive"},x={class:"table table-hover"},A={class:"table-dark"},I={key:0},P={key:1},T={class:"badge bg-secondary"},D={class:"d-flex align-items-center"},N={class:"badge bg-info"},R={class:"btn-group btn-group-sm"},F=["onClick"],S=["onClick"],M=["onClick"],W=["onClick"],$={key:0,"aria-label":"é¢„çº¦è®°å½•åˆ†é¡µ"},U={class:"pagination justify-content-center"},O=["onClick"],K={class:"d-flex justify-content-between align-items-center mt-3"},V={class:"text-muted"},j={class:"modal-dialog modal-lg"},B={class:"modal-content"},X={key:0,class:"modal-body"},H={class:"row"},G={class:"col-md-6"},J={class:"table table-sm"},Y={class:"badge bg-info"},z={class:"col-md-6"},Q={class:"modal-footer"},q={__name:"AppointmentHistory",setup(t){const e=(0,i.rd)(),a=(0,r.n)(),q=(0,s.KR)([]),Z=(0,s.KR)(!1),tt=(0,s.KR)(""),et=(0,s.KR)(""),at=(0,s.KR)(""),nt=(0,s.KR)("date"),lt=(0,s.KR)("desc"),ot=(0,s.KR)(1),st=(0,s.KR)(10),it=(0,s.KR)(null),rt=(0,s.KR)(null),dt=(0,n.EW)(()=>{let t=q.value;if(tt.value){const e=tt.value.toLowerCase();t=t.filter(t=>t.doctorName.toLowerCase().includes(e)||t.id.toString().includes(e))}return et.value&&(t=t.filter(t=>t.status===et.value)),at.value&&(t=t.filter(t=>t.type===at.value)),t}),ut=(0,n.EW)(()=>{const t=[...dt.value];return t.sort((t,e)=>{let a=t[nt.value],n=e[nt.value];return"date"===nt.value?(a=new Date(a),n=new Date(n)):"string"===typeof a&&(a=a.toLowerCase(),n=n.toLowerCase()),"asc"===lt.value?a>n?1:-1:a<n?1:-1})}),ct=(0,n.EW)(()=>Math.ceil(ut.value.length/st.value)),pt=(0,n.EW)(()=>(ot.value-1)*st.value),mt=(0,n.EW)(()=>pt.value+st.value),ht=(0,n.EW)(()=>ut.value.slice(pt.value,mt.value)),kt=()=>{Z.value=!0,setTimeout(()=>{const t=["å¼ åŒ»ç”Ÿ","æåŒ»ç”Ÿ","ç‹åŒ»ç”Ÿ","åˆ˜åŒ»ç”Ÿ","é™ˆåŒ»ç”Ÿ","æ¨åŒ»ç”Ÿ","èµµåŒ»ç”Ÿ","å­™åŒ»ç”Ÿ"],e=["å·²é¢„çº¦","å·²å®Œæˆ","å·²å–æ¶ˆ","å¾…ç¡®è®¤"],a=["é—¨è¯Š","å¤æŸ¥","æ‰‹æœ¯å’¨è¯¢","å¥åº·æ£€æŸ¥"],n=["09:00","10:00","11:00","14:00","15:00","16:00"];q.value=Array.from({length:85},(l,o)=>{const s=new Date;return s.setDate(s.getDate()+Math.floor(60*Math.random())-30),{id:1e3+o,doctorName:t[Math.floor(Math.random()*t.length)],date:s.toISOString().split("T")[0],time:n[Math.floor(Math.random()*n.length)],type:a[Math.floor(Math.random()*a.length)],status:e[Math.floor(Math.random()*e.length)],createdAt:new Date(Date.now()-30*Math.random()*24*60*60*1e3).toLocaleString(),notes:Math.random()>.7?"è¯·æå‰15åˆ†é’Ÿåˆ°è¾¾":null,fee:Math.floor(500*Math.random())+100}}),Z.value=!1},800)},vt=()=>{ot.value=1},gt=()=>{ot.value=1},bt=t=>{nt.value===t?lt.value="asc"===lt.value?"desc":"asc":(nt.value=t,lt.value="asc"),ot.value=1},Lt=t=>nt.value!==t?"bi bi-arrow-down-up text-muted":"asc"===lt.value?"bi bi-arrow-up":"bi bi-arrow-down",ft=t=>{t>=1&&t<=ct.value&&(ot.value=t)},yt=()=>{ot.value=1},wt=()=>{const t=[],e=ct.value,a=ot.value;if(e<=7)for(let n=1;n<=e;n++)t.push(n);else if(a<=4){for(let e=1;e<=5;e++)t.push(e);t.push("..."),t.push(e)}else if(a>=e-3){t.push(1),t.push("...");for(let a=e-4;a<=e;a++)t.push(a)}else{t.push(1),t.push("...");for(let e=a-1;e<=a+1;e++)t.push(e);t.push("..."),t.push(e)}return t.filter(e=>"..."!==e||t.indexOf(e)===t.lastIndexOf(e))},Ct=t=>new Date(t).toLocaleDateString("zh-CN",{year:"numeric",month:"2-digit",day:"2-digit"}),Et=t=>{switch(t){case"å·²é¢„çº¦":return"bg-primary";case"å·²å®Œæˆ":return"bg-success";case"å·²å–æ¶ˆ":return"bg-danger";case"å¾…ç¡®è®¤":return"bg-warning";default:return"bg-secondary"}},_t=t=>{it.value=t;const e=new d.aF(rt.value);e.show()},xt=t=>{confirm("ç¡®å®šè¦æ”¹æœŸæ­¤é¢„çº¦å—ï¼Ÿ")&&e.push({name:"Consultation",query:{reschedule:t.id}})},At=t=>{confirm("ç¡®å®šè¦å–æ¶ˆæ­¤é¢„çº¦å—ï¼Ÿæ­¤æ“ä½œä¸å¯æ’¤é”€ã€‚")&&(t.status="å·²å–æ¶ˆ",alert("é¢„çº¦å·²å–æ¶ˆ"))},It=t=>{const e={id:t.id,patientName:a.user?.displayName||a.user?.email||"Patient",patientEmail:a.user?.email,doctorName:t.doctorName,date:Ct(t.date),time:t.time,type:t.type};(0,u.aA)(e)};return(0,n.sV)(()=>{a.isAuthenticated?kt():e.push("/login")}),(t,e)=>{const a=(0,n.g2)("router-link");return(0,n.uX)(),(0,n.CE)("div",c,[(0,n.Lk)("div",p,[(0,n.Lk)("div",m,[(0,n.Lk)("div",h,[(0,n.Lk)("div",k,[(0,n.Lk)("div",v,[e[16]||(e[16]=(0,n.Lk)("h4",{class:"mb-0"},"é¢„çº¦è®°å½•",-1)),(0,n.Lk)("div",g,[(0,n.Lk)("button",{class:"btn btn-light btn-sm",onClick:kt},e[14]||(e[14]=[(0,n.Lk)("i",{class:"bi bi-arrow-clockwise me-1"},null,-1),(0,n.eW)(" åˆ·æ–°æ•°æ® ",-1)])),(0,n.bF)(a,{to:"/consultation",class:"btn btn-warning btn-sm"},{default:(0,n.k6)(()=>e[15]||(e[15]=[(0,n.Lk)("i",{class:"bi bi-plus-circle me-1"},null,-1),(0,n.eW)(" æ–°å¢é¢„çº¦ ",-1)])),_:1,__:[15]})])]),(0,n.Lk)("div",b,[(0,n.Lk)("div",L,[(0,n.Lk)("div",f,[(0,n.Lk)("div",y,[e[17]||(e[17]=(0,n.Lk)("span",{class:"input-group-text"},[(0,n.Lk)("i",{class:"bi bi-search"})],-1)),(0,n.bo)((0,n.Lk)("input",{"onUpdate:modelValue":e[0]||(e[0]=t=>tt.value=t),type:"text",class:"form-control",placeholder:"æœç´¢åŒ»ç”Ÿå§“åæˆ–é¢„çº¦ID...",onInput:vt},null,544),[[l.Jo,tt.value]])])]),(0,n.Lk)("div",w,[(0,n.bo)((0,n.Lk)("select",{"onUpdate:modelValue":e[1]||(e[1]=t=>et.value=t),class:"form-select",onChange:vt},e[18]||(e[18]=[(0,n.Fv)('<option value="" data-v-4f8d95da>æ‰€æœ‰çŠ¶æ€</option><option value="å·²é¢„çº¦" data-v-4f8d95da>å·²é¢„çº¦</option><option value="å·²å®Œæˆ" data-v-4f8d95da>å·²å®Œæˆ</option><option value="å·²å–æ¶ˆ" data-v-4f8d95da>å·²å–æ¶ˆ</option><option value="å¾…ç¡®è®¤" data-v-4f8d95da>å¾…ç¡®è®¤</option>',5)]),544),[[l.u1,et.value]])]),(0,n.Lk)("div",C,[(0,n.bo)((0,n.Lk)("select",{"onUpdate:modelValue":e[2]||(e[2]=t=>at.value=t),class:"form-select",onChange:vt},e[19]||(e[19]=[(0,n.Fv)('<option value="" data-v-4f8d95da>æ‰€æœ‰ç±»å‹</option><option value="é—¨è¯Š" data-v-4f8d95da>é—¨è¯Š</option><option value="å¤æŸ¥" data-v-4f8d95da>å¤æŸ¥</option><option value="æ‰‹æœ¯å’¨è¯¢" data-v-4f8d95da>æ‰‹æœ¯å’¨è¯¢</option><option value="å¥åº·æ£€æŸ¥" data-v-4f8d95da>å¥åº·æ£€æŸ¥</option>',5)]),544),[[l.u1,at.value]])]),(0,n.Lk)("div",E,[(0,n.bo)((0,n.Lk)("select",{"onUpdate:modelValue":e[3]||(e[3]=t=>nt.value=t),class:"form-select",onChange:gt},e[20]||(e[20]=[(0,n.Lk)("option",{value:"date"},"æŒ‰æ—¥æœŸ",-1),(0,n.Lk)("option",{value:"doctorName"},"æŒ‰åŒ»ç”Ÿ",-1),(0,n.Lk)("option",{value:"status"},"æŒ‰çŠ¶æ€",-1)]),544),[[l.u1,nt.value]])])]),(0,n.Lk)("div",_,[(0,n.Lk)("table",x,[(0,n.Lk)("thead",A,[(0,n.Lk)("tr",null,[(0,n.Lk)("th",null,[(0,n.Lk)("button",{class:"btn btn-link text-white p-0",onClick:e[4]||(e[4]=t=>bt("id"))},[e[21]||(e[21]=(0,n.eW)(" é¢„çº¦ID ",-1)),(0,n.Lk)("i",{class:(0,o.C4)(Lt("id"))},null,2)])]),(0,n.Lk)("th",null,[(0,n.Lk)("button",{class:"btn btn-link text-white p-0",onClick:e[5]||(e[5]=t=>bt("doctorName"))},[e[22]||(e[22]=(0,n.eW)(" åŒ»ç”Ÿ ",-1)),(0,n.Lk)("i",{class:(0,o.C4)(Lt("doctorName"))},null,2)])]),(0,n.Lk)("th",null,[(0,n.Lk)("button",{class:"btn btn-link text-white p-0",onClick:e[6]||(e[6]=t=>bt("date"))},[e[23]||(e[23]=(0,n.eW)(" é¢„çº¦æ—¥æœŸ ",-1)),(0,n.Lk)("i",{class:(0,o.C4)(Lt("date"))},null,2)])]),(0,n.Lk)("th",null,[(0,n.Lk)("button",{class:"btn btn-link text-white p-0",onClick:e[7]||(e[7]=t=>bt("time"))},[e[24]||(e[24]=(0,n.eW)(" æ—¶é—´ ",-1)),(0,n.Lk)("i",{class:(0,o.C4)(Lt("time"))},null,2)])]),(0,n.Lk)("th",null,[(0,n.Lk)("button",{class:"btn btn-link text-white p-0",onClick:e[8]||(e[8]=t=>bt("type"))},[e[25]||(e[25]=(0,n.eW)(" ç±»å‹ ",-1)),(0,n.Lk)("i",{class:(0,o.C4)(Lt("type"))},null,2)])]),(0,n.Lk)("th",null,[(0,n.Lk)("button",{class:"btn btn-link text-white p-0",onClick:e[9]||(e[9]=t=>bt("status"))},[e[26]||(e[26]=(0,n.eW)(" çŠ¶æ€ ",-1)),(0,n.Lk)("i",{class:(0,o.C4)(Lt("status"))},null,2)])]),e[27]||(e[27]=(0,n.Lk)("th",null,"æ“ä½œ",-1))])]),(0,n.Lk)("tbody",null,[Z.value?((0,n.uX)(),(0,n.CE)("tr",I,e[28]||(e[28]=[(0,n.Lk)("td",{colspan:"7",class:"text-center py-4"},[(0,n.Lk)("div",{class:"spinner-border text-primary",role:"status"},[(0,n.Lk)("span",{class:"visually-hidden"},"Loading...")])],-1)]))):0===ht.value.length?((0,n.uX)(),(0,n.CE)("tr",P,e[29]||(e[29]=[(0,n.Lk)("td",{colspan:"7",class:"text-center py-4 text-muted"}," æ²¡æœ‰æ‰¾åˆ°åŒ¹é…çš„é¢„çº¦è®°å½• ",-1)]))):((0,n.uX)(!0),(0,n.CE)(n.FK,{key:2},(0,n.pI)(ht.value,t=>((0,n.uX)(),(0,n.CE)("tr",{key:t.id},[(0,n.Lk)("td",null,[(0,n.Lk)("span",T,"#"+(0,o.v_)(t.id),1)]),(0,n.Lk)("td",null,[(0,n.Lk)("div",D,[e[30]||(e[30]=(0,n.Lk)("i",{class:"bi bi-person-circle fs-5 text-primary me-2"},null,-1)),(0,n.Lk)("strong",null,(0,o.v_)(t.doctorName),1)])]),(0,n.Lk)("td",null,[e[31]||(e[31]=(0,n.Lk)("i",{class:"bi bi-calendar3 text-muted me-1"},null,-1)),(0,n.eW)(" "+(0,o.v_)(Ct(t.date)),1)]),(0,n.Lk)("td",null,[e[32]||(e[32]=(0,n.Lk)("i",{class:"bi bi-clock text-muted me-1"},null,-1)),(0,n.eW)(" "+(0,o.v_)(t.time),1)]),(0,n.Lk)("td",null,[(0,n.Lk)("span",N,(0,o.v_)(t.type),1)]),(0,n.Lk)("td",null,[(0,n.Lk)("span",{class:(0,o.C4)(["badge",Et(t.status)])},(0,o.v_)(t.status),3)]),(0,n.Lk)("td",null,[(0,n.Lk)("div",R,[(0,n.Lk)("button",{class:"btn btn-outline-primary",onClick:e=>_t(t)}," è¯¦æƒ… ",8,F),"å·²é¢„çº¦"===t.status?((0,n.uX)(),(0,n.CE)("button",{key:0,class:"btn btn-outline-warning",onClick:e=>xt(t)}," æ”¹æœŸ ",8,S)):(0,n.Q3)("",!0),"å·²é¢„çº¦"===t.status||"å¾…ç¡®è®¤"===t.status?((0,n.uX)(),(0,n.CE)("button",{key:1,class:"btn btn-outline-danger",onClick:e=>At(t)}," å–æ¶ˆ ",8,M)):(0,n.Q3)("",!0),(0,n.Lk)("button",{class:"btn btn-outline-success",onClick:e=>It(t)}," ä¸‹è½½ ",8,W)])])]))),128))])])]),ct.value>1?((0,n.uX)(),(0,n.CE)("nav",$,[(0,n.Lk)("ul",U,[(0,n.Lk)("li",{class:(0,o.C4)(["page-item",{disabled:1===ot.value}])},[(0,n.Lk)("button",{class:"page-link",onClick:e[10]||(e[10]=t=>ft(ot.value-1))},e[33]||(e[33]=[(0,n.Lk)("i",{class:"bi bi-chevron-left"},null,-1)]))],2),((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(wt(),t=>((0,n.uX)(),(0,n.CE)("li",{key:t,class:(0,o.C4)(["page-item",{active:t===ot.value}])},[(0,n.Lk)("button",{class:"page-link",onClick:e=>ft(t)},(0,o.v_)(t),9,O)],2))),128)),(0,n.Lk)("li",{class:(0,o.C4)(["page-item",{disabled:ot.value===ct.value}])},[(0,n.Lk)("button",{class:"page-link",onClick:e[11]||(e[11]=t=>ft(ot.value+1))},e[34]||(e[34]=[(0,n.Lk)("i",{class:"bi bi-chevron-right"},null,-1)]))],2)])])):(0,n.Q3)("",!0),(0,n.Lk)("div",K,[(0,n.Lk)("div",V," æ˜¾ç¤º "+(0,o.v_)(pt.value+1)+"-"+(0,o.v_)(Math.min(mt.value,dt.value.length))+" æ¡ï¼Œ å…± "+(0,o.v_)(dt.value.length)+" æ¡è®°å½• ",1),(0,n.Lk)("div",null,[(0,n.bo)((0,n.Lk)("select",{"onUpdate:modelValue":e[12]||(e[12]=t=>st.value=t),class:"form-select form-select-sm",onChange:yt},e[35]||(e[35]=[(0,n.Lk)("option",{value:"5"},"æ¯é¡µ 5 æ¡",-1),(0,n.Lk)("option",{value:"10"},"æ¯é¡µ 10 æ¡",-1),(0,n.Lk)("option",{value:"20"},"æ¯é¡µ 20 æ¡",-1),(0,n.Lk)("option",{value:"50"},"æ¯é¡µ 50 æ¡",-1)]),544),[[l.u1,st.value]])])])])])])])]),(0,n.Lk)("div",{class:"modal fade",id:"appointmentModal",tabindex:"-1",ref_key:"appointmentModal",ref:rt},[(0,n.Lk)("div",j,[(0,n.Lk)("div",B,[e[51]||(e[51]=(0,n.Lk)("div",{class:"modal-header"},[(0,n.Lk)("h5",{class:"modal-title"},"é¢„çº¦è¯¦æƒ…"),(0,n.Lk)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal"})],-1)),it.value?((0,n.uX)(),(0,n.CE)("div",X,[(0,n.Lk)("div",H,[(0,n.Lk)("div",G,[e[42]||(e[42]=(0,n.Lk)("h6",{class:"text-primary"},"åŸºæœ¬ä¿¡æ¯",-1)),(0,n.Lk)("table",J,[(0,n.Lk)("tr",null,[e[36]||(e[36]=(0,n.Lk)("td",null,[(0,n.Lk)("strong",null,"é¢„çº¦ID:")],-1)),(0,n.Lk)("td",null,"#"+(0,o.v_)(it.value.id),1)]),(0,n.Lk)("tr",null,[e[37]||(e[37]=(0,n.Lk)("td",null,[(0,n.Lk)("strong",null,"åŒ»ç”Ÿ:")],-1)),(0,n.Lk)("td",null,(0,o.v_)(it.value.doctorName),1)]),(0,n.Lk)("tr",null,[e[38]||(e[38]=(0,n.Lk)("td",null,[(0,n.Lk)("strong",null,"æ—¥æœŸ:")],-1)),(0,n.Lk)("td",null,(0,o.v_)(Ct(it.value.date)),1)]),(0,n.Lk)("tr",null,[e[39]||(e[39]=(0,n.Lk)("td",null,[(0,n.Lk)("strong",null,"æ—¶é—´:")],-1)),(0,n.Lk)("td",null,(0,o.v_)(it.value.time),1)]),(0,n.Lk)("tr",null,[e[40]||(e[40]=(0,n.Lk)("td",null,[(0,n.Lk)("strong",null,"ç±»å‹:")],-1)),(0,n.Lk)("td",null,[(0,n.Lk)("span",Y,(0,o.v_)(it.value.type),1)])]),(0,n.Lk)("tr",null,[e[41]||(e[41]=(0,n.Lk)("td",null,[(0,n.Lk)("strong",null,"çŠ¶æ€:")],-1)),(0,n.Lk)("td",null,[(0,n.Lk)("span",{class:(0,o.C4)(["badge",Et(it.value.status)])},(0,o.v_)(it.value.status),3)])])])]),(0,n.Lk)("div",z,[e[49]||(e[49]=(0,n.Lk)("h6",{class:"text-primary"},"é™„åŠ ä¿¡æ¯",-1)),(0,n.Lk)("p",null,[e[43]||(e[43]=(0,n.Lk)("strong",null,"é¢„çº¦æ—¶é—´:",-1)),e[44]||(e[44]=(0,n.Lk)("br",null,null,-1)),(0,n.eW)((0,o.v_)(it.value.createdAt),1)]),(0,n.Lk)("p",null,[e[45]||(e[45]=(0,n.Lk)("strong",null,"å¤‡æ³¨:",-1)),e[46]||(e[46]=(0,n.Lk)("br",null,null,-1)),(0,n.eW)((0,o.v_)(it.value.notes||"æ— "),1)]),(0,n.Lk)("p",null,[e[47]||(e[47]=(0,n.Lk)("strong",null,"è´¹ç”¨:",-1)),e[48]||(e[48]=(0,n.Lk)("br",null,null,-1)),(0,n.eW)("Â¥"+(0,o.v_)(it.value.fee||"å¾…ç¡®è®¤"),1)])])])])):(0,n.Q3)("",!0),(0,n.Lk)("div",Q,[e[50]||(e[50]=(0,n.Lk)("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"},"å…³é—­",-1)),(0,n.Lk)("button",{type:"button",class:"btn btn-success",onClick:e[13]||(e[13]=t=>It(it.value))}," ä¸‹è½½ç¡®è®¤å• ")])])])],512)])}}};var Z=a(6262);const tt=(0,Z.A)(q,[["__scopeId","data-v-4f8d95da"]]),et=tt},8550:(t,e,a)=>{a.d(e,{JC:()=>d,aA:()=>c,j:()=>u});var n=a(4323);const l={NODE_ENV:"production",VUE_APP_FIREBASE_API_KEY:"demo-key",VUE_APP_FIREBASE_AUTH_DOMAIN:"demo-project.firebaseapp.com",VUE_APP_FIREBASE_PROJECT_ID:"demo-project",VUE_APP_FIREBASE_STORAGE_BUCKET:"demo-project.appspot.com",VUE_APP_FIREBASE_MESSAGING_SENDER_ID:"123456789",VUE_APP_FIREBASE_APP_ID:"demo-app-id",VUE_APP_TITLE:"HealthyPathway",BASE_URL:"/FIT5032_A2_35523298_Yu-Zhong/"}.VUE_APP_EMAIL_API_BASE||"http://localhost:3001",o=t=>{const e=new n["default"];e.setFont("helvetica"),e.setFontSize(20),e.setTextColor(52,152,219),e.text("HEALTHY PATHWAY",20,30),e.setFontSize(16),e.setTextColor(0,0,0),e.text("Appointment Confirmation",20,45),e.setLineWidth(.5),e.line(20,50,190,50),e.setFontSize(12),e.setFont("helvetica","bold"),e.text("APPOINTMENT DETAILS",20,65),e.setFont("helvetica","normal"),e.text(`Patient Name: ${t.patientName}`,20,80),e.text(`Email: ${t.patientEmail}`,20,95),e.text(`Doctor: ${t.doctorName}`,20,110),e.text(`Date: ${t.date}`,20,125),e.text(`Time: ${t.time}`,20,140),e.text(`Type: ${t.type||"General Consultation"}`,20,155),e.text(`Reference ID: ${t.id}`,20,170),t.language&&e.text(`Preferred Language: ${t.language}`,20,185),e.line(20,195,190,195),e.setFont("helvetica","bold"),e.text("IMPORTANT REMINDERS",20,210),e.setFont("helvetica","normal");const a=["â€¢ Please arrive 15 minutes before your appointment time","â€¢ Bring a valid photo ID and insurance card","â€¢ Bring a list of current medications","â€¢ Contact us at least 24 hours in advance if you need to reschedule","â€¢ Wear a mask and follow health protocols"];let l=225;return a.forEach(t=>{e.text(t,25,l),l+=12}),e.setFont("helvetica","bold"),e.text("CONTACT INFORMATION",20,l+10),e.setFont("helvetica","normal"),e.text("Phone: +1 (555) 123-4567",20,l+25),e.text("Email: info@healthypathway.com",20,l+40),e.text("Website: www.healthypathway.com",20,l+55),e},s=t=>new Promise((e,a)=>{const n=new FileReader;n.onload=()=>e(n.result.split(",")[1]),n.onerror=a,n.readAsDataURL(t)}),i=t=>t?t.replace(/\n/g,"<br>").replace(/\t/g,"&nbsp;&nbsp;&nbsp;&nbsp;"):"",r=async(t,e=null)=>{try{const n=`${l}/health`;try{const t=new AbortController,e=setTimeout(()=>t.abort(),3e3),a=await fetch(n,{method:"GET",signal:t.signal});if(clearTimeout(e),!a.ok)throw new Error("åç«¯æœåŠ¡å™¨ä¸å¯ç”¨")}catch(a){return console.warn("åç«¯æœåŠ¡å™¨è¿æ¥å¤±è´¥ï¼Œå¯ç”¨æ¼”ç¤ºæ¨¡å¼:",a),e&&c(e),{success:!0,messageId:"demo-"+Date.now(),demo:!0,message:"æ¼”ç¤ºæ¨¡å¼ï¼šPDFå·²ç”Ÿæˆï¼Œå®é™…éƒ¨ç½²æ—¶é‚®ä»¶ä¼šæ­£å¸¸å‘é€"}}let r=[];if(e){const t=o(e),a=t.output("blob"),n=await s(a);r.push({content:n,filename:`appointment_${e.id}.pdf`,type:"application/pdf"})}const d={to:t.to,toName:t.toName||"Patient",subject:t.subject,htmlContent:t.htmlContent||i(t.message),attachments:r},u=await fetch(`${l}/api/send-email`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(d)}),p=await u.json();if(u.ok&&p.success)return console.log("Email sent successfully:",p.messageId),{success:!0,messageId:p.messageId};throw new Error(p.error||"Failed to send email")}catch(n){return console.error("Email sending failed:",n),"TypeError"===n.name||n.message.includes("fetch")?(e&&c(e),{success:!0,messageId:"demo-"+Date.now(),demo:!0,message:"æ¼”ç¤ºæ¨¡å¼ï¼šå®é™…éƒ¨ç½²æ—¶éœ€è¦é…ç½®é‚®ä»¶æœåŠ¡å™¨"}):{success:!1,error:n.message}}},d=async t=>{const e=`\n    <html>\n      <head>\n        <style>\n          body { font-family: Arial, sans-serif; line-height: 1.6; color: #333; max-width: 600px; margin: 0 auto; }\n          .header { background-color: #3498db; color: white; padding: 20px; text-align: center; }\n          .content { padding: 20px; }\n          .appointment-details { background-color: #f8f9fa; padding: 15px; border-radius: 5px; margin: 20px 0; }\n          .footer { background-color: #2c3e50; color: white; padding: 20px; text-align: center; }\n          .highlight { color: #3498db; font-weight: bold; }\n          table { width: 100%; border-collapse: collapse; }\n          td { padding: 8px; border-bottom: 1px solid #eee; }\n          .important { background-color: #fff3cd; border: 1px solid #ffeaa7; padding: 15px; border-radius: 5px; margin: 15px 0; }\n        </style>\n      </head>\n      <body>\n        <div class="header">\n          <h1>ğŸ¥ Healthy Pathway</h1>\n          <h2>Appointment Confirmation</h2>\n        </div>\n        \n        <div class="content">\n          <p>Dear <strong>${t.patientName}</strong>,</p>\n          \n          <p>Your appointment has been successfully confirmed! Please find the details below:</p>\n          \n          <div class="appointment-details">\n            <h3>ğŸ“… Appointment Details:</h3>\n            <table>\n              <tr><td><strong>Doctor:</strong></td><td>${t.doctorName}</td></tr>\n              <tr><td><strong>Date:</strong></td><td>${t.date}</td></tr>\n              <tr><td><strong>Time:</strong></td><td>${t.time}</td></tr>\n              <tr><td><strong>Type:</strong></td><td>${t.type||"General Consultation"}</td></tr>\n              <tr><td><strong>Reference ID:</strong></td><td class="highlight">${t.id}</td></tr>\n              ${t.language?`<tr><td><strong>Language:</strong></td><td>${t.language}</td></tr>`:""}\n            </table>\n          </div>\n          \n          <div class="important">\n            <h3>âš ï¸ Important Reminders:</h3>\n            <ul>\n              <li>Please arrive <strong>15 minutes early</strong></li>\n              <li>Bring a valid photo ID and insurance card</li>\n              <li>Bring a list of your current medications</li>\n              <li>Contact us at least 24 hours in advance if you need to reschedule</li>\n              <li>Please wear a mask and follow all health protocols</li>\n            </ul>\n          </div>\n          \n          <p>ğŸ“ <strong>Attachment:</strong> A detailed PDF confirmation document is attached to this email for your records.</p>\n          \n          <p>If you have any questions or need to reschedule, please don't hesitate to contact us.</p>\n          \n          <p>Thank you for choosing Healthy Pathway! We look forward to seeing you.</p>\n          \n          <p>Best regards,<br>\n          <strong>The Healthy Pathway Team</strong></p>\n        </div>\n        \n        <div class="footer">\n          <p><strong>ğŸ“ Contact Information</strong></p>\n          <p>Phone: +1 (555) 123-4567 | Email: info@healthypathway.com</p>\n          <p>ğŸŒ Website: www.healthypathway.com</p>\n        </div>\n      </body>\n    </html>\n  `,a={to:t.patientEmail,toName:t.patientName,subject:"âœ… Appointment Confirmation - Healthy Pathway",htmlContent:e};return await r(a,t)},u=async t=>{try{const a=`${l}/health`;try{const t=new AbortController,e=setTimeout(()=>t.abort(),3e3),n=await fetch(a,{method:"GET",signal:t.signal});if(clearTimeout(e),!n.ok)throw new Error("é‚®ä»¶æœåŠ¡å™¨ä¸å¯ç”¨");console.log("âœ… é‚®ä»¶æœåŠ¡å™¨è¿æ¥æˆåŠŸï¼Œä½¿ç”¨çœŸå®APIå‘é€é‚®ä»¶")}catch(e){return console.warn("âš ï¸ é‚®ä»¶æœåŠ¡å™¨è¿æ¥å¤±è´¥ï¼Œå¯ç”¨æ¼”ç¤ºæ¨¡å¼:",e.message),{success:!0,messageId:"demo-contact-"+Date.now(),demo:!0,message:"æ¼”ç¤ºæ¨¡å¼ï¼šè”ç³»è¡¨å•å·²æ¨¡æ‹Ÿæäº¤æˆåŠŸ"}}const n=await fetch(`${l}/api/send-contact`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t),timeout:1e4}),o=await n.json();if(n.ok&&o.success)return console.log("ğŸ“§ è”ç³»è¡¨å•é‚®ä»¶å‘é€æˆåŠŸ:",o.messageId),{success:!0,messageId:o.messageId,demo:!1,message:o.message||"é‚®ä»¶å‘é€æˆåŠŸ"};throw new Error(o.error||"é‚®ä»¶å‘é€å¤±è´¥")}catch(a){return console.error("âŒ è”ç³»è¡¨å•é‚®ä»¶å‘é€å¤±è´¥:",a),"TypeError"===a.name||"AbortError"===a.name||a.message.includes("fetch")?{success:!0,messageId:"demo-contact-"+Date.now(),demo:!0,message:"æ¼”ç¤ºæ¨¡å¼ï¼šé‚®ä»¶æœåŠ¡å™¨æš‚æ—¶ä¸å¯ç”¨ï¼Œå·²æ¨¡æ‹ŸæˆåŠŸå‘é€"}:{success:!1,error:a.message}}},c=t=>{const e=o(t);e.save(`appointment_confirmation_${t.id}.pdf`)}}}]);