"use strict";(self["webpackChunkhealthypathway"]=self["webpackChunkhealthypathway"]||[]).push([[721],{6721:(t,e,a)=>{a.r(e),a.d(e,{default:()=>C});var n=a(641),o=a(3751),s=a(33);const i={class:"consultation"},r={class:"container py-5"},l={class:"row justify-content-center"},c={class:"col-lg-8"},d={class:"card"},m={class:"card-body"},u={class:"mb-3"},p={class:"mb-3"},h={class:"mb-3"},g={class:"position-relative"},b=["disabled"],f={key:0,class:"spinner-border spinner-border-sm me-2",role:"status","aria-hidden":"true"};function y(t,e,a,y,w,v){return(0,n.uX)(),(0,n.CE)("div",i,[(0,n.Lk)("div",r,[e[13]||(e[13]=(0,n.Lk)("h1",{class:"text-center mb-5"},"Health Consultation",-1)),(0,n.Lk)("div",l,[(0,n.Lk)("div",c,[(0,n.Lk)("div",d,[(0,n.Lk)("div",m,[e[12]||(e[12]=(0,n.Lk)("h5",{class:"card-title mb-4"},"Request a Consultation",-1)),(0,n.Lk)("form",{onSubmit:e[4]||(e[4]=(0,o.D$)((...t)=>v.submitConsultation&&v.submitConsultation(...t),["prevent"]))},[(0,n.Lk)("div",u,[e[6]||(e[6]=(0,n.Lk)("label",{for:"topic",class:"form-label"},"Consultation Topic",-1)),(0,n.bo)((0,n.Lk)("select",{"onUpdate:modelValue":e[0]||(e[0]=t=>w.consultation.topic=t),id:"topic",class:"form-select",required:""},e[5]||(e[5]=[(0,n.Fv)('<option value="" data-v-3aa8e985>Select a topic</option><option value="general" data-v-3aa8e985>General Health</option><option value="mental" data-v-3aa8e985>Mental Health</option><option value="nutrition" data-v-3aa8e985>Nutrition</option><option value="fitness" data-v-3aa8e985>Fitness</option>',5)]),512),[[o.u1,w.consultation.topic]])]),(0,n.Lk)("div",p,[e[8]||(e[8]=(0,n.Lk)("label",{for:"preferredLanguage",class:"form-label"},"Preferred Language",-1)),(0,n.bo)((0,n.Lk)("select",{"onUpdate:modelValue":e[1]||(e[1]=t=>w.consultation.language=t),id:"preferredLanguage",class:"form-select",required:""},e[7]||(e[7]=[(0,n.Lk)("option",{value:""},"Select a language",-1),(0,n.Lk)("option",{value:"english"},"English",-1),(0,n.Lk)("option",{value:"chinese"},"Chinese",-1)]),512),[[o.u1,w.consultation.language]])]),(0,n.Lk)("div",h,[e[9]||(e[9]=(0,n.Lk)("label",{for:"description",class:"form-label"},"Description",-1)),(0,n.Lk)("div",g,[(0,n.bo)((0,n.Lk)("textarea",{"onUpdate:modelValue":e[2]||(e[2]=t=>w.consultation.description=t),id:"description",class:"form-control",rows:"5",required:"",placeholder:"Please describe your health concerns...",maxlength:"500",onInput:e[3]||(e[3]=(...t)=>v.updateCharCount&&v.updateCharCount(...t))},null,544),[[o.Jo,w.consultation.description]]),(0,n.Lk)("div",{class:(0,s.C4)(["char-counter",{"text-danger":w.remainingChars<50}])},(0,s.v_)(w.remainingChars)+" characters remaining ",3)]),e[10]||(e[10]=(0,n.Lk)("small",{class:"text-muted"}," Limit your description to 500 characters. Be clear and concise about your symptoms or concerns. ",-1))]),(0,n.Lk)("button",{type:"submit",class:"btn btn-primary w-100",disabled:!v.isDescriptionValid||w.isSubmitting},[w.isSubmitting?((0,n.uX)(),(0,n.CE)("span",f)):(0,n.Q3)("",!0),(0,n.eW)(" "+(0,s.v_)(w.isSubmitting?"Submitting...":"Submit Request"),1)],8,b),e[11]||(e[11]=(0,n.Lk)("p",{class:"mt-3 text-center text-muted"},[(0,n.Lk)("small",null,[(0,n.Lk)("i",{class:"bi bi-envelope me-1"}),(0,n.eW)(" You'll receive a confirmation email with PDF attachment")])],-1))],32)])])])])])])}var w=a(8550),v=a(7518);const E={data(){return{consultation:{topic:"",language:"",description:""},maxLength:500,remainingChars:500,isSubmitting:!1}},computed:{isDescriptionValid(){const t=this.consultation.description.trim().length;return t>0&&t<=this.maxLength}},methods:{updateCharCount(){this.remainingChars=this.maxLength-this.consultation.description.length},async submitConsultation(){if(this.isDescriptionValid){this.isSubmitting=!0;try{const t=(0,v.n)(),e={id:"CON_"+Date.now(),patientName:t.user?.displayName||t.user?.email?.split("@")[0]||"Patient",patientEmail:t.user?.email||"patient@example.com",doctorName:"Available Doctor",date:new Date(Date.now()+6048e5).toLocaleDateString(),time:"2:00 PM",type:this.consultation.topic,language:this.consultation.language,description:this.consultation.description};console.log("Consultation request:",e);const a=await(0,w.JC)(e);a.success?alert("Your consultation request has been submitted successfully! A confirmation email with PDF attachment has been sent to your email address."):alert("Your consultation request has been submitted, but we couldn't send the confirmation email. Please check your email settings."),this.consultation={topic:"",language:"",description:""},this.remainingChars=this.maxLength}catch(t){console.error("Consultation submission error:",t),alert("There was an error submitting your request. Please try again.")}finally{this.isSubmitting=!1}}}}};var P=a(6262);const A=(0,P.A)(E,[["render",y],["__scopeId","data-v-3aa8e985"]]),C=A},8550:(t,e,a)=>{a.d(e,{JC:()=>c,aA:()=>m,j:()=>d});var n=a(4323);const o={NODE_ENV:"production",VUE_APP_FIREBASE_API_KEY:"demo-key",VUE_APP_FIREBASE_AUTH_DOMAIN:"demo-project.firebaseapp.com",VUE_APP_FIREBASE_PROJECT_ID:"demo-project",VUE_APP_FIREBASE_STORAGE_BUCKET:"demo-project.appspot.com",VUE_APP_FIREBASE_MESSAGING_SENDER_ID:"123456789",VUE_APP_FIREBASE_APP_ID:"demo-app-id",VUE_APP_TITLE:"HealthyPathway",BASE_URL:"/FIT5032_A2_35523298_Yu-Zhong/"}.VUE_APP_EMAIL_API_BASE||"http://localhost:3001",s=t=>{const e=new n["default"];e.setFont("helvetica"),e.setFontSize(20),e.setTextColor(52,152,219),e.text("HEALTHY PATHWAY",20,30),e.setFontSize(16),e.setTextColor(0,0,0),e.text("Appointment Confirmation",20,45),e.setLineWidth(.5),e.line(20,50,190,50),e.setFontSize(12),e.setFont("helvetica","bold"),e.text("APPOINTMENT DETAILS",20,65),e.setFont("helvetica","normal"),e.text(`Patient Name: ${t.patientName}`,20,80),e.text(`Email: ${t.patientEmail}`,20,95),e.text(`Doctor: ${t.doctorName}`,20,110),e.text(`Date: ${t.date}`,20,125),e.text(`Time: ${t.time}`,20,140),e.text(`Type: ${t.type||"General Consultation"}`,20,155),e.text(`Reference ID: ${t.id}`,20,170),t.language&&e.text(`Preferred Language: ${t.language}`,20,185),e.line(20,195,190,195),e.setFont("helvetica","bold"),e.text("IMPORTANT REMINDERS",20,210),e.setFont("helvetica","normal");const a=["‚Ä¢ Please arrive 15 minutes before your appointment time","‚Ä¢ Bring a valid photo ID and insurance card","‚Ä¢ Bring a list of current medications","‚Ä¢ Contact us at least 24 hours in advance if you need to reschedule","‚Ä¢ Wear a mask and follow health protocols"];let o=225;return a.forEach(t=>{e.text(t,25,o),o+=12}),e.setFont("helvetica","bold"),e.text("CONTACT INFORMATION",20,o+10),e.setFont("helvetica","normal"),e.text("Phone: +1 (555) 123-4567",20,o+25),e.text("Email: info@healthypathway.com",20,o+40),e.text("Website: www.healthypathway.com",20,o+55),e},i=t=>new Promise((e,a)=>{const n=new FileReader;n.onload=()=>e(n.result.split(",")[1]),n.onerror=a,n.readAsDataURL(t)}),r=t=>t?t.replace(/\n/g,"<br>").replace(/\t/g,"&nbsp;&nbsp;&nbsp;&nbsp;"):"",l=async(t,e=null)=>{try{const n=`${o}/health`;try{const t=new AbortController,e=setTimeout(()=>t.abort(),3e3),a=await fetch(n,{method:"GET",signal:t.signal});if(clearTimeout(e),!a.ok)throw new Error("ÂêéÁ´ØÊúçÂä°Âô®‰∏çÂèØÁî®")}catch(a){return console.warn("ÂêéÁ´ØÊúçÂä°Âô®ËøûÊé•Â§±Ë¥•ÔºåÂêØÁî®ÊºîÁ§∫Ê®°Âºè:",a),e&&m(e),{success:!0,messageId:"demo-"+Date.now(),demo:!0,message:"ÊºîÁ§∫Ê®°ÂºèÔºöPDFÂ∑≤ÁîüÊàêÔºåÂÆûÈôÖÈÉ®ÁΩ≤Êó∂ÈÇÆ‰ª∂‰ºöÊ≠£Â∏∏ÂèëÈÄÅ"}}let l=[];if(e){const t=s(e),a=t.output("blob"),n=await i(a);l.push({content:n,filename:`appointment_${e.id}.pdf`,type:"application/pdf"})}const c={to:t.to,toName:t.toName||"Patient",subject:t.subject,htmlContent:t.htmlContent||r(t.message),attachments:l},d=await fetch(`${o}/api/send-email`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(c)}),u=await d.json();if(d.ok&&u.success)return console.log("Email sent successfully:",u.messageId),{success:!0,messageId:u.messageId};throw new Error(u.error||"Failed to send email")}catch(n){return console.error("Email sending failed:",n),"TypeError"===n.name||n.message.includes("fetch")?(e&&m(e),{success:!0,messageId:"demo-"+Date.now(),demo:!0,message:"ÊºîÁ§∫Ê®°ÂºèÔºöÂÆûÈôÖÈÉ®ÁΩ≤Êó∂ÈúÄË¶ÅÈÖçÁΩÆÈÇÆ‰ª∂ÊúçÂä°Âô®"}):{success:!1,error:n.message}}},c=async t=>{const e=`\n    <html>\n      <head>\n        <style>\n          body { font-family: Arial, sans-serif; line-height: 1.6; color: #333; max-width: 600px; margin: 0 auto; }\n          .header { background-color: #3498db; color: white; padding: 20px; text-align: center; }\n          .content { padding: 20px; }\n          .appointment-details { background-color: #f8f9fa; padding: 15px; border-radius: 5px; margin: 20px 0; }\n          .footer { background-color: #2c3e50; color: white; padding: 20px; text-align: center; }\n          .highlight { color: #3498db; font-weight: bold; }\n          table { width: 100%; border-collapse: collapse; }\n          td { padding: 8px; border-bottom: 1px solid #eee; }\n          .important { background-color: #fff3cd; border: 1px solid #ffeaa7; padding: 15px; border-radius: 5px; margin: 15px 0; }\n        </style>\n      </head>\n      <body>\n        <div class="header">\n          <h1>üè• Healthy Pathway</h1>\n          <h2>Appointment Confirmation</h2>\n        </div>\n        \n        <div class="content">\n          <p>Dear <strong>${t.patientName}</strong>,</p>\n          \n          <p>Your appointment has been successfully confirmed! Please find the details below:</p>\n          \n          <div class="appointment-details">\n            <h3>üìÖ Appointment Details:</h3>\n            <table>\n              <tr><td><strong>Doctor:</strong></td><td>${t.doctorName}</td></tr>\n              <tr><td><strong>Date:</strong></td><td>${t.date}</td></tr>\n              <tr><td><strong>Time:</strong></td><td>${t.time}</td></tr>\n              <tr><td><strong>Type:</strong></td><td>${t.type||"General Consultation"}</td></tr>\n              <tr><td><strong>Reference ID:</strong></td><td class="highlight">${t.id}</td></tr>\n              ${t.language?`<tr><td><strong>Language:</strong></td><td>${t.language}</td></tr>`:""}\n            </table>\n          </div>\n          \n          <div class="important">\n            <h3>‚ö†Ô∏è Important Reminders:</h3>\n            <ul>\n              <li>Please arrive <strong>15 minutes early</strong></li>\n              <li>Bring a valid photo ID and insurance card</li>\n              <li>Bring a list of your current medications</li>\n              <li>Contact us at least 24 hours in advance if you need to reschedule</li>\n              <li>Please wear a mask and follow all health protocols</li>\n            </ul>\n          </div>\n          \n          <p>üìé <strong>Attachment:</strong> A detailed PDF confirmation document is attached to this email for your records.</p>\n          \n          <p>If you have any questions or need to reschedule, please don't hesitate to contact us.</p>\n          \n          <p>Thank you for choosing Healthy Pathway! We look forward to seeing you.</p>\n          \n          <p>Best regards,<br>\n          <strong>The Healthy Pathway Team</strong></p>\n        </div>\n        \n        <div class="footer">\n          <p><strong>üìû Contact Information</strong></p>\n          <p>Phone: +1 (555) 123-4567 | Email: info@healthypathway.com</p>\n          <p>üåê Website: www.healthypathway.com</p>\n        </div>\n      </body>\n    </html>\n  `,a={to:t.patientEmail,toName:t.patientName,subject:"‚úÖ Appointment Confirmation - Healthy Pathway",htmlContent:e};return await l(a,t)},d=async t=>{try{const a=`${o}/health`;try{const t=new AbortController,e=setTimeout(()=>t.abort(),3e3),n=await fetch(a,{method:"GET",signal:t.signal});if(clearTimeout(e),!n.ok)throw new Error("ÈÇÆ‰ª∂ÊúçÂä°Âô®‰∏çÂèØÁî®");console.log("‚úÖ ÈÇÆ‰ª∂ÊúçÂä°Âô®ËøûÊé•ÊàêÂäüÔºå‰ΩøÁî®ÁúüÂÆûAPIÂèëÈÄÅÈÇÆ‰ª∂")}catch(e){return console.warn("‚ö†Ô∏è ÈÇÆ‰ª∂ÊúçÂä°Âô®ËøûÊé•Â§±Ë¥•ÔºåÂêØÁî®ÊºîÁ§∫Ê®°Âºè:",e.message),{success:!0,messageId:"demo-contact-"+Date.now(),demo:!0,message:"ÊºîÁ§∫Ê®°ÂºèÔºöËÅîÁ≥ªË°®ÂçïÂ∑≤Ê®°ÊãüÊèê‰∫§ÊàêÂäü"}}const n=await fetch(`${o}/api/send-contact`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t),timeout:1e4}),s=await n.json();if(n.ok&&s.success)return console.log("üìß ËÅîÁ≥ªË°®ÂçïÈÇÆ‰ª∂ÂèëÈÄÅÊàêÂäü:",s.messageId),{success:!0,messageId:s.messageId,demo:!1,message:s.message||"ÈÇÆ‰ª∂ÂèëÈÄÅÊàêÂäü"};throw new Error(s.error||"ÈÇÆ‰ª∂ÂèëÈÄÅÂ§±Ë¥•")}catch(a){return console.error("‚ùå ËÅîÁ≥ªË°®ÂçïÈÇÆ‰ª∂ÂèëÈÄÅÂ§±Ë¥•:",a),"TypeError"===a.name||"AbortError"===a.name||a.message.includes("fetch")?{success:!0,messageId:"demo-contact-"+Date.now(),demo:!0,message:"ÊºîÁ§∫Ê®°ÂºèÔºöÈÇÆ‰ª∂ÊúçÂä°Âô®ÊöÇÊó∂‰∏çÂèØÁî®ÔºåÂ∑≤Ê®°ÊãüÊàêÂäüÂèëÈÄÅ"}:{success:!1,error:a.message}}},m=t=>{const e=s(t);e.save(`appointment_confirmation_${t.id}.pdf`)}}}]);